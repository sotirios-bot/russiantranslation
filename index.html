<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NRZ5N9GV');</script>
  <!-- End Google Tag Manager -->

  <!-- â•â•â• PRIMARY SEO â•â•â• -->
  <title>Best Free English to Russian Translator 2026 â€” Formal, Casual &amp; Gender-Aware</title>
  <meta name="description" content="Free English to Russian translator with formal and casual modes, gender-aware grammar, pronunciation, transliteration, phrasebook and word-by-word breakdown. The most accurate online Russian translation tool â€” no signup, no limits." />
  <meta name="keywords" content="english to russian translator, russian translation, translate english to russian, russian to english, free translator, formal russian, casual russian, russian grammar, learn russian, how to say in russian, russian pronunciation, russian phrasebook" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="Mytheon Technologies" />
  <link rel="canonical" href="https://englishtorussian.ai/" />

  <!-- â•â•â• HREFLANG â•â•â• -->
  <link rel="alternate" hreflang="en" href="https://englishtorussian.ai/" />
  <link rel="alternate" hreflang="ru" href="https://englishtorussian.ai/" />
  <link rel="alternate" hreflang="x-default" href="https://englishtorussian.ai/" />

  <!-- â•â•â• OPEN GRAPH â•â•â• -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Best Free English to Russian Translator 2026 â€” Formal, Casual &amp; Gender-Aware" />
  <meta property="og:description" content="Translate English to Russian with formal/casual modes, gender context, TTS pronunciation, transliteration and word breakdown. Free, fast, no signup." />
  <meta property="og:url" content="https://englishtorussian.ai/" />
  <meta property="og:site_name" content="Mytheon Russian Translator" />
  <meta property="og:locale" content="en_US" />
  <meta property="og:locale:alternate" content="ru_RU" />

  <!-- â•â•â• JSON-LD: WebApplication â•â•â• -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "Best AI English to Russian Translator",
    "url": "https://englishtorussian.ai/",
    "description": "Free English to Russian translator with formal and casual modes, gender-aware grammar, TTS pronunciation, transliteration and word breakdown.",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "browserRequirements": "Requires JavaScript",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "author": {
      "@type": "Organization",
      "name": "Mytheon Technologies",
      "address": { "@type": "PostalAddress", "streetAddress": "133/1 Gagarin Avenue", "addressLocality": "Almaty", "addressCountry": "KZ" }
    },
    "featureList": ["English to Russian translation","Russian to English translation","Formal and casual modes","Gender-aware grammar","Text-to-speech pronunciation","Transliteration","Word breakdown","Translation history","Virtual Russian keyboard","Phrasebook"]
  }
  </script>

  <!-- â•â•â• JSON-LD: FAQPage â•â•â• -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {"@type":"Question","name":"How accurate is this English to Russian translator?","acceptedAnswer":{"@type":"Answer","text":"This translator uses Google's translation engine for high-quality, context-aware results handling everyday language, business phrases and conversational text well."}},
      {"@type":"Question","name":"What is the difference between formal and casual Russian?","acceptedAnswer":{"@type":"Answer","text":"Formal Russian uses Ğ’Ñ‹ (polite you) for strangers, elders and business. Casual Russian uses Ñ‚Ñ‹ with friends and family. The wrong form can sound rude or stiff."}},
      {"@type":"Question","name":"Why does gender matter in Russian translation?","acceptedAnswer":{"@type":"Answer","text":"Russian past-tense verbs agree with the speaker's gender. 'I went' is Ñ Ğ¿Ğ¾ÑˆÑ‘Ğ» (male) or Ñ Ğ¿Ğ¾ÑˆĞ»Ğ° (female). Selecting gender makes the translation grammatically correct."}},
      {"@type":"Question","name":"Is this translator free to use?","acceptedAnswer":{"@type":"Answer","text":"Yes â€” completely free, no signup, no usage limits. Developed by Mytheon Technologies, Almaty, Kazakhstan."}},
      {"@type":"Question","name":"Can I hear the Russian pronunciation?","acceptedAnswer":{"@type":"Answer","text":"Yes. Click the ğŸ”Š speaker button on any translation card to hear it spoken aloud using your browser's built-in text-to-speech engine."}}
    ]
  }
  </script>

  <style>
  /* â•â•â• CSS VARIABLES â€” LIGHT / DARK â•â•â• */
  :root {
    --bg:         #f0f4ff;
    --surface:    #ffffff;
    --surface2:   #fafcff;
    --border:     #d0dcf5;
    --border2:    #eaf0ff;
    --text:       #1a1a2e;
    --muted:      #5570a0;
    --faint:      #9aadcc;
    --xfaint:     #b0bcd8;
    --primary:    #2253cb;
    --primary-bg: #eaf0ff;
    --primary-dk: #1a40a8;
    --orange:     #ea7000;
    --orange-bg:  #fff7f0;
    --green:      #1a9e5c;
    --green-bg:   #f0fdf6;
    --shadow:     rgba(34,83,203,0.07);
    --shadow2:    rgba(34,83,203,0.18);
  }
  [data-theme="dark"] {
    --bg:         #080c18;
    --surface:    #0f1520;
    --surface2:   #0a1020;
    --border:     rgba(255,255,255,0.09);
    --border2:    rgba(255,255,255,0.05);
    --text:       #e5e7eb;
    --muted:      #9ca3af;
    --faint:      #6b7280;
    --xfaint:     #4b5563;
    --primary:    #5b85f5;
    --primary-bg: rgba(91,133,245,0.12);
    --primary-dk: #7599ff;
    --orange:     #fb923c;
    --orange-bg:  rgba(251,146,60,0.08);
    --green:      #34d399;
    --green-bg:   rgba(52,211,153,0.08);
    --shadow:     rgba(0,0,0,0.35);
    --shadow2:    rgba(0,0,0,0.55);
  }

  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Segoe UI',system-ui,-apple-system,sans-serif; background:var(--bg); min-height:100vh; color:var(--text); transition:background .3s,color .3s; }
  a { color:var(--primary); }

  /* â•â•â• JS-TOGGLED STATES â•â•â• */
  .lang-pill.active-lang { border-color:var(--primary) !important; color:var(--primary) !important; background:var(--primary-bg) !important; }
  .g-btn.on { background:var(--primary-bg) !important; border-color:var(--primary) !important; color:var(--primary) !important; font-weight:700; }
  .kb-toggle.on { border-color:var(--primary) !important; color:var(--primary) !important; background:var(--primary-bg) !important; }
  .vkeyboard { display:none; }
  .vkeyboard.show { display:block; }
  .loading { display:none; }
  .loading.show { display:block; }
  .results { display:none; }
  .results.show { display:block; }
  .grammar-tip { display:none; }
  .grammar-tip.show { display:block; }
  .detect-pill { display:none; }
  .detect-pill.show { display:flex; }
  .faq-a { display:none; }
  .faq-a.open { display:block; }
  .faq-q.open { color:var(--primary); background:var(--primary-bg); }
  .faq-icon { transition:transform .25s; color:var(--primary); }
  .faq-q.open .faq-icon { transform:rotate(45deg); }
  .tab-btn.active { background:var(--primary-bg) !important; border-color:var(--primary) !important; color:var(--primary) !important; font-weight:700; }
  #toast { opacity:0; transform:translateY(10px); transition:opacity .25s,transform .25s; pointer-events:none; }
  #toast.show { opacity:1; transform:translateY(0); }
  .iBtn { background:none; border:none; cursor:pointer; font-size:1rem; opacity:.38; transition:opacity .2s,transform .2s; padding:2px 4px; line-height:1; }
  .iBtn:hover { opacity:1; transform:scale(1.18); }
  .iBtn.starred { opacity:1; }
  .howto-hidden { display:none; }
  .swap-btn:hover { transform:rotate(180deg); background:var(--primary-dk) !important; }

  /* â•â•â• SECTION HEADER WITH LINES â•â•â• */
  .sec-header { display:flex; align-items:center; gap:10px; margin-bottom:13px; font-size:.74rem; color:var(--faint); text-transform:uppercase; letter-spacing:1.2px; font-weight:700; }
  .sec-header::before,.sec-header::after { content:''; flex:1; height:1px; background:var(--border); }

  /* â•â•â• SPINNER â•â•â• */
  @keyframes spin { to{transform:rotate(360deg);} }
  .spinner { display:inline-block; width:34px; height:34px; border:3px solid var(--primary-bg); border-top-color:var(--primary); border-radius:50%; animation:spin .75s linear infinite; }

  /* â•â•â• VIRTUAL KEYBOARD â•â•â• */
  .vk-row { display:flex; gap:5px; justify-content:center; margin-bottom:5px; flex-wrap:wrap; }
  .vk-key { min-width:33px; height:33px; background:var(--surface); border:1px solid var(--border); border-radius:7px; font-size:.88rem; cursor:pointer; color:var(--text); transition:all .15s; display:flex; align-items:center; justify-content:center; font-family:inherit; }
  .vk-key:hover { background:var(--primary-bg); border-color:var(--primary); color:var(--primary); }
  .vk-key:active { transform:scale(.9); }
  .vk-wide { min-width:60px; font-size:.72rem; }
  .vk-space { min-width:130px; }
  @media(max-width:768px) {
    .vk-key { min-width:26px; height:30px; font-size:.75rem; }
    .vk-wide { min-width:44px; font-size:.67rem; }
    .vk-space { min-width:65px; }
  }
  @media(max-width:390px) {
    .vk-key { min-width:22px; height:27px; font-size:.67rem; }
    .vk-wide { min-width:36px; font-size:.62rem; }
    .vk-space { min-width:48px; }
  }

  /* â•â•â• RESULT CARDS â•â•â• */
  .result-card.formal { border-color:rgba(34,83,203,.28); background:var(--surface2); }
  .result-card.casual { border-color:rgba(234,112,0,.28); background:var(--orange-bg); }
  .rc-label { font-size:.71rem; text-transform:uppercase; letter-spacing:1.2px; font-weight:700; }
  .formal .rc-label { color:var(--primary); }
  .casual .rc-label { color:var(--orange); }

  /* â•â•â• BREAKDOWN TABLE â•â•â• */
  .breakdown-card { border-radius:18px; border:1px solid var(--border); background:var(--surface); box-shadow:0 2px 10px var(--shadow); margin-bottom:16px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
  .breakdown-title { padding:13px 18px 11px; font-size:.73rem; text-transform:uppercase; letter-spacing:1.2px; color:var(--faint); font-weight:700; border-bottom:1px solid var(--border); background:var(--surface2); }
  table { width:100%; border-collapse:collapse; min-width:430px; }
  thead th { padding:9px 16px; text-align:left; font-size:.7rem; text-transform:uppercase; letter-spacing:1px; color:var(--xfaint); background:var(--surface2); border-bottom:1px solid var(--border); font-weight:700; }
  tbody tr { transition:background .15s; }
  tbody tr:hover { background:var(--primary-bg); }
  tbody td { padding:10px 16px; border-bottom:1px solid var(--border); font-size:.91rem; vertical-align:middle; }
  tbody tr:last-child td { border-bottom:none; }

  /* â•â•â• TAGS (JS-generated) â•â•â• */
  .tag { display:inline-flex; align-items:center; gap:4px; padding:3px 9px; border-radius:20px; font-size:.69rem; font-weight:700; letter-spacing:.5px; text-transform:uppercase; }
  .tag-verb   { background:rgba(34,83,203,.1);  color:var(--primary); }
  .tag-noun   { background:rgba(234,112,0,.1);  color:var(--orange); }
  .tag-phrase { background:rgba(26,158,92,.1);  color:var(--green); }
  .tag-adj    { background:rgba(160,50,220,.1); color:#a032dc; }
  .tag-adv    { background:rgba(200,130,0,.1);  color:#c68800; }
  .orig-word  { color:var(--muted); font-weight:500; }
  .trans-word { color:var(--primary); font-weight:700; }
  .note-cell  { color:var(--faint); font-size:.79rem; }

  /* â•â•â• HISTORY (JS-generated) â•â•â• */
  .history-item { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:11px 15px; cursor:pointer; transition:all .2s; display:flex; align-items:center; gap:10px; }
  .history-item:hover { border-color:var(--primary); background:var(--primary-bg); }
  .history-text { font-size:.87rem; color:var(--text); font-weight:600; flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .history-sub { font-size:.74rem; color:var(--faint); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .history-dir { font-size:.7rem; color:var(--primary); font-weight:700; flex-shrink:0; background:var(--primary-bg); padding:2px 8px; border-radius:10px; }
  .history-del { background:none; border:none; color:var(--xfaint); cursor:pointer; font-size:.9rem; flex-shrink:0; padding:2px; }
  .history-del:hover { color:#ef4444; }

  /* â•â•â• PHRASEBOOK (JS-generated) â•â•â• */
  .phrase-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
  @media(max-width:600px) { .phrase-grid { grid-template-columns:1fr; } }
  .phrase-card { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:11px 14px; cursor:pointer; transition:all .2s; }
  .phrase-card:hover { border-color:var(--primary); background:var(--primary-bg); }
  .phrase-en { font-size:.87rem; color:var(--text); font-weight:600; }
  .phrase-ru { font-size:.87rem; color:var(--primary); margin-top:3px; }
  .phrase-tr { font-size:.73rem; color:var(--faint); font-style:italic; margin-top:2px; }
  .phrase-card-footer { display:flex; justify-content:flex-end; margin-top:7px; }
  .phrase-copy-btn { background:none; border:1px solid var(--border); border-radius:7px; padding:3px 9px; font-size:.75rem; color:var(--faint); cursor:pointer; transition:all .2s; }
  .phrase-copy-btn:hover { border-color:var(--primary); color:var(--primary); background:var(--primary-bg); }

  /* â•â•â• HOW TO SAY (JS-generated) â•â•â• */
  .howto-row { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:9px 13px; display:flex; align-items:center; gap:10px; cursor:pointer; transition:all .15s; font-size:.84rem; }
  .howto-row:hover { border-color:var(--primary); background:var(--primary-bg); }
  .howto-en { color:var(--text); font-weight:600; flex:1; }
  .howto-ru { color:var(--primary); font-weight:700; flex:1; text-align:right; }
  .howto-copy-btn { background:none; border:1px solid var(--border); border-radius:6px; padding:2px 8px; font-size:.73rem; color:var(--faint); cursor:pointer; transition:all .2s; flex-shrink:0; }
  .howto-copy-btn:hover { border-color:var(--primary); color:var(--primary); background:var(--primary-bg); }
  @media(max-width:600px) { .howto-ru { text-align:left; word-break:break-word; } }

  /* â•â•â• TOOL PILLS (shared across new tools) â•â•â• */
  .t-pill { background:var(--bg); border:2px solid var(--border); color:var(--faint); border-radius:10px; padding:6px 14px; font-size:.82rem; font-weight:700; cursor:pointer; transition:all .15s; font-family:inherit; }
  .t-pill.on { background:var(--primary-bg); border-color:var(--primary); color:var(--primary); }
  .t-pill:hover { background:var(--primary-bg); border-color:var(--primary); color:var(--primary); }

  /* â•â•â• FLIP CARD â•â•â• */
  .fc-inner { transform-style:preserve-3d; transition:transform .55s cubic-bezier(.4,0,.2,1); border-radius:16px; }
  .fc-inner.flipped { transform:rotateY(180deg); }
  .fc-face { -webkit-backface-visibility:hidden; backface-visibility:hidden; border-radius:16px; }
  .fc-back-face { transform:rotateY(180deg); }
  @keyframes fc-shake { 0%,100%{transform:translateX(0)}25%{transform:translateX(-8px)}75%{transform:translateX(8px)} }
  .fc-wrong-shake { animation:fc-shake .35s ease; }

  /* â•â•â• OPTION BUTTONS â•â•â• */
  .opt-btn { width:100%; padding:10px 14px; border-radius:12px; border:2px solid var(--border); background:var(--bg); color:var(--text); font-size:.88rem; font-weight:600; cursor:pointer; text-align:left; transition:all .15s; font-family:inherit; }
  .opt-btn:hover:not(:disabled) { border-color:var(--primary); background:var(--primary-bg); color:var(--primary); }
  .opt-btn.correct { border-color:var(--green)!important; background:var(--green-bg)!important; color:var(--green)!important; }
  .opt-btn.wrong   { border-color:#ef4444!important; background:rgba(239,68,68,.08)!important; color:#ef4444!important; }
  .opt-btn:disabled { cursor:default; opacity:.85; }

  /* â•â•â• GAP FILL â•â•â• */
  .gap-input { background:none; border:none; border-bottom:2px solid var(--primary); min-width:64px; text-align:center; font-size:.92rem; color:var(--primary); font-family:inherit; outline:none; padding:2px 6px; }
  .gap-input.correct { border-color:var(--green); color:var(--green); }
  .gap-input.wrong   { border-color:#ef4444; color:#ef4444; }

  /* â•â•â• LISTENING â•â•â• */
  @keyframes ls-pulse { 0%,100%{opacity:1;transform:scale(1)}50%{opacity:.7;transform:scale(1.08)} }
  .ls-playing { animation:ls-pulse .9s ease-in-out infinite; }

  /* â•â•â• EASTER EGG â•â•â• */
  @keyframes eeParticle {
    0%   { transform:translate(-50%,-50%) scale(0.2); opacity:1; }
    65%  { opacity:1; }
    100% { transform:translate(calc(-50% + var(--eetx)),calc(-50% + var(--eety))) scale(0.9); opacity:0; }
  }
  @keyframes eePulse {
    from { transform:scale(1) rotate(-10deg); }
    to   { transform:scale(1.22) rotate(10deg); }
  }
  @keyframes eeEntrance {
    0%  { transform:scale(0) rotate(-25deg); opacity:0; }
    60% { transform:scale(1.35) rotate(8deg); opacity:1; }
    80% { transform:scale(0.9) rotate(-4deg); }
    100%{ transform:scale(1) rotate(0deg); opacity:1; }
  }
  @keyframes eeShine {
    from { text-shadow:0 0 24px rgba(255,120,160,.7),0 0 48px rgba(255,50,110,.4); }
    to   { text-shadow:0 0 38px rgba(255,160,200,1), 0 0 70px rgba(255,100,150,.7); }
  }
  @keyframes eeFadeIn { from{opacity:0} to{opacity:1} }
  </style>

  <!-- Tailwind CSS -->
  <script>tailwind.config = { darkMode: ['selector', '[data-theme="dark"]'] }</script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body data-theme="light">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRZ5N9GV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- PAGE WRAPPER -->
<div class="max-w-2xl mx-auto px-4">

  <!-- MAIN APP -->
  <div class="py-6 pb-12">

    <!-- HEADER -->
    <header class="text-center pt-6 pb-6">
      <div class="flex gap-2 justify-center mb-4 flex-wrap">
        <a href="/ru/" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium no-underline transition" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸ‡·ğŸ‡º RU Version</a>
        <a href="/pdf/" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium no-underline transition" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸ“„ PDF Translator</a>
        <button id="themeBtn" onclick="toggleTheme()" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition cursor-pointer" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸŒ™ Dark</button>
      </div>
      <h1 class="text-2xl sm:text-3xl font-extrabold leading-tight tracking-tight" style="color:var(--primary)">ğŸ‡¬ğŸ‡§ â†” ğŸ‡·ğŸ‡º Best AI English to Russian Translator</h1>
      <p id="subheading" class="mt-3 text-sm max-w-xl mx-auto leading-relaxed" style="color:var(--muted)">âœ¨ Smart English to Russian and Russian to English translations with gender context, formality levels &amp; learning breakdowns âœ¨</p>
    </header>

    <!-- INPUT CARD -->
    <div class="rounded-2xl p-5 sm:p-7 mb-5 shadow" style="background:var(--surface);border:1px solid var(--border)">

      <!-- Direction Row -->
      <div class="flex items-center justify-center gap-3 mb-6 flex-wrap">
        <div class="lang-pill flex items-center gap-2 rounded-full px-6 py-3 text-base font-semibold min-w-[140px] justify-center border-2 transition active-lang" id="srcPill" style="background:var(--bg);border-color:var(--border);color:var(--muted)">ğŸ‡¬ğŸ‡§ English</div>
        <button class="swap-btn rounded-full w-12 h-12 text-xl cursor-pointer text-white flex-shrink-0 border-none transition-transform duration-300" onclick="swapDirection()" title="Swap" style="background:var(--primary);box-shadow:0 4px 14px var(--shadow2)">â‡„</button>
        <div class="lang-pill flex items-center gap-2 rounded-full px-6 py-3 text-base font-semibold min-w-[140px] justify-center border-2 transition" id="tgtPill" style="background:var(--bg);border-color:var(--border);color:var(--muted)">ğŸ‡·ğŸ‡º Russian</div>
        <div class="detect-pill items-center gap-1 rounded-full px-3 py-1 text-xs font-bold" id="detectPill" style="background:var(--green-bg);border:1px solid var(--green);color:var(--green)">ğŸ” <span id="detectText">Auto-detected</span></div>
      </div>

      <!-- Gender Row -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
        <div>
          <label id="speakerLabel" class="block text-xs uppercase tracking-widest mb-2 font-semibold" style="color:var(--faint)">ğŸ‘¤ I am speaking as...</label>
          <div class="flex gap-2">
            <button class="g-btn on flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="sp-m" onclick="setGender('speaker','male')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="mL1">ğŸ‘¨ Male</span></button>
            <button class="g-btn flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="sp-f" onclick="setGender('speaker','female')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="fL1">ğŸ‘© Female</span></button>
          </div>
        </div>
        <div>
          <label id="listenerLabel" class="block text-xs uppercase tracking-widest mb-2 font-semibold" style="color:var(--faint)">ğŸ—£ï¸ I am talking to...</label>
          <div class="flex gap-2">
            <button class="g-btn on flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="ls-m" onclick="setGender('listener','male')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="mL2">ğŸ‘¨ Male</span></button>
            <button class="g-btn flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="ls-f" onclick="setGender('listener','female')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="fL2">ğŸ‘© Female</span></button>
          </div>
        </div>
      </div>

      <!-- Textarea -->
      <div class="relative">
        <textarea id="inputText" class="w-full min-h-[130px] rounded-xl p-4 text-base resize-y outline-none transition focus:outline-none" placeholder="âœï¸  Type or paste your text here..." oninput="onInput()" style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit;line-height:1.6"></textarea>
        <div class="flex justify-between items-center mt-2 flex-wrap gap-2">
          <div class="text-xs" style="color:var(--xfaint)"><span id="charNum">0</span> <span id="charsLabel">characters</span></div>
          <div class="flex gap-2">
            <button class="kb-toggle border rounded-lg px-3 py-1.5 text-xs cursor-pointer transition" id="kbToggle" onclick="toggleKB()" style="background:none;border-color:var(--border);color:var(--faint)">âŒ¨ï¸ RU keyboard</button>
            <button class="kb-toggle border rounded-lg px-3 py-1.5 text-xs cursor-pointer transition" id="enKbToggle" onclick="toggleENKB()" style="background:none;border-color:var(--border);color:var(--faint)">âŒ¨ï¸ EN keyboard</button>
          </div>
        </div>
      </div>

      <!-- Russian Keyboard -->
      <div class="vkeyboard rounded-xl p-3 mt-2.5" id="vkeyboard" style="background:var(--surface2);border:1px solid var(--border)">
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ğ¹')">Ğ¹</button><button class="vk-key" onclick="vk('Ñ†')">Ñ†</button><button class="vk-key" onclick="vk('Ñƒ')">Ñƒ</button><button class="vk-key" onclick="vk('Ğº')">Ğº</button><button class="vk-key" onclick="vk('Ğµ')">Ğµ</button><button class="vk-key" onclick="vk('Ğ½')">Ğ½</button><button class="vk-key" onclick="vk('Ğ³')">Ğ³</button><button class="vk-key" onclick="vk('Ñˆ')">Ñˆ</button><button class="vk-key" onclick="vk('Ñ‰')">Ñ‰</button><button class="vk-key" onclick="vk('Ğ·')">Ğ·</button><button class="vk-key" onclick="vk('Ñ…')">Ñ…</button><button class="vk-key" onclick="vk('ÑŠ')">ÑŠ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ñ„')">Ñ„</button><button class="vk-key" onclick="vk('Ñ‹')">Ñ‹</button><button class="vk-key" onclick="vk('Ğ²')">Ğ²</button><button class="vk-key" onclick="vk('Ğ°')">Ğ°</button><button class="vk-key" onclick="vk('Ğ¿')">Ğ¿</button><button class="vk-key" onclick="vk('Ñ€')">Ñ€</button><button class="vk-key" onclick="vk('Ğ¾')">Ğ¾</button><button class="vk-key" onclick="vk('Ğ»')">Ğ»</button><button class="vk-key" onclick="vk('Ğ´')">Ğ´</button><button class="vk-key" onclick="vk('Ğ¶')">Ğ¶</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ñ‡')">Ñ‡</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ğ¼')">Ğ¼</button><button class="vk-key" onclick="vk('Ğ¸')">Ğ¸</button><button class="vk-key" onclick="vk('Ñ‚')">Ñ‚</button><button class="vk-key" onclick="vk('ÑŒ')">ÑŒ</button><button class="vk-key" onclick="vk('Ğ±')">Ğ±</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ñ‘')">Ñ‘</button>
        </div>
        <div class="vk-row">
          <button class="vk-key vk-wide" onclick="vk(' ')">Space</button>
          <button class="vk-key vk-space" onclick="vkBs()">âŒ« Del</button>
          <button class="vk-key vk-wide" onclick="doTranslate()" style="background:var(--primary);color:#fff;border-color:var(--primary);">â†µ Go</button>
        </div>
      </div>

      <!-- English Keyboard -->
      <div class="vkeyboard rounded-xl p-3 mt-2.5" id="enkeyboard" style="background:var(--surface2);border:1px solid var(--border)">
        <div class="vk-row">
          <button class="vk-key" onclick="vk('q')">q</button><button class="vk-key" onclick="vk('w')">w</button><button class="vk-key" onclick="vk('e')">e</button><button class="vk-key" onclick="vk('r')">r</button><button class="vk-key" onclick="vk('t')">t</button><button class="vk-key" onclick="vk('y')">y</button><button class="vk-key" onclick="vk('u')">u</button><button class="vk-key" onclick="vk('i')">i</button><button class="vk-key" onclick="vk('o')">o</button><button class="vk-key" onclick="vk('p')">p</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('a')">a</button><button class="vk-key" onclick="vk('s')">s</button><button class="vk-key" onclick="vk('d')">d</button><button class="vk-key" onclick="vk('f')">f</button><button class="vk-key" onclick="vk('g')">g</button><button class="vk-key" onclick="vk('h')">h</button><button class="vk-key" onclick="vk('j')">j</button><button class="vk-key" onclick="vk('k')">k</button><button class="vk-key" onclick="vk('l')">l</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('z')">z</button><button class="vk-key" onclick="vk('x')">x</button><button class="vk-key" onclick="vk('c')">c</button><button class="vk-key" onclick="vk('v')">v</button><button class="vk-key" onclick="vk('b')">b</button><button class="vk-key" onclick="vk('n')">n</button><button class="vk-key" onclick="vk('m')">m</button><button class="vk-key" onclick="vk('\'')">\'</button><button class="vk-key" onclick="vk('.')">.</button><button class="vk-key" onclick="vk(',')">ï¼Œ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('1')">1</button><button class="vk-key" onclick="vk('2')">2</button><button class="vk-key" onclick="vk('3')">3</button><button class="vk-key" onclick="vk('4')">4</button><button class="vk-key" onclick="vk('5')">5</button><button class="vk-key" onclick="vk('6')">6</button><button class="vk-key" onclick="vk('7')">7</button><button class="vk-key" onclick="vk('8')">8</button><button class="vk-key" onclick="vk('9')">9</button><button class="vk-key" onclick="vk('0')">0</button>
        </div>
        <div class="vk-row">
          <button class="vk-key vk-wide" onclick="vk(' ')">Space</button>
          <button class="vk-key vk-space" onclick="vkBs()">âŒ« Del</button>
          <button class="vk-key vk-wide" onclick="doTranslate()" style="background:var(--primary);color:#fff;border-color:var(--primary);">â†µ Go</button>
        </div>
      </div>

      <button class="w-full py-4 border-none rounded-xl text-white text-lg font-bold tracking-wide cursor-pointer mt-4 transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" id="translateBtn" onclick="doTranslate()" style="background:var(--primary)">
        ğŸ”„ &nbsp;<span id="translateBtnText">Translate</span>
      </button>
      <p class="text-center text-xs mt-2" style="color:var(--xfaint)">Press <kbd class="rounded px-1 py-0.5 text-xs" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)">Enter</kbd> to translate &nbsp;|&nbsp; <kbd class="rounded px-1 py-0.5 text-xs" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)">Shift+Enter</kbd> for new line</p>

    </div><!-- /input card -->

    <!-- LOADING -->
    <div class="loading text-center py-7" id="loading" style="color:var(--faint)">
      <div class="spinner"></div>
      <p class="mt-3" id="loadingText">Translatingâ€¦ ğŸŒ</p>
    </div>

    <!-- RESULTS -->
    <div class="results" id="results">

      <div class="sec-header" id="resultsHeader">âœ¨ Translations</div>

      <!-- Results grid: 1-col mobile, 2-col sm+ -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
        <!-- FORMAL -->
        <div class="result-card formal rounded-2xl p-5 border-2 shadow">
          <div class="flex items-center justify-between mb-2.5">
            <span class="rc-label" id="formalLabel">ğŸ© Formal</span>
            <div class="flex gap-0.5">
              <button class="iBtn" onclick="speakCard('formalText','formal')" title="Listen">ğŸ”Š</button>
              <button class="iBtn" id="favFormal" onclick="toggleFav('formal')" title="Favourite">â­</button>
              <button class="iBtn" onclick="copyCard('formalText')" title="Copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="text-base leading-7 min-h-[48px]" id="formalText" style="color:var(--text)"></div>
          <div class="text-sm mt-1.5 italic" id="formalTranslit" style="color:var(--faint)"></div>
          <div class="text-xs mt-1" id="formalNote" style="color:var(--xfaint)"></div>
        </div>
        <!-- CASUAL -->
        <div class="result-card casual rounded-2xl p-5 border-2 shadow">
          <div class="flex items-center justify-between mb-2.5">
            <span class="rc-label" id="casualLabel">ğŸ˜Š Casual</span>
            <div class="flex gap-0.5">
              <button class="iBtn" onclick="speakCard('casualText','casual')" title="Listen">ğŸ”Š</button>
              <button class="iBtn" id="favCasual" onclick="toggleFav('casual')" title="Favourite">â­</button>
              <button class="iBtn" onclick="copyCard('casualText')" title="Copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="text-base leading-7 min-h-[48px]" id="casualText" style="color:var(--text)"></div>
          <div class="text-sm mt-1.5 italic" id="casualTranslit" style="color:var(--faint)"></div>
          <div class="text-xs mt-1" id="casualNote" style="color:var(--xfaint)"></div>
        </div>
      </div>

      <!-- Grammar Tip -->
      <div class="grammar-tip rounded-xl px-4 py-2.5 mb-3.5 text-sm leading-relaxed" id="grammarTip" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)"></div>

      <!-- Share Row -->
      <div class="flex gap-2 flex-wrap mb-5 items-center">
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareLink()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ”— Copy link</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareFB()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ“˜ Facebook</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareWA()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¬ WhatsApp</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareLinkedIn()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¼ LinkedIn</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition w-full sm:w-auto justify-center mt-1 sm:mt-0" onclick="reportBad()" style="background:var(--surface);border-color:var(--border);color:var(--faint)">ğŸš© Report bad translation</button>
      </div>

      <!-- Word Breakdown -->
      <div class="breakdown-card">
        <div class="breakdown-title" id="breakdownTitle">ğŸ“š Word &amp; Phrase Breakdown â€” for learning</div>
        <table>
          <thead>
            <tr>
              <th id="thType">Type</th>
              <th id="thOrig">Original</th>
              <th id="thTrans">Translation</th>
              <th id="thNotes">Notes</th>
            </tr>
          </thead>
          <tbody id="breakdownBody">
            <tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">Readyâ€¦</td></tr>
          </tbody>
        </table>
      </div>

    </div><!-- /results -->

    <!-- HISTORY -->
    <div id="historySection" style="display:none" class="mb-4">
      <div class="sec-header" id="historyHeader">ğŸ• Recent Translations &nbsp;<button onclick="clearHistory()" class="cursor-pointer text-xs font-semibold" style="background:none;border:none;color:var(--faint)">Clear all</button></div>
      <div class="flex flex-col gap-2" id="historyList"></div>
    </div>

    <!-- PHRASEBOOK -->
    <div class="mb-4">
      <div class="sec-header" id="phraseHeader">ğŸ“– Phrasebook</div>
      <div class="flex gap-2 mb-4 flex-wrap" id="phraseTabs">
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium active" onclick="switchTab('daily',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ“… Daily</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('business',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¼ Business</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('travel',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">âœˆï¸ Travel</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('romance',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">â¤ï¸ Romance</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('medical',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ¥ Medical</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('emergency',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸš¨ Emergency</button>
      </div>
      <div id="phraseContent"></div>
    </div>

    <!-- FLIP CARD QUIZ -->
    <div class="mb-5">
      <div class="sec-header">ğŸƒ Flip Card Quiz</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <div id="fcSetup">
          <p class="text-xs mb-4" style="color:var(--muted)">Test your vocabulary with flashcards. Select a level, optional topic and how many cards you want.</p>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Level</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setFcPill('level','A1',this)">A1 Beginner</button>
              <button class="t-pill" onclick="setFcPill('level','A2',this)">A2 Elementary</button>
              <button class="t-pill" onclick="setFcPill('level','B1',this)">B1 Intermediate</button>
              <button class="t-pill" onclick="setFcPill('level','B2',this)">B2 Advanced</button>
            </div>
          </div>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-1.5" style="color:var(--faint)">Topic <span style="font-weight:400;text-transform:none;color:var(--xfaint)">(optional)</span></div>
            <input type="text" id="fcTopic" placeholder="e.g. food, family, verbs, travelâ€¦" class="w-full px-4 py-2.5 rounded-xl text-sm outline-none" style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit" />
          </div>
          <div class="mb-5">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Number of cards</div>
            <div class="flex gap-2 flex-wrap items-center">
              <button class="t-pill on" onclick="setFcPill('count',5,this)">5</button>
              <button class="t-pill" onclick="setFcPill('count',10,this)">10</button>
              <button class="t-pill" onclick="setFcPill('count',20,this)">20</button>
              <button class="t-pill" onclick="setFcPill('count',30,this)">30</button>
              <input type="number" id="fcCountCustom" placeholder="otherâ€¦" min="1" max="50" class="px-3 py-2 rounded-xl text-sm outline-none w-24" style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit" oninput="fcState.count=Math.min(50,parseInt(this.value)||5);document.querySelectorAll('#fcSetup .t-pill[data-grp=count]').forEach(b=>b.classList.remove('on'))" />
            </div>
          </div>
          <button onclick="startFlipQuiz()" class="w-full py-3 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">â–¶ Start Quiz</button>
        </div>
        <!-- Quiz area -->
        <div id="fcQuiz" style="display:none">
          <div class="flex justify-between items-center mb-2 text-sm font-semibold">
            <span style="color:var(--faint)">Card <span id="fcCurr">1</span> / <span id="fcTot">5</span></span>
            <span style="color:var(--green)">âœ“ <span id="fcScr">0</span> correct</span>
          </div>
          <div class="rounded-full h-1.5 mb-4" style="background:var(--border)"><div id="fcBar" class="h-1.5 rounded-full transition-all duration-500" style="background:var(--primary);width:0%"></div></div>
          <div style="perspective:900px;margin-bottom:16px">
            <div id="fcInner" class="fc-inner" style="position:relative;min-height:120px">
              <div id="fcFront" class="fc-face" style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;text-align:center;background:var(--primary);color:#fff">
                <div id="fcFrontLbl" style="font-size:.68rem;opacity:.7;text-transform:uppercase;letter-spacing:1px;margin-bottom:6px"></div>
                <div id="fcFrontTxt" style="font-size:1.45rem;font-weight:900;line-height:1.25"></div>
              </div>
              <div id="fcBack" class="fc-face fc-back-face" style="position:absolute;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px;text-align:center;border:2px solid var(--primary)" style="background:var(--surface2)">
                <div id="fcBackLbl" style="font-size:.68rem;color:var(--faint);text-transform:uppercase;letter-spacing:1px;margin-bottom:6px"></div>
                <div id="fcBackTxt" style="font-size:1.35rem;font-weight:900;color:var(--primary);line-height:1.25"></div>
              </div>
            </div>
          </div>
          <div id="fcOpts">
            <div class="text-xs mb-2 font-bold uppercase tracking-widest" style="color:var(--faint)" id="fcOptsLbl">Select the correct translation:</div>
            <div id="fcOptGrid" class="grid grid-cols-1 sm:grid-cols-2 gap-2"></div>
          </div>
          <div id="fcFb" style="display:none;margin-top:10px;padding:10px 14px;border-radius:12px;font-weight:700;font-size:.9rem;text-align:center"></div>
        </div>
        <!-- Results -->
        <div id="fcEnd" style="display:none;text-align:center;padding:14px 6px">
          <div style="font-size:56px;margin-bottom:8px" id="fcEndEmoji">ğŸ‰</div>
          <div style="font-size:1.3rem;font-weight:900;color:var(--primary)" id="fcEndTitle"></div>
          <div style="font-size:.88rem;color:var(--muted);margin-top:6px" id="fcEndSub"></div>
          <div class="flex gap-2 justify-center mt-4 flex-wrap">
            <button onclick="startFlipQuiz()" class="px-5 py-2.5 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">ğŸ”„ Try Again</button>
            <button onclick="resetFcSetup()" class="px-5 py-2.5 rounded-xl font-bold border-none cursor-pointer text-sm" style="background:var(--bg);border:2px solid var(--border);color:var(--text)">âš™ï¸ Settings</button>
          </div>
        </div>
      </div>
    </div>

    <!-- GAP-FILL EXERCISE -->
    <div class="mb-5">
      <div class="sec-header">ğŸ“ Gap-Fill Exercise</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <div id="gfSetup">
          <p class="text-xs mb-4" style="color:var(--muted)">Complete sentences by filling in the missing words. Choose multiple choice or free typing.</p>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Level</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setGfPill('level','A1',this)">A1</button>
              <button class="t-pill" onclick="setGfPill('level','A2',this)">A2</button>
              <button class="t-pill" onclick="setGfPill('level','B1',this)">B1</button>
              <button class="t-pill" onclick="setGfPill('level','B2',this)">B2</button>
            </div>
          </div>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Theme</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setGfPill('theme','verbs',this)">âš¡ Verbs</button>
              <button class="t-pill" onclick="setGfPill('theme','vocabulary',this)">ğŸ“– Vocabulary</button>
              <button class="t-pill" onclick="setGfPill('theme','cases',this)">ğŸ”¤ Cases</button>
            </div>
          </div>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Number of gaps</div>
            <div class="flex gap-2 flex-wrap items-center">
              <button class="t-pill on" onclick="setGfPill('count',5,this)">5</button>
              <button class="t-pill" onclick="setGfPill('count',10,this)">10</button>
              <button class="t-pill" onclick="setGfPill('count',20,this)">20</button>
              <input type="number" id="gfCountCustom" placeholder="otherâ€¦" min="1" max="30" class="px-3 py-2 rounded-xl text-sm outline-none w-24" style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit" oninput="gfState.count=Math.min(30,parseInt(this.value)||5);document.querySelectorAll('#gfSetup .t-pill[data-grp=count]').forEach(b=>b.classList.remove('on'))" />
            </div>
          </div>
          <div class="mb-5">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Answer mode</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setGfPill('mode','mc',this)">â˜‘ï¸ Multiple Choice</button>
              <button class="t-pill" onclick="setGfPill('mode','fill',this)">âœï¸ Fill-in</button>
            </div>
          </div>
          <button onclick="generateGapFill()" class="w-full py-3 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">ğŸ“ Generate Exercise</button>
        </div>
        <div id="gfExercise" style="display:none">
          <div id="gfQList" class="flex flex-col gap-4"></div>
          <button onclick="checkGapFill()" id="gfCheckBtn" class="w-full py-3 rounded-xl text-white font-bold border-none cursor-pointer text-sm mt-4" style="background:var(--green)">âœ… Check Answers</button>
          <div id="gfScore" style="display:none;text-align:center;margin-top:12px;padding:12px;border-radius:12px;font-weight:700;font-size:.95rem"></div>
          <div class="flex gap-2 justify-center mt-3 flex-wrap">
            <button onclick="generateGapFill()" class="px-5 py-2.5 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">ğŸ”„ New Exercise</button>
            <button onclick="resetGfSetup()" class="px-5 py-2.5 rounded-xl font-bold border-none cursor-pointer text-sm" style="background:var(--bg);border:2px solid var(--border);color:var(--text)">âš™ï¸ Settings</button>
          </div>
        </div>
      </div>
    </div>

    <!-- LISTENING EXERCISE -->
    <div class="mb-5">
      <div class="sec-header">ğŸ§ Listening Exercise</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <div id="lsSetup">
          <p class="text-xs mb-4" style="color:var(--muted)">Listen to a passage and answer comprehension questions. Uses your browser's text-to-speech.</p>
          <div class="mb-4">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Level</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setLsPill('level','A1',this)">A1 Beginner</button>
              <button class="t-pill" onclick="setLsPill('level','A2',this)">A2 Elementary</button>
              <button class="t-pill" onclick="setLsPill('level','B1',this)">B1 Intermediate</button>
            </div>
          </div>
          <div class="mb-5">
            <div class="text-xs font-bold uppercase tracking-widest mb-2" style="color:var(--faint)">Length</div>
            <div class="flex gap-2 flex-wrap">
              <button class="t-pill on" onclick="setLsPill('length','short',this)">âš¡ Short</button>
              <button class="t-pill" onclick="setLsPill('length','medium',this)">ğŸ“„ Medium</button>
              <button class="t-pill" onclick="setLsPill('length','long',this)">ğŸ“œ Long</button>
            </div>
          </div>
          <button onclick="generateListening()" class="w-full py-3 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">ğŸ§ Generate &amp; Listen</button>
        </div>
        <div id="lsPlayer" style="display:none">
          <div class="flex items-center gap-3 mb-4 p-4 rounded-xl" style="background:var(--bg);border:1px solid var(--border)">
            <button id="lsPlayBtn" onclick="toggleListen()" class="w-12 h-12 rounded-full text-white border-none cursor-pointer flex-shrink-0 text-xl font-bold" style="background:var(--primary)">â–¶</button>
            <div style="flex:1">
              <div class="text-sm font-bold" id="lsTitle" style="color:var(--text)">Listening Exercise</div>
              <div class="text-xs mt-0.5" id="lsSubtitle" style="color:var(--faint)"></div>
            </div>
            <button onclick="toggleLsText()" class="text-xs px-3 py-1.5 rounded-lg cursor-pointer border" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ“„ Text</button>
          </div>
          <div id="lsText" style="display:none;margin-bottom:16px;padding:14px;border-radius:12px;font-size:.88rem;line-height:1.75;color:var(--text);background:var(--bg);border:1px solid var(--border)"></div>
          <div class="text-xs font-bold uppercase tracking-widest mb-3" style="color:var(--faint)">Comprehension Questions</div>
          <div id="lsQList" class="flex flex-col gap-4"></div>
          <button onclick="checkListening()" class="w-full py-3 rounded-xl text-white font-bold border-none cursor-pointer text-sm mt-4" style="background:var(--green)">âœ… Check Answers</button>
          <div id="lsScore" style="display:none;text-align:center;margin-top:12px;padding:12px;border-radius:12px;font-weight:700;font-size:.95rem"></div>
          <div class="flex gap-2 justify-center mt-3 flex-wrap">
            <button onclick="generateListening()" class="px-5 py-2.5 rounded-xl text-white font-bold border-none cursor-pointer text-sm" style="background:var(--primary)">ğŸ”„ New Passage</button>
            <button onclick="resetLsSetup()" class="px-5 py-2.5 rounded-xl font-bold border-none cursor-pointer text-sm" style="background:var(--bg);border:2px solid var(--border);color:var(--text)">âš™ï¸ Settings</button>
          </div>
        </div>
      </div>
    </div>

    <!-- VERB CONJUGATOR -->
    <div class="mb-5">
      <div class="sec-header">âš¡ Verb Conjugator</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <p class="text-xs mb-3" style="color:var(--muted)">Enter a verb in English or Russian â€” get past, present &amp; future conjugations.</p>
        <div class="flex gap-2 mb-4">
          <input type="text" id="verbInput" placeholder="e.g. speak, Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ, go, Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒâ€¦"
                 class="flex-1 px-4 py-3 rounded-xl outline-none transition text-sm"
                 style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit"
                 onkeydown="if(event.key==='Enter') doConjugate()" />
          <button onclick="doConjugate()" class="px-5 py-3 rounded-xl text-white font-bold border-none cursor-pointer transition text-sm flex-shrink-0" style="background:var(--primary)">Conjugate</button>
        </div>
        <div id="conjugateLoading" style="display:none" class="text-center py-4"><div class="spinner"></div></div>
        <div id="conjugateResult" style="display:none"></div>
      </div>
    </div>

    <!-- CASE EXPLAINER -->
    <div class="mb-5">
      <div class="sec-header">ğŸ“š Case Explainer</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <p class="text-xs mb-3" style="color:var(--muted)">Enter a noun or adjective â€” see all 6 Russian cases with usage explained.</p>
        <div class="flex gap-2 mb-4">
          <input type="text" id="caseInput" placeholder="e.g. book, ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚, ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹â€¦"
                 class="flex-1 px-4 py-3 rounded-xl outline-none transition text-sm"
                 style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit"
                 onkeydown="if(event.key==='Enter') doDecline()" />
          <button onclick="doDecline()" class="px-5 py-3 rounded-xl text-white font-bold border-none cursor-pointer transition text-sm flex-shrink-0" style="background:var(--primary)">Explain</button>
        </div>
        <div id="caseLoading" style="display:none" class="text-center py-4"><div class="spinner"></div></div>
        <div id="caseResult" style="display:none"></div>
      </div>
    </div>

    <!-- FAQ -->
    <div class="my-6">
      <button onclick="toggleFaqSection()" class="w-full flex items-center justify-between px-4 py-3.5 rounded-xl cursor-pointer transition mb-2 text-left" style="background:var(--surface);border:1px solid var(--border)">
        <span class="text-sm font-bold" id="faqTitle" style="color:var(--primary)">â“ Frequently Asked Questions</span>
        <span id="faqToggleIcon" class="font-bold text-lg" style="color:var(--faint)">ï¼‹</span>
      </button>
      <div id="faqItems" style="display:none">

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸŒ How accurate is this English to Russian translator?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">This translator uses Google's translation engine to deliver high-quality, context-aware results. It handles everyday language, business phrases and conversational text very well. For specialised legal or medical content, professional review is recommended.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ© What is the difference between formal and casual Russian?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Formal Russian uses <strong>Ğ’Ñ‹</strong> (capitalised "you") when addressing someone with respect â€” in business, with strangers or elders. Casual Russian uses <strong>Ñ‚Ñ‹</strong> with friends and family. Choosing the wrong form can sound rude or overly stiff.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ‘© Why does gender matter in Russian translation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Russian past-tense verbs must agree with the speaker's gender. "I went" is <strong>Ñ Ğ¿Ğ¾ÑˆÑ‘Ğ»</strong> (male) or <strong>Ñ Ğ¿Ğ¾ÑˆĞ»Ğ°</strong> (female). Selecting your gender ensures the translation is grammatically correct for you personally.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”Š Can I hear the Russian pronunciation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click the ğŸ”Š speaker button on any translation card to hear it spoken aloud using your browser's built-in text-to-speech engine. Works in Chrome, Edge, Firefox and Safari.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”¤ What is transliteration and why is it useful?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Transliteration converts Russian Cyrillic letters into Latin characters so you can sound out words without knowing the Russian alphabet. For example, "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚" becomes "Privet". It is shown in italics below each translation.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ’¼ Can I use this for business communications?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes. The <strong>Formal</strong> mode uses the polite Ğ’Ñ‹ form, appropriate vocabulary and respectful phrasing for emails, letters and meetings. Always select Formal when writing to clients, managers or official contacts.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“š What does the Word Breakdown section do?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">The Word &amp; Phrase Breakdown translates individual key words and common phrases separately, labelling each as a verb, noun, adjective or phrase. It is a powerful learning tool for anyone studying Russian or English.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”„ Can I translate Russian back to English?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Absolutely. Click the â‡„ swap button to switch from Englishâ†’Russian to Russianâ†’English. The entire interface â€” labels, buttons, breakdown tags â€” switches to Russian so you always work in your source language.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>âŒ¨ï¸ What is the virtual Russian keyboard for?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">If you don't have a Cyrillic keyboard layout installed, the built-in virtual keyboard lets you type Russian characters directly by clicking. This is especially useful when translating Russian text back to English.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>âš¡ How do I translate without clicking the button?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Press <strong>Enter</strong> after typing to translate instantly. Use <strong>Shift+Enter</strong> to add a new line. You can also use <strong>Ctrl+Enter</strong> from anywhere on the page.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ• Does this save my translation history?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” your last 15 translations are saved automatically in your browser's local storage. Click any history item to restore it. Your data never leaves your device. Click "Clear all" to remove history anytime.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>â­ How do favourites work?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Click the â­ star button on any translation card to save it as a favourite. Favourites are stored in your browser and persist between sessions. Perfect for saving phrases you use regularly.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”— Can I share a translation with someone?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click "Copy link" to generate a shareable URL with your translation pre-loaded. Send it via WhatsApp, email or any messenger. You can also use the Facebook, WhatsApp or LinkedIn share buttons.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“ Is Russian grammar very different from English?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes, significantly. Russian has 6 grammatical cases, 3 genders, verb aspect (perfective/imperfective) and gender agreement in past tense. This is why context-aware, gender-specific translation matters so much.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ—£ï¸ Why select who I am talking to?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Some Russian adjectives and terms of address change depending on the listener's gender. "Dear" is <strong>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹</strong> for a male and <strong>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ</strong> for a female. Selecting the listener's gender ensures these forms are correct.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸŒ™ Is there a dark mode?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click the ğŸŒ™ Dark button in the top right corner to switch to dark mode. Your preference is saved and remembered between visits.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“– What phrases are in the phrasebook?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">The phrasebook contains 50 expert-curated phrases across 5 categories: Business, Travel, Romance, Medical and Emergency. Click any phrase to instantly load it into the translator.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ†“ Is this translator free to use?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” completely free, no signup, no usage limits. Developed by <strong>Mytheon Technologies</strong>, based in Almaty, Kazakhstan.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸš© What happens when I report a bad translation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Clicking "Report bad translation" logs the issue for our team to review. We continuously improve translation quality based on user feedback. Thank you for helping us build a better product.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ” Does it auto-detect the language?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” when you paste or type text, the translator automatically detects whether it is Russian or English and adjusts the direction accordingly. A green "Auto-detected" badge appears to confirm the switch.</div></div>

      </div><!-- /faqItems -->
    </div><!-- /faq-wrapper -->

    <footer class="text-center py-5 mt-2" style="border-top:1px solid var(--border)">
      <div class="text-sm font-bold tracking-widest uppercase" style="color:var(--primary)">âš¡ Powered by MYTHEON TECHNOLOGIES</div>
      <div class="text-xs mt-1" style="color:var(--faint)">133/1 Gagarin Avenue, Almaty, Kazakhstan</div>
      <div class="text-sm mt-3" style="color:var(--muted)">Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ğ¾ÑĞ²ÑÑ‰Ñ‘Ğ½ ĞºĞ°Ğ·Ğ°Ñ…ÑĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ½Ñ†ĞµÑÑĞµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ ÑƒĞºÑ€Ğ°Ğ»Ğ° Ğ¼Ğ¾Ñ‘ ÑĞµÑ€Ğ´Ñ†Ğµ â¤ï¸</div>
      <div class="text-sm font-semibold mt-1" style="color:#e53e3e">Ğ—Ğ°Ğ¹ĞºĞ°, Ñ‚Ñ‹ Ğ»ÑƒÑ‡ÑˆĞ°Ñ! â­âœ¨</div>
    </footer>

  </div><!-- /app -->

</div><!-- /page-wrap -->

<!-- EASTER EGG OVERLAY -->
<div id="easterEgg" onclick="closeEasterEgg()" style="display:none;position:fixed;inset:0;z-index:999999;background:rgba(8,4,24,0.92);align-items:center;justify-content:center;flex-direction:column;cursor:pointer;animation:eeFadeIn .3s ease">
  <div id="eeParticles" style="position:absolute;inset:0;overflow:hidden;pointer-events:none"></div>
  <div style="position:relative;z-index:1;text-align:center;padding:20px;pointer-events:none">
    <div id="eeEmoji" style="font-size:130px;line-height:1;display:block;will-change:transform"></div>
    <div style="font-size:2rem;font-weight:900;color:#fff;margin-top:14px;animation:eeShine .8s ease-in-out infinite alternate">Ğ”Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ°! ğŸ˜‰</div>
    <div style="font-size:1.05rem;color:rgba(255,255,255,.5);margin-top:10px;letter-spacing:.5px">tap anywhere to continue</div>
  </div>
</div>

<div id="toast" class="fixed bottom-5 left-4 right-4 sm:left-auto sm:right-5 sm:w-auto text-sm text-white rounded-xl px-4 py-2.5 z-[9999] shadow-lg text-center sm:text-left" style="background:var(--primary)"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let direction    = 'en-ru';
let speakerGend  = 'male';
let listenerGend = 'male';
let favFormal    = false;
let favCasual    = false;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UI STRINGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LANG = {
  'en-ru': {
    speakerLabel:'ğŸ‘¤ I am speaking as...',listenerLabel:'ğŸ—£ï¸ I am talking to...',
    male:'ğŸ‘¨ Male',female:'ğŸ‘© Female',
    placeholder:'âœï¸  Type or paste your text here...',charsLabel:'characters',
    translateBtn:'Translate',loading:'Translatingâ€¦ ğŸŒ',kbToggle:'âŒ¨ï¸ Russian keyboard',
    resultsHeader:'âœ¨ Translations',formalLabel:'ğŸ© Formal',casualLabel:'ğŸ˜Š Casual',
    breakdownTitle:'ğŸ“š Word & Phrase Breakdown â€” for learning',
    thType:'Type',thOrig:'Original',thTrans:'Translation',thNotes:'Notes',
    analysing:'ğŸ” Analysingâ€¦',noBreakdown:'No breakdown available.',
    noText:'âœï¸ Please type some text first!',copied:'ğŸ“‹ Copied!',
    tagVerb:'Verb',tagNoun:'Noun',tagAdj:'Adj',tagAdv:'Adverb',tagPhrase:'Phrase',
    noteVerbF:'ğŸ‘© fem. form',noteNoun:'ğŸ“Œ learn gender',notePhrase:'ğŸ’¬ Phrase',
    formalNote:'ğŸ© Polite "Ğ’Ñ‹" â€” business & strangers',
    casualNote:'ğŸ˜Š Friendly "Ñ‚Ñ‹" â€” friends & family',
    formalNoteRu:'ğŸ© Direct translation',casualNoteRu:'ğŸ˜Š Casual Russian form',
    historyHeader:'ğŸ• Recent Translations',phraseHeader:'ğŸ“– Phrasebook',
    faqTitle:'â“ Frequently Asked Questions',
    errText:'âŒ Translation failed â€” check your connection.',
    detectText:'Auto-detected',autoDetectMsg:'Language auto-detected ğŸ”',
    themeLight:'â˜€ï¸ Light',themeDark:'ğŸŒ™ Dark',
  },
  'ru-en': {
    speakerLabel:'ğŸ‘¤ Ğ¯ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ ĞºĞ°Ğº...',listenerLabel:'ğŸ—£ï¸ Ğ¯ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ñ Ñ...',
    male:'ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°',female:'ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°',
    placeholder:'âœï¸  Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ²ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ´ĞµÑÑŒ...',charsLabel:'ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²',
    translateBtn:'ĞŸĞµÑ€ĞµĞ²ĞµÑÑ‚Ğ¸',loading:'ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼â€¦ ğŸŒ',kbToggle:'âŒ¨ï¸ Ğ ÑƒÑ. ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ°',
    resultsHeader:'âœ¨ ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹',formalLabel:'ğŸ© ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',casualLabel:'ğŸ˜Š ĞĞµÑ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',
    breakdownTitle:'ğŸ“š Ğ Ğ°Ğ·Ğ±Ğ¾Ñ€ ÑĞ»Ğ¾Ğ² Ğ¸ Ñ„Ñ€Ğ°Ğ· â€” Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ',
    thType:'Ğ¢Ğ¸Ğ¿',thOrig:'ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»',thTrans:'ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´',thNotes:'Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸',
    analysing:'ğŸ” ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼â€¦',noBreakdown:'Ğ Ğ°Ğ·Ğ±Ğ¾Ñ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½.',
    noText:'âœï¸ ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚!',copied:'ğŸ“‹ Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!',
    tagVerb:'Ğ“Ğ»Ğ°Ğ³Ğ¾Ğ»',tagNoun:'Ğ¡ÑƒÑ‰ĞµÑÑ‚.',tagAdj:'ĞŸÑ€Ğ¸Ğ»Ğ°Ğ³.',tagAdv:'ĞĞ°Ñ€ĞµÑ‡Ğ¸Ğµ',tagPhrase:'Ğ¤Ñ€Ğ°Ğ·Ğ°',
    noteVerbF:'ğŸ‘© Ğ¶ĞµĞ½ÑĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°',noteNoun:'ğŸ“Œ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ Ñ€Ğ¾Ğ´',notePhrase:'ğŸ’¬ Ğ¤Ñ€Ğ°Ğ·Ğ°',
    formalNote:'ğŸ© ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´',casualNote:'ğŸ˜Š Ğ˜Ğ· Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ñ‹',
    formalNoteRu:'ğŸ© ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´',casualNoteRu:'ğŸ˜Š Ğ˜Ğ· Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ñ‹',
    historyHeader:'ğŸ• ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹',phraseHeader:'ğŸ“– Ğ Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¸Ğº',
    faqTitle:'â“ Ğ§Ğ°ÑÑ‚Ğ¾ Ğ·Ğ°Ğ´Ğ°Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹',
    errText:'âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ.',
    detectText:'ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸',autoDetectMsg:'Ğ¯Ğ·Ñ‹Ğº Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ğŸ”',
    themeLight:'â˜€ï¸ Ğ¡Ğ²ĞµÑ‚Ğ»Ğ°Ñ',themeDark:'ğŸŒ™ Ğ¢Ñ‘Ğ¼Ğ½Ğ°Ñ',
  }
};
const t = k => (LANG[direction][k] || LANG['en-ru'][k] || '');

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPDATE UI TEXT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function updateUI() {
  document.getElementById('speakerLabel').textContent  = t('speakerLabel');
  document.getElementById('listenerLabel').textContent = t('listenerLabel');
  document.getElementById('mL1').textContent = t('male');
  document.getElementById('fL1').textContent = t('female');
  document.getElementById('mL2').textContent = t('male');
  document.getElementById('fL2').textContent = t('female');
  document.getElementById('inputText').placeholder     = t('placeholder');
  document.getElementById('charsLabel').textContent    = t('charsLabel');
  document.getElementById('translateBtnText').textContent = t('translateBtn');
  document.getElementById('loadingText').textContent   = t('loading');
  document.getElementById('resultsHeader').textContent = t('resultsHeader');
  document.getElementById('formalLabel').textContent   = t('formalLabel');
  document.getElementById('casualLabel').textContent   = t('casualLabel');
  document.getElementById('breakdownTitle').textContent= t('breakdownTitle');
  document.getElementById('thType').textContent  = t('thType');
  document.getElementById('thOrig').textContent  = t('thOrig');
  document.getElementById('thTrans').textContent = t('thTrans');
  document.getElementById('thNotes').textContent = t('thNotes');
  document.getElementById('phraseHeader').textContent  = t('phraseHeader');
  document.getElementById('faqTitle').textContent      = t('faqTitle');
  document.getElementById('detectText').textContent    = t('detectText');
  document.getElementById('kbToggle').textContent      = t('kbToggle');
  const isDark = document.body.dataset.theme === 'dark';
  document.getElementById('themeBtn').textContent = isDark ? t('themeLight') : t('themeDark');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleTheme() {
  const isDark = document.body.dataset.theme === 'dark';
  document.body.dataset.theme = isDark ? 'light' : 'dark';
  localStorage.setItem('theme', document.body.dataset.theme);
  updateUI();
}
function loadTheme() {
  const saved = localStorage.getItem('theme');
  if (saved) document.body.dataset.theme = saved;
  updateUI();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LANGUAGE SWAP + AUTO-DETECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function swapDirection() {
  direction = direction === 'en-ru' ? 'ru-en' : 'en-ru';
  syncPills();
  document.getElementById('results').classList.remove('show');
  document.getElementById('inputText').value = '';
  document.getElementById('charNum').textContent = '0';
  document.getElementById('detectPill').classList.remove('show');
  updateUI();
  renderPhrasebook('daily');
}
function syncPills() {
  document.getElementById('srcPill').textContent = direction === 'en-ru' ? 'ğŸ‡¬ğŸ‡§ English' : 'ğŸ‡·ğŸ‡º Russian';
  document.getElementById('tgtPill').textContent = direction === 'en-ru' ? 'ğŸ‡·ğŸ‡º Russian' : 'ğŸ‡¬ğŸ‡§ English';
  document.getElementById('srcPill').classList.add('active-lang');
  document.getElementById('tgtPill').classList.remove('active-lang');
}
function setGender(role, val) {
  if (role === 'speaker') {
    speakerGend = val;
    document.getElementById('sp-m').classList.toggle('on', val === 'male');
    document.getElementById('sp-f').classList.toggle('on', val === 'female');
  } else {
    listenerGend = val;
    document.getElementById('ls-m').classList.toggle('on', val === 'male');
    document.getElementById('ls-f').classList.toggle('on', val === 'female');
  }
}
function autoDetect(text) {
  const hasCyrillic = /[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(text);
  const wanted = hasCyrillic ? 'ru-en' : 'en-ru';
  if (wanted !== direction) {
    direction = wanted;
    syncPills();
    updateUI();
    document.getElementById('detectPill').classList.add('show');
    renderPhrasebook('daily');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INPUT HANDLERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function onInput() {
  const v = document.getElementById('inputText').value;
  document.getElementById('charNum').textContent = v.length;
  if (v.length > 4) autoDetect(v);
  if (!v) document.getElementById('detectPill').classList.remove('show');
}
function countChars() { onInput(); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIRTUAL KEYBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleKB() {
  const kb = document.getElementById('vkeyboard');
  const btn = document.getElementById('kbToggle');
  const enKb = document.getElementById('enkeyboard');
  const enBtn = document.getElementById('enKbToggle');
  enKb.classList.remove('show'); enBtn.classList.remove('on');
  kb.classList.toggle('show');
  btn.classList.toggle('on');
}
function toggleENKB() {
  const enKb = document.getElementById('enkeyboard');
  const enBtn = document.getElementById('enKbToggle');
  const ruKb = document.getElementById('vkeyboard');
  const ruBtn = document.getElementById('kbToggle');
  ruKb.classList.remove('show'); ruBtn.classList.remove('on');
  enKb.classList.toggle('show');
  enBtn.classList.toggle('on');
}
function vk(char) {
  const ta = document.getElementById('inputText');
  const s = ta.selectionStart, e = ta.selectionEnd;
  ta.value = ta.value.slice(0,s) + char + ta.value.slice(e);
  ta.selectionStart = ta.selectionEnd = s + char.length;
  ta.focus();
  onInput();
}
function vkBs() {
  const ta = document.getElementById('inputText');
  const s = ta.selectionStart;
  if (s > 0) {
    ta.value = ta.value.slice(0,s-1) + ta.value.slice(s);
    ta.selectionStart = ta.selectionEnd = s - 1;
  }
  ta.focus();
  onInput();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  clearTimeout(el._t);
  el._t = setTimeout(() => el.classList.remove('show'), 2000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COPY / SPEAK / FAV / SHARE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function copyCard(id) {
  const txt = document.getElementById(id).textContent;
  try { await navigator.clipboard.writeText(txt); }
  catch { const ta = Object.assign(document.createElement('textarea'),{value:txt}); document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove(); }
  showToast(t('copied'));
}
function speakCard(id, type) {
  const txt = document.getElementById(id).textContent;
  if (!txt || !window.speechSynthesis) { showToast('ğŸ”‡ TTS not supported in this browser'); return; }
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(txt);
  u.lang = direction === 'en-ru' ? 'ru-RU' : 'en-US';
  u.rate = 0.9;
  window.speechSynthesis.speak(u);
  showToast('ğŸ”Š Speakingâ€¦');
}
function toggleFav(type) {
  const btn = document.getElementById('fav' + (type === 'formal' ? 'Formal' : 'Casual'));
  const txt = document.getElementById(type + 'Text').textContent;
  const stored = JSON.parse(localStorage.getItem('favourites') || '[]');
  const idx = stored.findIndex(f => f.text === txt);
  if (idx > -1) {
    stored.splice(idx, 1);
    btn.classList.remove('starred');
    showToast('ğŸ’” Removed from favourites');
  } else {
    stored.unshift({ text: txt, type, direction, ts: Date.now() });
    btn.classList.add('starred');
    showToast('â­ Saved to favourites!');
  }
  localStorage.setItem('favourites', JSON.stringify(stored.slice(0,30)));
}
function shareLink() {
  const input = document.getElementById('inputText').value.trim();
  if (!input) { showToast(t('noText')); return; }
  try {
    const data = btoa(encodeURIComponent(JSON.stringify({ input, direction })));
    const url = location.href.split('#')[0] + '#' + data;
    navigator.clipboard.writeText(url);
    showToast('ğŸ”— Link copied to clipboard!');
  } catch { showToast('âŒ Could not copy link'); }
}
function shareFB() {
  const url = encodeURIComponent(location.href.split('#')[0]);
  window.open('https://www.facebook.com/sharer/sharer.php?u=' + url, '_blank');
}
function shareWA() {
  const formal = document.getElementById('formalText').textContent;
  const input  = document.getElementById('inputText').value.trim();
  const msg = encodeURIComponent(`"${input}" â†’ "${formal}" via Mytheon Russian Translator`);
  window.open('https://wa.me/?text=' + msg, '_blank');
}
function shareLinkedIn() {
  const url = encodeURIComponent(location.href.split('#')[0]);
  window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + url, '_blank');
}
function reportBad() {
  showToast('ğŸ™ Thank you! Reported for review.');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TRANSLATION API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function fetchGoogle(text, sl, tl) {
  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sl}&tl=${tl}&dt=t&q=${encodeURIComponent(text)}`;
  const r = await fetch(url);
  if (!r.ok) throw new Error('HTTP ' + r.status);
  const d = await r.json();
  return d[0].map(s => s[0]).join('');
}
const delay = ms => new Promise(res => setTimeout(res, ms));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TRANSLITERATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TRANSLIT = {'Ğ°':'a','Ğ±':'b','Ğ²':'v','Ğ³':'g','Ğ´':'d','Ğµ':'ye','Ñ‘':'yo','Ğ¶':'zh','Ğ·':'z','Ğ¸':'i','Ğ¹':'y','Ğº':'k','Ğ»':'l','Ğ¼':'m','Ğ½':'n','Ğ¾':'o','Ğ¿':'p','Ñ€':'r','Ñ':'s','Ñ‚':'t','Ñƒ':'u','Ñ„':'f','Ñ…':'kh','Ñ†':'ts','Ñ‡':'ch','Ñˆ':'sh','Ñ‰':'shch','ÑŠ':'','Ñ‹':'y','ÑŒ':'','Ñ':'e','Ñ':'yu','Ñ':'ya','Ğ':'A','Ğ‘':'B','Ğ’':'V','Ğ“':'G','Ğ”':'D','Ğ•':'Ye','Ğ':'Yo','Ğ–':'Zh','Ğ—':'Z','Ğ˜':'I','Ğ™':'Y','Ğš':'K','Ğ›':'L','Ğœ':'M','Ğ':'N','Ğ':'O','ĞŸ':'P','Ğ ':'R','Ğ¡':'S','Ğ¢':'T','Ğ£':'U','Ğ¤':'F','Ğ¥':'Kh','Ğ¦':'Ts','Ğ§':'Ch','Ğ¨':'Sh','Ğ©':'Shch','Ğª':'','Ğ«':'Y','Ğ¬':'','Ğ­':'E','Ğ®':'Yu','Ğ¯':'Ya'};
function transliterate(text) { return text.split('').map(c => TRANSLIT[c] !== undefined ? TRANSLIT[c] : c).join(''); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RUSSIAN GRAMMAR HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TY2VY = [[/\bÑ‚Ñ‹\b/g,'Ğ’Ñ‹'],[/\bÑ‚ĞµĞ±Ñ\b/g,'Ğ’Ğ°Ñ'],[/\bÑ‚ĞµĞ±Ğµ\b/g,'Ğ’Ğ°Ğ¼'],[/\bÑ‚Ğ¾Ğ±Ğ¾Ğ¹\b/g,'Ğ’Ğ°Ğ¼Ğ¸'],[/\bÑ‚Ğ²Ğ¾Ğ¹\b/g,'Ğ’Ğ°Ñˆ'],[/\bÑ‚Ğ²Ğ¾Ñ\b/g,'Ğ’Ğ°ÑˆĞ°'],[/\bÑ‚Ğ²Ğ¾Ñ‘\b/g,'Ğ’Ğ°ÑˆĞµ'],[/\bÑ‚Ğ²Ğ¾Ğ¸\b/g,'Ğ’Ğ°ÑˆĞ¸'],[/\bÑ‚Ğ²Ğ¾ĞµĞ³Ğ¾\b/g,'Ğ’Ğ°ÑˆĞµĞ³Ğ¾'],[/\bÑ‚Ğ²Ğ¾ĞµĞ¹\b/g,'Ğ’Ğ°ÑˆĞµĞ¹'],[/\bÑ‚Ğ²Ğ¾ĞµĞ¼Ñƒ\b/g,'Ğ’Ğ°ÑˆĞµĞ¼Ñƒ']];
const VY2TY = [[/\bĞ’Ñ‹\b/g,'Ñ‚Ñ‹'],[/\bĞ’Ğ°Ñ\b/g,'Ñ‚ĞµĞ±Ñ'],[/\bĞ’Ğ°Ğ¼\b/g,'Ñ‚ĞµĞ±Ğµ'],[/\bĞ’Ğ°Ğ¼Ğ¸\b/g,'Ñ‚Ğ¾Ğ±Ğ¾Ğ¹'],[/\bĞ’Ğ°Ñˆ\b/g,'Ñ‚Ğ²Ğ¾Ğ¹'],[/\bĞ’Ğ°ÑˆĞ°\b/g,'Ñ‚Ğ²Ğ¾Ñ'],[/\bĞ’Ğ°ÑˆĞµ\b/g,'Ñ‚Ğ²Ğ¾Ñ‘'],[/\bĞ’Ğ°ÑˆĞ¸\b/g,'Ñ‚Ğ²Ğ¾Ğ¸'],[/\bĞ’Ğ°ÑˆĞµĞ³Ğ¾\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾'],[/\bĞ’Ğ°ÑˆĞµĞ¹\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ¹'],[/\bĞ’Ğ°ÑˆĞµĞ¼Ñƒ\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ¼Ñƒ']];
const GEND_F = [[/\bĞ¿Ñ€Ğ¸ÑˆÑ‘Ğ»\b/g,'Ğ¿Ñ€Ğ¸ÑˆĞ»Ğ°'],[/\bÑƒÑˆÑ‘Ğ»\b/g,'ÑƒÑˆĞ»Ğ°'],[/\bĞ½Ğ°ÑˆÑ‘Ğ»\b/g,'Ğ½Ğ°ÑˆĞ»Ğ°'],[/\bĞ±Ñ‹Ğ»\b/g,'Ğ±Ñ‹Ğ»Ğ°'],[/\bÑĞºĞ°Ğ·Ğ°Ğ»\b/g,'ÑĞºĞ°Ğ·Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾ĞµÑ…Ğ°Ğ»\b/g,'Ğ¿Ğ¾ĞµÑ…Ğ°Ğ»Ğ°'],[/\bĞ¿Ñ€Ğ¸ĞµÑ…Ğ°Ğ»\b/g,'Ğ¿Ñ€Ğ¸ĞµÑ…Ğ°Ğ»Ğ°'],[/\bÑĞ´ĞµĞ»Ğ°Ğ»\b/g,'ÑĞ´ĞµĞ»Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾ÑˆÑ‘Ğ»\b/g,'Ğ¿Ğ¾ÑˆĞ»Ğ°'],[/\bÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»\b/g,'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°'],[/\bĞ·Ğ½Ğ°Ğ»\b/g,'Ğ·Ğ½Ğ°Ğ»Ğ°'],[/\bĞ´ÑƒĞ¼Ğ°Ğ»\b/g,'Ğ´ÑƒĞ¼Ğ°Ğ»Ğ°'],[/\bÑ…Ğ¾Ñ‚ĞµĞ»\b/g,'Ñ…Ğ¾Ñ‚ĞµĞ»Ğ°'],[/\bĞ¼Ğ¾Ğ³\b/g,'Ğ¼Ğ¾Ğ³Ğ»Ğ°'],[/\bÑƒÑÑ‚Ğ°Ğ»\b/g,'ÑƒÑÑ‚Ğ°Ğ»Ğ°'],[/\bÑ€Ğ°Ğ´\b/g,'Ñ€Ğ°Ğ´Ğ°'],[/\bĞ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ğ»\b/g,'Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ğ»Ğ°'],[/\bÑĞ¿Ñ€Ğ¾ÑĞ¸Ğ»\b/g,'ÑĞ¿Ñ€Ğ¾ÑĞ¸Ğ»Ğ°'],[/\bĞ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ»\b/g,'Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ»Ğ°'],[/\bÑ€ĞµÑˆĞ¸Ğ»\b/g,'Ñ€ĞµÑˆĞ¸Ğ»Ğ°'],[/\bĞ½Ğ°Ñ‡Ğ°Ğ»\b/g,'Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾Ğ½ÑĞ»\b/g,'Ğ¿Ğ¾Ğ½ÑĞ»Ğ°'],[/\bĞ²Ğ·ÑĞ»\b/g,'Ğ²Ğ·ÑĞ»Ğ°'],[/\bĞ´Ğ°Ğ»\b/g,'Ğ´Ğ°Ğ»Ğ°']];
const LSTN_F = [[/\bĞ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹\b/g,'Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ'],[/\bÑƒĞ²Ğ°Ğ¶Ğ°ĞµĞ¼Ñ‹Ğ¹\b/g,'ÑƒĞ²Ğ°Ğ¶Ğ°ĞµĞ¼Ğ°Ñ'],[/\bĞ¼Ğ¸Ğ»Ñ‹Ğ¹\b/g,'Ğ¼Ğ¸Ğ»Ğ°Ñ']];
function applyMap(txt, map) { let o=txt; map.forEach(([re,rep])=>{o=o.replace(re,rep);}); return o; }
function makeFormal(t)  { return applyMap(t, TY2VY); }
function makeCasual(t)  { return applyMap(t, VY2TY); }
function applyGender(t,g) { return g==='female' ? applyMap(t,GEND_F) : t; }
function applyLstn(t,g)   { return g==='female' ? applyMap(t,LSTN_F) : t; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GRAMMAR TIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TIPS = {
  'en-ru': [
    [/\bĞ±Ñ‹Ğ»Ğ°?\b/,  'ğŸ’¡ <strong>Gender tip:</strong> "Ğ±Ñ‹Ğ»" = he was (male), "Ğ±Ñ‹Ğ»Ğ°" = she was (female). Russian past tense changes with speaker gender.'],
    [/\bĞ’Ñ‹\b/,     'ğŸ’¡ <strong>Formal tip:</strong> "Ğ’Ñ‹" (capital V) is the polite/formal "you". Always use it with strangers, managers and official contacts.'],
    [/\bÑ‚Ñ‹\b/,     'ğŸ’¡ <strong>Casual tip:</strong> "Ñ‚Ñ‹" is the informal "you". Use with friends, family and peers.'],
    [/\bĞ½Ğµ\b/,     'ğŸ’¡ <strong>Negation tip:</strong> "Ğ½Ğµ" means "not" in Russian and always comes directly before the verb it negates.'],
  ],
  'ru-en': [
    [/.+/, 'ğŸ’¡ <strong>Learning tip:</strong> Russian verbs have two aspects â€” perfective (completed action) and imperfective (ongoing). This affects the meaning significantly.'],
  ]
};
function showGrammarTip(text) {
  const tips = TIPS[direction] || [];
  const tip = document.getElementById('grammarTip');
  for (const [re, msg] of tips) {
    if (re.test(text)) {
      tip.innerHTML = msg;
      tip.classList.add('show');
      return;
    }
  }
  tip.classList.remove('show');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN TRANSLATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doTranslate() {
  const input = document.getElementById('inputText').value.trim();
  if (!input) { showToast(t('noText')); return; }

  checkEasterEgg(input);

  const sl = direction === 'en-ru' ? 'en' : 'ru';
  const tl = direction === 'en-ru' ? 'ru' : 'en';

  const btn = document.getElementById('translateBtn');
  btn.disabled = true;
  document.getElementById('translateBtnText').textContent = 'â³ ' + t('translateBtn') + 'â€¦';
  document.getElementById('loading').classList.add('show');
  document.getElementById('results').classList.remove('show');

  try {
    let base = await fetchGoogle(input, sl, tl);
    let formal, casual;

    if (direction === 'en-ru') {
      base   = applyGender(base, speakerGend);
      base   = applyLstn(base, listenerGend);
      formal = makeFormal(base);
      casual = makeCasual(base);
      document.getElementById('formalNote').textContent = t('formalNote');
      document.getElementById('casualNote').textContent = t('casualNote');
      document.getElementById('formalTranslit').textContent = transliterate(formal);
      document.getElementById('casualTranslit').textContent = transliterate(casual);
    } else {
      formal = base;
      await delay(300);
      try {
        casual = await fetchGoogle(makeCasual(input), sl, tl);
        if (casual.toLowerCase() === formal.toLowerCase()) casual = base;
      } catch { casual = base; }
      document.getElementById('formalNote').textContent = t('formalNoteRu');
      document.getElementById('casualNote').textContent = t('casualNoteRu');
      document.getElementById('formalTranslit').textContent = '';
      document.getElementById('casualTranslit').textContent = '';
    }

    document.getElementById('formalText').textContent = formal;
    document.getElementById('casualText').textContent = casual;

    document.getElementById('favFormal').classList.remove('starred');
    document.getElementById('favCasual').classList.remove('starred');

    showGrammarTip(formal);

    document.getElementById('loading').classList.remove('show');
    document.getElementById('results').classList.add('show');

    saveHistory(input, formal, casual);
    await buildBreakdown(input, sl, tl);

  } catch (err) {
    document.getElementById('loading').classList.remove('show');
    document.getElementById('results').classList.add('show');
    document.getElementById('formalText').textContent = t('errText');
    document.getElementById('casualText').textContent = '';
    document.getElementById('formalTranslit').textContent = '';
    document.getElementById('casualTranslit').textContent = '';
    document.getElementById('breakdownBody').innerHTML =
      `<tr><td colspan="4" style="padding:13px 16px;color:#ef4444">Error: ${err.message}</td></tr>`;
  }

  btn.disabled = false;
  document.getElementById('translateBtnText').textContent = t('translateBtn');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WORD BREAKDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const EN_STOP = new Set(['the','a','an','in','on','at','to','for','of','and','or','but','is','it','i','my','me','you','your','he','she','we','they','this','that','with','from','not','are','was','were','be','have','has','had','do','does','did','will','would','could','should','may','might','as','by','up','if','so','no','yes','just','also','very','more']);
const RU_STOP = new Set(['Ğ¸','Ğ²','Ğ½Ğ°','Ñ','Ğ¿Ğ¾','Ğ´Ğ»Ñ','Ğ¾Ñ‚','Ğ¸Ğ·','Ğº','Ğ°','Ğ½Ğ¾','Ñ‡Ñ‚Ğ¾','ÑÑ‚Ğ¾','Ñ','Ñ‚Ñ‹','Ğ¾Ğ½','Ğ¾Ğ½Ğ°','Ğ¼Ñ‹','Ğ²Ñ‹','Ğ¾Ğ½Ğ¸','Ğ½Ğµ','Ğ´Ğ°','Ğ½ĞµÑ‚','Ğ¶Ğµ','ÑƒĞ¶Ğµ','ĞºĞ°Ğº','Ñ‚Ğ°Ğº','Ğ±Ñ‹','Ğ»Ğ¸','Ğ¸Ğ»Ğ¸','Ñ‚Ğ¾','Ğ²ÑÑ‘','Ñ‚Ğ°Ğ¼','Ñ‚ÑƒÑ‚','ĞµÑ‰Ñ‘','Ğ²Ğ¾Ñ‚']);
function detectType(w) {
  const lo = w.toLowerCase(), ru = /[Ğ°-ÑÑ‘]/i.test(lo);
  if (!ru) {
    if (['is','are','was','were','be','have','has','had','do','does','did','go','went','come','came','want','like','love','need','know','think','see','look','say','tell','ask','work','live','feel','call','get','put','give','take','make','help','try','use','keep','play','hear','speak','write','read','meet','run','turn'].includes(lo) || lo.endsWith('ing')||lo.endsWith('ate')||lo.endsWith('ify')) return 'verb';
    if (lo.endsWith('ly')) return 'adverb';
    if (lo.endsWith('ful')||lo.endsWith('less')||lo.endsWith('ous')||lo.endsWith('ive')||lo.endsWith('al')) return 'adj';
  } else {
    if (lo.endsWith('Ñ‚ÑŒ')||lo.endsWith('Ñ‚ÑÑ')||lo.endsWith('Ğ°Ñ‚ÑŒ')||lo.endsWith('ĞµÑ‚')||lo.endsWith('ÑÑ‚')) return 'verb';
    if (lo.endsWith('Ğ½Ğ¾')||lo.endsWith('ÑĞºĞ¸')) return 'adverb';
    if (lo.endsWith('Ñ‹Ğ¹')||lo.endsWith('Ğ¸Ğ¹')||lo.endsWith('Ğ¾Ğ¹')||lo.endsWith('Ğ°Ñ')) return 'adj';
  }
  return 'noun';
}
function getTagCfg() {
  return { verb:{emoji:'âš¡',css:'tag-verb',label:t('tagVerb')}, noun:{emoji:'ğŸ“¦',css:'tag-noun',label:t('tagNoun')}, adj:{emoji:'ğŸ¨',css:'tag-adj',label:t('tagAdj')}, adverb:{emoji:'ğŸ’¨',css:'tag-adv',label:t('tagAdv')}, phrase:{emoji:'ğŸ’¬',css:'tag-phrase',label:t('tagPhrase')} };
}
function extractWords(text) {
  const stop = direction==='ru-en' ? RU_STOP : EN_STOP;
  return [...new Set(text.split(/\s+/).map(w=>w.replace(/[^a-zA-ZĞ°-ÑÑ‘Ğ-Ğ¯Ğ]/g,'').toLowerCase()).filter(w=>w.length>3&&!stop.has(w)))].slice(0,6);
}
function extractPhrases(text) {
  const ws = text.trim().split(/\s+/); const out=[];
  for (let i=0;i<Math.min(ws.length-1,3);i++){const p=ws[i]+' '+ws[i+1]; if(p.replace(/[^a-zA-ZĞ°-ÑÑ‘Ğ-Ğ¯Ğ]/g,'').length>5) out.push(p);}
  return out.slice(0,2);
}
async function buildBreakdown(input, sl, tl) {
  const tbody = document.getElementById('breakdownBody');
  tbody.innerHTML = `<tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">${t('analysing')}</td></tr>`;
  const words=extractWords(input), phrases=extractPhrases(input), rows=[];
  for (const w of words) {
    try { await delay(140); const tr=await fetchGoogle(w,sl,tl); const type=detectType(w); let note='';
      if(direction==='en-ru'&&type==='verb'&&speakerGend==='female') note=t('noteVerbF');
      else if(direction==='en-ru'&&type==='noun') note=t('noteNoun');
      rows.push({type,orig:w,trans:tr,note}); } catch {}
  }
  for (const ph of phrases) {
    try { await delay(140); const tr=await fetchGoogle(ph,sl,tl); rows.push({type:'phrase',orig:ph,trans:tr,note:t('notePhrase')}); } catch {}
  }
  tbody.innerHTML = '';
  if (!rows.length) { tbody.innerHTML=`<tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">${t('noBreakdown')}</td></tr>`; return; }
  const TAG = getTagCfg();
  rows.forEach(({type,orig,trans,note})=>{
    const cfg=TAG[type]||TAG.noun, tr=document.createElement('tr');
    tr.innerHTML=`<td><span class="tag ${cfg.css}">${cfg.emoji} ${cfg.label}</span></td><td class="orig-word">${orig}</td><td class="trans-word">${trans}</td><td class="note-cell">${note}</td>`;
    tbody.appendChild(tr);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HISTORY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function saveHistory(input, formal, casual) {
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  stored.unshift({ input, formal, casual, direction, ts: Date.now() });
  localStorage.setItem('history', JSON.stringify(stored.slice(0,15)));
  renderHistory();
}
function loadHistory() { renderHistory(); }
function renderHistory() {
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  const sec = document.getElementById('historySection');
  const list = document.getElementById('historyList');
  if (!stored.length) { sec.style.display = 'none'; return; }
  sec.style.display = 'block';
  list.innerHTML = '';
  stored.forEach((item, i) => {
    const el = document.createElement('div');
    el.className = 'history-item';
    el.innerHTML = `
      <div style="flex:1;min-width:0">
        <div class="history-text">${item.input}</div>
        <div class="history-sub">${item.formal}</div>
      </div>
      <div class="history-dir">${item.direction === 'en-ru' ? 'ğŸ‡¬ğŸ‡§â†’ğŸ‡·ğŸ‡º' : 'ğŸ‡·ğŸ‡ºâ†’ğŸ‡¬ğŸ‡§'}</div>
      <button class="history-del" onclick="deleteHistory(${i},event)">âœ•</button>`;
    el.addEventListener('click', () => restoreHistory(item));
    list.appendChild(el);
  });
}
function restoreHistory(item) {
  if (item.direction !== direction) swapDirection();
  document.getElementById('inputText').value = item.input;
  onInput();
  document.getElementById('formalText').textContent = item.formal;
  document.getElementById('casualText').textContent = item.casual;
  if (direction === 'en-ru') {
    document.getElementById('formalTranslit').textContent = transliterate(item.formal);
    document.getElementById('casualTranslit').textContent = transliterate(item.casual);
  }
  document.getElementById('results').classList.add('show');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
function deleteHistory(i, e) {
  e.stopPropagation();
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  stored.splice(i, 1);
  localStorage.setItem('history', JSON.stringify(stored));
  renderHistory();
}
function clearHistory() {
  localStorage.removeItem('history');
  renderHistory();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PHRASEBOOK DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PHRASES = {
  daily:[
    {en:'Good morning! How did you sleep?',ru:'Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾! ĞšĞ°Ğº Ğ²Ñ‹ ÑĞ¿Ğ°Ğ»Ğ¸?'},
    {en:'Have a great day!',ru:'Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞµĞ³Ğ¾ Ğ´Ğ½Ñ!'},
    {en:'What are your plans for today?',ru:'ĞšĞ°ĞºĞ¸Ğµ Ñƒ Ğ²Ğ°Ñ Ğ¿Ğ»Ğ°Ğ½Ñ‹ Ğ½Ğ° ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ?'},
    {en:'I am going to work now.',ru:'Ğ¯ Ğ¸Ğ´Ñƒ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ.'},
    {en:'What would you like for breakfast?',ru:'Ğ§Ñ‚Ğ¾ Ğ²Ñ‹ Ñ…Ğ¾Ñ‚Ğ¸Ñ‚Ğµ Ğ½Ğ° Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°Ğº?'},
    {en:'The weather is beautiful today.',ru:'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ¿Ñ€ĞµĞºÑ€Ğ°ÑĞ½Ğ°Ñ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°.'},
    {en:'I need to do some shopping.',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ ÑÑ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ·Ğ° Ğ¿Ğ¾ĞºÑƒĞ¿ĞºĞ°Ğ¼Ğ¸.'},
    {en:'What time is dinner ready?',ru:'ĞšĞ¾Ğ³Ğ´Ğ° Ğ±ÑƒĞ´ĞµÑ‚ Ğ³Ğ¾Ñ‚Ğ¾Ğ² ÑƒĞ¶Ğ¸Ğ½?'},
    {en:'I am feeling a bit tired today.',ru:'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ Ğ½ĞµĞ¼Ğ½Ğ¾Ğ³Ğ¾ ÑƒÑÑ‚Ğ°Ğ»(Ğ°).'},
    {en:'Let me know if you need anything.',ru:'Ğ”Ğ°Ğ¹Ñ‚Ğµ Ğ·Ğ½Ğ°Ñ‚ÑŒ, ĞµÑĞ»Ğ¸ Ñ‡Ñ‚Ğ¾-Ñ‚Ğ¾ Ğ½ÑƒĞ¶Ğ½Ğ¾.'},
    {en:'Did you sleep well last night?',ru:'Ğ¥Ğ¾Ñ€Ğ¾ÑˆĞ¾ Ğ»Ğ¸ Ğ²Ñ‹ ÑĞ¿Ğ°Ğ»Ğ¸ Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğ¹ Ğ½Ğ¾Ñ‡ÑŒÑ?'},
    {en:'I will be home by seven.',ru:'Ğ¯ Ğ±ÑƒĞ´Ñƒ Ğ´Ğ¾Ğ¼Ğ° Ğº ÑĞµĞ¼Ğ¸ Ñ‡Ğ°ÑĞ°Ğ¼.'},
    {en:'Can you help me with this?',ru:'ĞœĞ¾Ğ¶ĞµÑ‚Ğµ Ğ¼Ğ½Ğµ Ñ ÑÑ‚Ğ¸Ğ¼ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‡ÑŒ?'},
    {en:'I am going for a walk.',ru:'Ğ¯ Ğ¸Ğ´Ñƒ Ğ½Ğ° Ğ¿Ñ€Ğ¾Ğ³ÑƒĞ»ĞºÑƒ.'},
    {en:'What is for dinner tonight?',ru:'Ğ§Ñ‚Ğ¾ ÑĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ½Ğ° ÑƒĞ¶Ğ¸Ğ½?'},
    {en:'See you later!',ru:'Ğ”Ğ¾ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ¸!'},
    {en:'Take care of yourself.',ru:'Ğ‘ĞµÑ€ĞµĞ³Ğ¸ ÑĞµĞ±Ñ.'},
    {en:'I need a coffee.',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ ĞºĞ¾Ñ„Ğµ.'},
    {en:'How was your day?',ru:'ĞšĞ°Ğº Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ» Ğ²Ğ°Ñˆ Ğ´ĞµĞ½ÑŒ?'},
    {en:'I am on my way.',ru:'Ğ¯ ÑƒĞ¶Ğµ ĞµĞ´Ñƒ / Ğ¸Ğ´Ñƒ.'},
  ],
  business:[
    {en:'Good morning',ru:'Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾'},{en:'Please send me the contract',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¼Ğ½Ğµ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€'},
    {en:'I would like to schedule a meeting',ru:'Ğ¯ Ñ…Ğ¾Ñ‚ĞµĞ»(Ğ°) Ğ±Ñ‹ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ'},{en:'Thank you for your time',ru:'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° ÑƒĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ'},
    {en:'Can we discuss the terms?',ru:'ĞœĞ¾Ğ¶ĞµĞ¼ Ğ»Ğ¸ Ğ¼Ñ‹ Ğ¾Ğ±ÑÑƒĞ´Ğ¸Ñ‚ÑŒ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ?'},{en:'I look forward to working with you',ru:'Ğ¯ Ñ Ğ½ĞµÑ‚ĞµÑ€Ğ¿ĞµĞ½Ğ¸ĞµĞ¼ Ğ¶Ğ´Ñƒ ÑĞ¾Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ Ğ²Ğ°Ğ¼Ğ¸'},
    {en:'Please confirm receipt',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ'},{en:'The invoice is attached',ru:'Ğ¡Ñ‡Ñ‘Ñ‚-Ñ„Ğ°ĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ'},
    {en:'I will get back to you shortly',ru:'Ğ¯ ÑĞ²ÑĞ¶ÑƒÑÑŒ Ñ Ğ²Ğ°Ğ¼Ğ¸ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ'},{en:'Best regards',ru:'Ğ¡ ÑƒĞ²Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼'},
  ],
  travel:[
    {en:'Where is the nearest metro?',ru:'Ğ“Ğ´Ğµ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ Ğ¼ĞµÑ‚Ñ€Ğ¾?'},{en:'How much does this cost?',ru:'Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚?'},
    {en:'I need a taxi please',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ‚Ğ°ĞºÑĞ¸, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'Is breakfast included?',ru:'Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°Ğº Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½?'},
    {en:'Where is the bathroom?',ru:'Ğ“Ğ´Ğµ Ñ‚ÑƒĞ°Ğ»ĞµÑ‚?'},{en:'I have a reservation',ru:'Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ'},
    {en:'Can you speak slowly please?',ru:'Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğµ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½ĞµĞµ, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'I am lost',ru:'Ğ¯ Ğ·Ğ°Ğ±Ğ»ÑƒĞ´Ğ¸Ğ»ÑÑ / Ğ·Ğ°Ğ±Ğ»ÑƒĞ´Ğ¸Ğ»Ğ°ÑÑŒ'},
    {en:'Two tickets please',ru:'Ğ”Ğ²Ğ° Ğ±Ğ¸Ğ»ĞµÑ‚Ğ°, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'What time does it open?',ru:'Ğ’Ğ¾ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ?'},
  ],
  romance:[
    {en:'I love you',ru:'Ğ¯ Ñ‚ĞµĞ±Ñ Ğ»ÑĞ±Ğ»Ñ'},{en:'You are beautiful',ru:'Ğ¢Ñ‹ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ / ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹'},
    {en:'I miss you',ru:'Ğ¯ ÑĞºÑƒÑ‡Ğ°Ñ Ğ¿Ğ¾ Ñ‚ĞµĞ±Ğµ'},{en:'Will you marry me?',ru:'Ğ¢Ñ‹ Ğ²Ñ‹Ğ¹Ğ´ĞµÑˆÑŒ Ğ·Ğ° Ğ¼ĞµĞ½Ñ Ğ·Ğ°Ğ¼ÑƒĞ¶?'},
    {en:'You mean everything to me',ru:'Ğ¢Ñ‹ Ğ·Ğ½Ğ°Ñ‡Ğ¸ÑˆÑŒ Ğ´Ğ»Ñ Ğ¼ĞµĞ½Ñ Ğ²ÑÑ‘'},{en:'I am thinking about you',ru:'Ğ¯ Ğ´ÑƒĞ¼Ğ°Ñ Ğ¾ Ñ‚ĞµĞ±Ğµ'},
    {en:'Let\'s go on a date',ru:'Ğ”Ğ°Ğ²Ğ°Ğ¹ ÑÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ° ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ'},{en:'You make me happy',ru:'Ğ¢Ñ‹ Ğ´ĞµĞ»Ğ°ĞµÑˆÑŒ Ğ¼ĞµĞ½Ñ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¼'},
    {en:'I have feelings for you',ru:'Ğ¢Ñ‹ Ğ¼Ğ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸ÑˆÑŒÑÑ'},{en:'Kiss me',ru:'ĞŸĞ¾Ñ†ĞµĞ»ÑƒĞ¹ Ğ¼ĞµĞ½Ñ'},
  ],
  medical:[
    {en:'I need a doctor',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ Ğ²Ñ€Ğ°Ñ‡'},{en:'Call an ambulance',ru:'Ğ’Ñ‹Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ ÑĞºĞ¾Ñ€ÑƒÑ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ'},
    {en:'I am allergic to penicillin',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ°Ğ»Ğ»ĞµÑ€Ğ³Ğ¸Ñ Ğ½Ğ° Ğ¿ĞµĞ½Ğ¸Ñ†Ğ¸Ğ»Ğ»Ğ¸Ğ½'},{en:'Where is the pharmacy?',ru:'Ğ“Ğ´Ğµ Ğ°Ğ¿Ñ‚ĞµĞºĞ°?'},
    {en:'I have a headache',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ğ»Ğ¸Ñ‚ Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ°'},{en:'I feel sick',ru:'ĞœĞ½Ğµ Ğ¿Ğ»Ğ¾Ñ…Ğ¾'},
    {en:'I need my medication',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ¾Ñ‘ Ğ»ĞµĞºĞ°Ñ€ÑÑ‚Ğ²Ğ¾'},{en:'I am diabetic',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ´Ğ¸Ğ°Ğ±ĞµÑ‚'},
    {en:'I have chest pain',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ğ»ÑŒ Ğ² Ğ³Ñ€ÑƒĞ´Ğ¸'},{en:'I cannot breathe well',ru:'ĞœĞ½Ğµ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ Ğ´Ñ‹ÑˆĞ°Ñ‚ÑŒ'},
  ],
  emergency:[
    {en:'Help!',ru:'ĞŸĞ¾Ğ¼Ğ¾Ğ³Ğ¸Ñ‚Ğµ!'},{en:'Call the police!',ru:'Ğ’Ñ‹Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ¸Ñ†Ğ¸Ñ!'},
    {en:'Fire!',ru:'ĞŸĞ¾Ğ¶Ğ°Ñ€!'},{en:'I have been robbed',ru:'ĞœĞµĞ½Ñ Ğ¾Ğ³Ñ€Ğ°Ğ±Ğ¸Ğ»Ğ¸'},
    {en:'I am in danger',ru:'Ğ¯ Ğ² Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸'},{en:'Please call the embassy',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ñ‚Ğµ Ğ² Ğ¿Ğ¾ÑĞ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¾'},
    {en:'I need urgent help',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ'},{en:'There has been an accident',ru:'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ°Ğ²Ğ°Ñ€Ğ¸Ñ'},
    {en:'Someone is unconscious',ru:'ĞšÑ‚Ğ¾-Ñ‚Ğ¾ Ğ±ĞµĞ· ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ'},{en:'I am lost and scared',ru:'Ğ¯ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ»ÑÑ Ğ¸ Ğ¼Ğ½Ğµ ÑÑ‚Ñ€Ğ°ÑˆĞ½Ğ¾'},
  ],
};
function copyPhrase(text, e) {
  e.stopPropagation();
  navigator.clipboard.writeText(text).catch(() => {
    const ta = Object.assign(document.createElement('textarea'),{value:text});
    document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
  });
  showToast('ğŸ“‹ Copied: ' + text);
}
function renderPhrasebook(tab) {
  const data = PHRASES[tab] || [];
  const html = `<div class="phrase-grid">${data.map(p=>`
    <div class="phrase-card" onclick="loadPhrase('${p.en.replace(/'/g,"\\'")}')">
      <div class="phrase-en">${p.en}</div>
      <div class="phrase-ru">${p.ru}</div>
      <div class="phrase-tr">${transliterate(p.ru)}</div>
      <div class="phrase-card-footer">
        <button class="phrase-copy-btn" onclick="copyPhrase('${p.ru.replace(/'/g,"\\'")}',event)" title="Copy Russian">ğŸ“‹ Copy RU</button>
        <button class="phrase-copy-btn" onclick="copyPhrase('${p.en.replace(/'/g,"\\'")}',event)" title="Copy English" style="margin-left:4px">ğŸ“‹ Copy EN</button>
      </div>
    </div>`).join('')}</div>`;
  document.getElementById('phraseContent').innerHTML = html;
}
function switchTab(tab, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderPhrasebook(tab);
}
function loadPhrase(en) {
  if (direction !== 'en-ru') { direction = 'en-ru'; syncPills(); updateUI(); }
  document.getElementById('inputText').value = en;
  onInput();
  doTranslate();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VERB CONJUGATOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doConjugate() {
  const raw = document.getElementById('verbInput').value.trim();
  if (!raw) { showToast('âœï¸ Enter a verb first'); return; }
  document.getElementById('conjugateLoading').style.display = 'block';
  document.getElementById('conjugateResult').style.display  = 'none';
  try {
    let enVerb = raw;
    if (/[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(raw)) {
      enVerb = await fetchGoogle(raw, 'ru', 'en');
    }
    enVerb = enVerb.toLowerCase().replace(/^to\s+/, '').trim();

    const pronouns = {
      present: [
        {ru:'Ğ¯',   en:`I ${enVerb} every day`},
        {ru:'Ğ¢Ñ‹',  en:`you ${enVerb} every day`},
        {ru:'ĞĞ½',  en:`he ${enVerb}s every day`},
        {ru:'ĞĞ½Ğ°', en:`she ${enVerb}s every day`},
        {ru:'ĞœÑ‹',  en:`we ${enVerb} every day`},
        {ru:'Ğ’Ñ‹',  en:`you all ${enVerb} every day`},
        {ru:'ĞĞ½Ğ¸', en:`they ${enVerb} every day`},
      ],
      past: [
        {ru:'ĞĞ½',  en:`he used to ${enVerb}`},
        {ru:'ĞĞ½Ğ°', en:`she used to ${enVerb}`},
        {ru:'ĞĞ½Ğ¸', en:`they used to ${enVerb}`},
      ],
      future: [
        {ru:'Ğ¯',   en:`I will ${enVerb}`},
        {ru:'Ğ¢Ñ‹',  en:`you will ${enVerb}`},
        {ru:'ĞĞ½',  en:`he will ${enVerb}`},
        {ru:'ĞĞ½Ğ°', en:`she will ${enVerb}`},
        {ru:'ĞœÑ‹',  en:`we will ${enVerb}`},
        {ru:'Ğ’Ñ‹',  en:`you all will ${enVerb}`},
        {ru:'ĞĞ½Ğ¸', en:`they will ${enVerb}`},
      ],
    };

    async function conjugateSentence(sentence, pronoun) {
      const full = await fetchGoogle(sentence, 'en', 'ru');
      let form = full.replace(/[.!?]$/, '').trim();
      const preLower = pronoun.toLowerCase() + ' ';
      if (form.toLowerCase().startsWith(preLower)) form = form.slice(preLower.length);
      form = form.replace(/\s+ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ\.?$/i, '').trim();
      return form.charAt(0).toUpperCase() + form.slice(1);
    }

    const results = {};
    for (const [tense, rows] of Object.entries(pronouns)) {
      results[tense] = [];
      for (const row of rows) {
        const form = await conjugateSentence(row.en, row.ru);
        results[tense].push({ pronoun: row.ru, form });
        await delay(80);
      }
    }
    document.getElementById('conjugateLoading').style.display = 'none';
    document.getElementById('conjugateResult').style.display  = 'block';
    document.getElementById('conjugateResult').innerHTML = renderConjugation(enVerb, results);
  } catch(err) {
    document.getElementById('conjugateLoading').style.display = 'none';
    document.getElementById('conjugateResult').style.display  = 'block';
    document.getElementById('conjugateResult').innerHTML = `<p style="color:#ef4444;font-size:.88rem">âŒ Error: ${err.message}</p>`;
  }
}
function renderConjugation(verb, results) {
  const tenseLabels = { present:'ğŸ• Present', past:'ğŸ“… Past', future:'ğŸ”® Future' };
  let html = `<div style="font-size:.78rem;color:var(--muted);margin-bottom:10px">Conjugations for: <strong style="color:var(--primary)">${verb}</strong></div>`;
  for (const [tense, rows] of Object.entries(results)) {
    html += `<div style="margin-bottom:12px">
      <div style="font-size:.72rem;text-transform:uppercase;letter-spacing:1px;color:var(--faint);font-weight:700;margin-bottom:6px">${tenseLabels[tense]}</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:6px">`;
    for (const {pronoun, form} of rows) {
      html += `<div style="background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:7px 10px">
        <span style="font-size:.72rem;color:var(--faint)">${pronoun}</span>
        <div style="font-size:.92rem;color:var(--primary);font-weight:700;margin-top:1px">${form}</div>
      </div>`;
    }
    html += `</div></div>`;
  }
  return html;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CASE EXPLAINER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doDecline() {
  const raw = document.getElementById('caseInput').value.trim();
  if (!raw) { showToast('âœï¸ Enter a word first'); return; }
  document.getElementById('caseLoading').style.display = 'block';
  document.getElementById('caseResult').style.display  = 'none';
  try {
    let enWord = raw, ruWord = raw;
    if (/[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(raw)) {
      enWord = await fetchGoogle(raw, 'ru', 'en');
      ruWord = raw;
    } else {
      ruWord = await fetchGoogle(raw, 'en', 'ru');
    }
    enWord = enWord.toLowerCase().trim();

    const CASES = [
      { name:'Nominative',   ru:'Ğ˜Ğ¼ĞµĞ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',  q:'ĞšÑ‚Ğ¾? Ğ§Ñ‚Ğ¾?',    en:`This is ${enWord}`,          usage:'Subject of the sentence' },
      { name:'Genitive',     ru:'Ğ Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',   q:'ĞšĞ¾Ğ³Ğ¾? Ğ§ĞµĞ³Ğ¾?',  en:`without ${enWord}`,           usage:'Possession, absence, negation' },
      { name:'Dative',       ru:'Ğ”Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',     q:'ĞšĞ¾Ğ¼Ñƒ? Ğ§ĞµĞ¼Ñƒ?',  en:`give to ${enWord}`,           usage:'Indirect object â€” to/for whom' },
      { name:'Accusative',   ru:'Ğ’Ğ¸Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',   q:'ĞšĞ¾Ğ³Ğ¾? Ğ§Ñ‚Ğ¾?',   en:`I see ${enWord}`,             usage:'Direct object of action' },
      { name:'Instrumental', ru:'Ğ¢Ğ²Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',  q:'ĞšĞµĞ¼? Ğ§ĞµĞ¼?',   en:`with ${enWord}`,              usage:'By means of, together with' },
      { name:'Prepositional',ru:'ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹',    q:'Ğ ĞºĞ¾Ğ¼? Ğ Ñ‡Ñ‘Ğ¼?',en:`thinking about ${enWord}`,   usage:'Location, topic of speech' },
    ];

    const caseResults = [];
    for (const c of CASES) {
      const translated = await fetchGoogle(c.en, 'en', 'ru');
      const words = translated.replace(/[.!?]/g,'').trim().split(/\s+/);
      const form = words[words.length - 1];
      caseResults.push({ ...c, form });
      await delay(80);
    }
    document.getElementById('caseLoading').style.display = 'none';
    document.getElementById('caseResult').style.display  = 'block';
    document.getElementById('caseResult').innerHTML = renderCases(enWord, ruWord, caseResults);
  } catch(err) {
    document.getElementById('caseLoading').style.display = 'none';
    document.getElementById('caseResult').style.display  = 'block';
    document.getElementById('caseResult').innerHTML = `<p style="color:#ef4444;font-size:.88rem">âŒ Error: ${err.message}</p>`;
  }
}
function renderCases(enWord, ruWord, cases) {
  let html = `<div style="font-size:.78rem;color:var(--muted);margin-bottom:10px">Cases for: <strong style="color:var(--primary)">${enWord}</strong> / <strong style="color:var(--primary)">${ruWord}</strong></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px">`;
  for (const c of cases) {
    html += `<div style="background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:9px 11px">
      <div style="font-size:.7rem;color:var(--faint);font-weight:700;text-transform:uppercase;letter-spacing:.8px">${c.name}</div>
      <div style="font-size:.71rem;color:var(--muted);margin-top:1px">${c.ru} Â· ${c.q}</div>
      <div style="font-size:1.05rem;color:var(--primary);font-weight:700;margin:4px 0">${c.form}</div>
      <div style="font-size:.71rem;color:var(--faint)">${c.usage}</div>
    </div>`;
  }
  html += `</div>`;
  return html;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLIP CARD â€” DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const FC_VOCAB = {
  A1:[
    {en:'water',ru:'Ğ²Ğ¾Ğ´Ğ°',t:'food'},{en:'bread',ru:'Ñ…Ğ»ĞµĞ±',t:'food'},{en:'milk',ru:'Ğ¼Ğ¾Ğ»Ğ¾ĞºĞ¾',t:'food'},
    {en:'coffee',ru:'ĞºĞ¾Ñ„Ğµ',t:'food'},{en:'tea',ru:'Ñ‡Ğ°Ğ¹',t:'food'},{en:'apple',ru:'ÑĞ±Ğ»Ğ¾ĞºĞ¾',t:'food'},
    {en:'house',ru:'Ğ´Ğ¾Ğ¼',t:'home'},{en:'room',ru:'ĞºĞ¾Ğ¼Ğ½Ğ°Ñ‚Ğ°',t:'home'},{en:'table',ru:'ÑÑ‚Ğ¾Ğ»',t:'home'},
    {en:'chair',ru:'ÑÑ‚ÑƒĞ»',t:'home'},{en:'dog',ru:'ÑĞ¾Ğ±Ğ°ĞºĞ°',t:'animals'},{en:'cat',ru:'ĞºĞ¾ÑˆĞºĞ°',t:'animals'},
    {en:'book',ru:'ĞºĞ½Ğ¸Ğ³Ğ°',t:'school'},{en:'pen',ru:'Ñ€ÑƒÑ‡ĞºĞ°',t:'school'},{en:'school',ru:'ÑˆĞºĞ¾Ğ»Ğ°',t:'school'},
    {en:'teacher',ru:'ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒ',t:'school'},{en:'family',ru:'ÑĞµĞ¼ÑŒÑ',t:'family'},{en:'mother',ru:'Ğ¼Ğ°Ğ¼Ğ°',t:'family'},
    {en:'father',ru:'Ğ¿Ğ°Ğ¿Ğ°',t:'family'},{en:'brother',ru:'Ğ±Ñ€Ğ°Ñ‚',t:'family'},{en:'sister',ru:'ÑĞµÑÑ‚Ñ€Ğ°',t:'family'},
    {en:'city',ru:'Ğ³Ğ¾Ñ€Ğ¾Ğ´',t:'travel'},{en:'street',ru:'ÑƒĞ»Ğ¸Ñ†Ğ°',t:'travel'},{en:'shop',ru:'Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½',t:'travel'},
    {en:'to eat',ru:'ĞµÑÑ‚ÑŒ',t:'verbs'},{en:'to drink',ru:'Ğ¿Ğ¸Ñ‚ÑŒ',t:'verbs'},{en:'to go',ru:'Ğ¸Ğ´Ñ‚Ğ¸ / Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ',t:'verbs'},
    {en:'to work',ru:'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to sleep',ru:'ÑĞ¿Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to read',ru:'Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ',t:'verbs'},
  ],
  A2:[
    {en:'weather',ru:'Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°',t:'nature'},{en:'sun',ru:'ÑĞ¾Ğ»Ğ½Ñ†Ğµ',t:'nature'},{en:'rain',ru:'Ğ´Ğ¾Ğ¶Ğ´ÑŒ',t:'nature'},
    {en:'snow',ru:'ÑĞ½ĞµĞ³',t:'nature'},{en:'morning',ru:'ÑƒÑ‚Ñ€Ğ¾',t:'time'},{en:'evening',ru:'Ğ²ĞµÑ‡ĞµÑ€',t:'time'},
    {en:'yesterday',ru:'Ğ²Ñ‡ĞµÑ€Ğ°',t:'time'},{en:'tomorrow',ru:'Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°',t:'time'},{en:'meeting',ru:'Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ°',t:'work'},
    {en:'office',ru:'Ğ¾Ñ„Ğ¸Ñ',t:'work'},{en:'computer',ru:'ĞºĞ¾Ğ¼Ğ¿ÑŒÑÑ‚ĞµÑ€',t:'work'},{en:'phone',ru:'Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½',t:'work'},
    {en:'restaurant',ru:'Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½',t:'travel'},{en:'hotel',ru:'Ğ³Ğ¾ÑÑ‚Ğ¸Ğ½Ğ¸Ñ†Ğ°',t:'travel'},{en:'ticket',ru:'Ğ±Ğ¸Ğ»ĞµÑ‚',t:'travel'},
    {en:'airport',ru:'Ğ°ÑÑ€Ğ¾Ğ¿Ğ¾Ñ€Ñ‚',t:'travel'},{en:'trip',ru:'Ğ¿Ğ¾ĞµĞ·Ğ´ĞºĞ°',t:'travel'},{en:'to arrive',ru:'Ğ¿Ñ€Ğ¸ĞµĞ·Ğ¶Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'to forget',ru:'Ğ·Ğ°Ğ±Ñ‹Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to buy',ru:'Ğ¿Ğ¾ĞºÑƒĞ¿Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to think',ru:'Ğ´ÑƒĞ¼Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'interesting',ru:'Ğ¸Ğ½Ñ‚ĞµÑ€ĞµÑĞ½Ñ‹Ğ¹',t:'adjectives'},{en:'beautiful',ru:'ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹',t:'adjectives'},
    {en:'difficult',ru:'Ñ‚Ñ€ÑƒĞ´Ğ½Ñ‹Ğ¹',t:'adjectives'},{en:'expensive',ru:'Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹',t:'adjectives'},
    {en:'to understand',ru:'Ğ¿Ğ¾Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to remember',ru:'Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚ÑŒ',t:'verbs'},
    {en:'to sell',ru:'Ğ¿Ñ€Ğ¾Ğ´Ğ°Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'easy',ru:'Ğ»Ñ‘Ğ³ĞºĞ¸Ğ¹',t:'adjectives'},{en:'cheap',ru:'Ğ´ĞµÑˆÑ‘Ğ²Ñ‹Ğ¹',t:'adjectives'},
    {en:'neighbour',ru:'ÑĞ¾ÑĞµĞ´',t:'home'},
  ],
  B1:[
    {en:'experience',ru:'Ğ¾Ğ¿Ñ‹Ñ‚',t:'work'},{en:'opportunity',ru:'Ğ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ÑÑ‚ÑŒ',t:'work'},
    {en:'challenge',ru:'Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ÑÑ‚ÑŒ',t:'work'},{en:'relationship',ru:'Ğ¾Ñ‚Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ñ',t:'social'},
    {en:'environment',ru:'Ğ¾ĞºÑ€ÑƒĞ¶Ğ°ÑÑ‰Ğ°Ñ ÑÑ€ĞµĞ´Ğ°',t:'nature'},{en:'opinion',ru:'Ğ¼Ğ½ĞµĞ½Ğ¸Ğµ',t:'communication'},
    {en:'discussion',ru:'Ğ¾Ğ±ÑÑƒĞ¶Ğ´ĞµĞ½Ğ¸Ğµ',t:'communication'},{en:'advice',ru:'ÑĞ¾Ğ²ĞµÑ‚',t:'communication'},
    {en:'decision',ru:'Ñ€ĞµÑˆĞµĞ½Ğ¸Ğµ',t:'work'},{en:'achievement',ru:'Ğ´Ğ¾ÑÑ‚Ğ¸Ğ¶ĞµĞ½Ğ¸Ğµ',t:'work'},
    {en:'to realise',ru:'Ğ¾ÑĞ¾Ğ·Ğ½Ğ°Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to explain',ru:'Ğ¾Ğ±ÑŠÑÑĞ½ÑÑ‚ÑŒ',t:'verbs'},
    {en:'to develop',ru:'Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to improve',ru:'ÑƒĞ»ÑƒÑ‡ÑˆĞ°Ñ‚ÑŒ',t:'verbs'},
    {en:'to agree',ru:'ÑĞ¾Ğ³Ğ»Ğ°ÑˆĞ°Ñ‚ÑŒÑÑ',t:'verbs'},{en:'to suggest',ru:'Ğ¿Ñ€ĞµĞ´Ğ»Ğ°Ğ³Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'responsible',ru:'Ğ¾Ñ‚Ğ²ĞµÑ‚ÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹',t:'adjectives'},{en:'successful',ru:'ÑƒÑĞ¿ĞµÑˆĞ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'confident',ru:'ÑƒĞ²ĞµÑ€ĞµĞ½Ğ½Ñ‹Ğ¹',t:'adjectives'},{en:'patient',ru:'Ñ‚ĞµÑ€Ğ¿ĞµĞ»Ğ¸Ğ²Ñ‹Ğ¹',t:'adjectives'},
    {en:'in spite of',ru:'Ğ½ĞµÑĞ¼Ğ¾Ñ‚Ñ€Ñ Ğ½Ğ°',t:'phrases'},{en:'furthermore',ru:'ĞºÑ€Ğ¾Ğ¼Ğµ Ñ‚Ğ¾Ğ³Ğ¾',t:'phrases'},
    {en:'as a result',ru:'Ğ² Ñ€ĞµĞ·ÑƒĞ»ÑŒÑ‚Ğ°Ñ‚Ğµ',t:'phrases'},{en:'on the other hand',ru:'Ñ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹',t:'phrases'},
    {en:'culture',ru:'ĞºÑƒĞ»ÑŒÑ‚ÑƒÑ€Ğ°',t:'social'},{en:'tradition',ru:'Ñ‚Ñ€Ğ°Ğ´Ğ¸Ñ†Ğ¸Ñ',t:'social'},
    {en:'generation',ru:'Ğ¿Ğ¾ĞºĞ¾Ğ»ĞµĞ½Ğ¸Ğµ',t:'social'},{en:'neighbourhood',ru:'Ñ€Ğ°Ğ¹Ğ¾Ğ½',t:'travel'},
    {en:'to depend on',ru:'Ğ·Ğ°Ğ²Ğ¸ÑĞµÑ‚ÑŒ Ğ¾Ñ‚',t:'verbs'},{en:'nevertheless',ru:'Ñ‚ĞµĞ¼ Ğ½Ğµ Ğ¼ĞµĞ½ĞµĞµ',t:'phrases'},
  ],
  B2:[
    {en:'consequence',ru:'Ğ¿Ğ¾ÑĞ»ĞµĞ´ÑÑ‚Ğ²Ğ¸Ğµ',t:'abstract'},{en:'perspective',ru:'Ñ‚Ğ¾Ñ‡ĞºĞ° Ğ·Ñ€ĞµĞ½Ğ¸Ñ',t:'abstract'},
    {en:'fundamental',ru:'Ñ„ÑƒĞ½Ğ´Ğ°Ğ¼ĞµĞ½Ñ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',t:'adjectives'},{en:'sophisticated',ru:'ÑƒÑ‚Ğ¾Ğ½Ñ‡Ñ‘Ğ½Ğ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'controversial',ru:'ÑĞ¿Ğ¾Ñ€Ğ½Ñ‹Ğ¹',t:'adjectives'},{en:'ambiguous',ru:'Ğ´Ğ²ÑƒÑĞ¼Ñ‹ÑĞ»ĞµĞ½Ğ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'significant',ru:'Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',t:'adjectives'},{en:'substantial',ru:'ÑÑƒÑ‰ĞµÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'to demonstrate',ru:'Ğ´ĞµĞ¼Ğ¾Ğ½ÑÑ‚Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to facilitate',ru:'ÑĞ¿Ğ¾ÑĞ¾Ğ±ÑÑ‚Ğ²Ğ¾Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'to emphasise',ru:'Ğ¿Ğ¾Ğ´Ñ‡Ñ‘Ñ€ĞºĞ¸Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'to acknowledge',ru:'Ğ¿Ñ€Ğ¸Ğ·Ğ½Ğ°Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'to anticipate',ru:'Ğ¿Ñ€ĞµĞ´Ğ²Ğ¸Ğ´ĞµÑ‚ÑŒ',t:'verbs'},{en:'to implement',ru:'Ñ€ĞµĞ°Ğ»Ğ¸Ğ·Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'to assess',ru:'Ğ¾Ñ†ĞµĞ½Ğ¸Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'regardless of',ru:'Ğ²Ğ½Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ Ğ¾Ñ‚',t:'phrases'},
    {en:'consequently',ru:'ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ğ¾',t:'phrases'},{en:'to mitigate',ru:'ÑĞ¼ÑĞ³Ñ‡Ğ°Ñ‚ÑŒ',t:'verbs'},
    {en:'paradigm',ru:'Ğ¿Ğ°Ñ€Ğ°Ğ´Ğ¸Ğ³Ğ¼Ğ°',t:'abstract'},{en:'coherent',ru:'Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'pragmatic',ru:'Ğ¿Ñ€Ğ°Ğ³Ğ¼Ğ°Ñ‚Ğ¸Ñ‡Ğ½Ñ‹Ğ¹',t:'adjectives'},{en:'resilience',ru:'ÑÑ‚Ğ¾Ğ¹ĞºĞ¾ÑÑ‚ÑŒ',t:'abstract'},
    {en:'discrepancy',ru:'Ñ€Ğ°ÑÑ…Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ğµ',t:'abstract'},{en:'innovative',ru:'Ğ¸Ğ½Ğ½Ğ¾Ğ²Ğ°Ñ†Ğ¸Ğ¾Ğ½Ğ½Ñ‹Ğ¹',t:'adjectives'},
    {en:'to substantiate',ru:'Ğ¾Ğ±Ğ¾ÑĞ½Ğ¾Ğ²Ñ‹Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'implication',ru:'Ğ¿Ğ¾Ğ´Ñ‚ĞµĞºÑÑ‚',t:'abstract'},
    {en:'albeit',ru:'Ñ…Ğ¾Ñ‚Ñ',t:'phrases'},{en:'notwithstanding',ru:'Ğ½ĞµÑĞ¼Ğ¾Ñ‚Ñ€Ñ Ğ½Ğ°',t:'phrases'},
    {en:'to evaluate',ru:'Ğ°Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ',t:'verbs'},{en:'comprehensive',ru:'Ğ²ÑĞµÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ğ½Ğ¸Ğ¹',t:'adjectives'},
  ],
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAP FILL â€” DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const GF_DATA = {
  verbs:[
    {rus:'Ğ¯ ___ ĞºĞ¾Ñ„Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾.',ans:'Ğ¿ÑŒÑ',ane:'drink',tip:'to drink',eng:'I ___ coffee every morning.'},
    {rus:'ĞĞ½Ğ° ___ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ°Ğ²Ñ‚Ğ¾Ğ±ÑƒÑĞ¾Ğ¼.',ans:'ĞµĞ´ĞµÑ‚',ane:'goes',tip:'to go (transport)',eng:'She ___ to work by bus.'},
    {rus:'ĞœÑ‹ ___ Ğ² ĞºĞ¸Ğ½Ğ¾ Ğ²Ñ‡ĞµÑ€Ğ°.',ans:'Ñ…Ğ¾Ğ´Ğ¸Ğ»Ğ¸',ane:'went',tip:'to go (past)',eng:'We ___ to the cinema yesterday.'},
    {rus:'ĞĞ½ ___ Ñ€ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº ÑƒĞ¶Ğµ Ğ´Ğ²Ğ° Ğ³Ğ¾Ğ´Ğ°.',ans:'Ğ¸Ğ·ÑƒÑ‡Ğ°ĞµÑ‚',ane:'has been learning',tip:'to study/learn',eng:'He ___ Russian for two years.'},
    {rus:'Ğ”ĞµÑ‚Ğ¸ ___ Ğ² Ğ¿Ğ°Ñ€ĞºĞµ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ.',ans:'Ğ¸Ğ³Ñ€Ğ°ÑÑ‚',ane:'play',tip:'to play',eng:'Children ___ in the park every day.'},
    {rus:'Ğ¯ ___ Ğ´Ğ¾Ğ¼Ğ¾Ğ¹ Ğ² ÑˆĞµÑÑ‚ÑŒ Ñ‡Ğ°ÑĞ¾Ğ².',ans:'Ğ¿Ñ€Ğ¸Ñ…Ğ¾Ğ¶Ñƒ',ane:'come',tip:'to come home',eng:'I ___ home at six o\'clock.'},
    {rus:'ĞĞ½Ğ° ___ Ğ¿Ğ¸ÑÑŒĞ¼Ğ¾ ÑĞ²Ğ¾ĞµĞ¹ Ğ¿Ğ¾Ğ´Ñ€ÑƒĞ³Ğµ.',ans:'Ğ¿Ğ¸ÑˆĞµÑ‚',ane:'writes',tip:'to write',eng:'She ___ a letter to her friend.'},
    {rus:'ĞœÑ‹ ___ ÑƒĞ¶Ğ¸Ğ½ Ğ²Ğ¼ĞµÑÑ‚Ğµ ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ²ĞµÑ‡ĞµÑ€.',ans:'Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ğ¼',ane:'cook',tip:'to cook',eng:'We ___ dinner together every evening.'},
    {rus:'ĞĞ½ ___ ĞºĞ½Ğ¸Ğ³Ñƒ ÑƒĞ¶Ğµ Ñ‚Ñ€Ğ¸ Ñ‡Ğ°ÑĞ°.',ans:'Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚',ane:'has been reading',tip:'to read',eng:'He ___ the book for three hours.'},
    {rus:'ĞĞ½Ğ¸ ___ Ğ² ĞœĞ¾ÑĞºĞ²Ñƒ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°.',ans:'Ğ»ĞµÑ‚ÑÑ‚',ane:'are flying',tip:'to fly',eng:'They ___ to Moscow tomorrow.'},
    {rus:'ĞœÑ‹ ___ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸ Ğ½Ğ° ÑƒÑ€Ğ¾ĞºĞµ.',ans:'Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¼',ane:'speak',tip:'to speak',eng:'We ___ Russian in class.'},
    {rus:'Ğ¯ ___ ĞºÑƒĞ¿Ğ¸Ñ‚ÑŒ Ğ½Ğ¾Ğ²Ñ‹Ğ¹ Ñ‚ĞµĞ»ĞµÑ„Ğ¾Ğ½.',ans:'Ñ…Ğ¾Ñ‡Ñƒ',ane:'want',tip:'to want',eng:'I ___ to buy a new phone.'},
    {rus:'ĞĞ½ ___ Ğ¾Ñ‚ĞºÑ€Ñ‹Ñ‚ĞºÑƒ ÑĞ²Ğ¾ĞµĞ¹ Ğ¼Ğ°Ğ¼Ğµ.',ans:'Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ğ»',ane:'sent',tip:'to send (past)',eng:'He ___ a card to his mother.'},
    {rus:'ĞĞ½Ğ° ___ Ğ½Ğ¾Ğ²Ğ¾Ğµ Ğ¿Ğ»Ğ°Ñ‚ÑŒĞµ Ğ½Ğ° Ğ²ĞµÑ‡ĞµÑ€Ğ¸Ğ½ĞºÑƒ.',ans:'Ğ½Ğ°Ğ´ĞµĞ»Ğ°',ane:'put on',tip:'to put on (past)',eng:'She ___ a new dress for the party.'},
    {rus:'Ğ¯ ___ Ğ·Ğ° Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ†ĞµĞ¹ Ñ‚Ñ€Ğ¸ Ğ³Ğ¾Ğ´Ğ°.',ans:'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»',ane:'worked',tip:'to work (past)',eng:'I ___ abroad for three years.'},
  ],
  vocabulary:[
    {rus:'ĞœĞ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ___.',ans:'ĞºĞ½Ğ¸Ğ³Ğ¸',ane:'books',tip:'books',eng:'I like reading ___.'},
    {rus:'ĞĞ° ÑÑ‚Ğ¾Ğ»Ğµ ÑÑ‚Ğ¾Ğ¸Ñ‚ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ ___.',ans:'Ğ²Ğ°Ğ·Ğ°',ane:'vase',tip:'vase',eng:'There is a beautiful ___ on the table.'},
    {rus:'Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ ___ ĞºĞ¾ÑˆĞºĞ°.',ans:'Ğ¿ÑƒÑˆĞ¸ÑÑ‚Ğ°Ñ',ane:'fluffy',tip:'fluffy (adj)',eng:'I have a ___ cat.'},
    {rus:'Ğ’ Ğ½Ğ°ÑˆĞµĞ¼ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğµ ĞµÑÑ‚ÑŒ Ğ±Ğ¾Ğ»ÑŒÑˆĞ¾Ğ¹ ___.',ans:'Ğ¿Ğ°Ñ€Ğº',ane:'park',tip:'park',eng:'There is a big ___ in our city.'},
    {rus:'ĞĞ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ___ Ğ² Ğ±Ğ¾Ğ»ÑŒĞ½Ğ¸Ñ†Ğµ.',ans:'Ğ²Ñ€Ğ°Ñ‡Ğ¾Ğ¼',ane:'doctor',tip:'doctor (instr.)',eng:'She works as a ___ in a hospital.'},
    {rus:'ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ Ğ»ĞµÑ‚Ğ¾ Ğ¼Ñ‹ ĞµĞ´ĞµĞ¼ Ğ½Ğ° ___.',ans:'Ğ¼Ğ¾Ñ€Ğµ',ane:'sea',tip:'sea',eng:'Every summer we go to the ___.'},
    {rus:'ĞĞ½ Ğ¶Ğ¸Ğ²Ñ‘Ñ‚ Ğ² Ğ¼Ğ°Ğ»ĞµĞ½ÑŒĞºĞ¾Ğ¹ ___.',ans:'ĞºĞ²Ğ°Ñ€Ñ‚Ğ¸Ñ€Ğµ',ane:'apartment',tip:'apartment (prep.)',eng:'He lives in a small ___.'},
    {rus:'ĞĞ° ÑƒÑ€Ğ¾Ğº Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿Ñ€Ğ¸Ğ½ĞµÑÑ‚Ğ¸ ___.',ans:'Ñ‚ĞµÑ‚Ñ€Ğ°Ğ´ÑŒ',ane:'notebook',tip:'notebook',eng:'You need to bring a ___ to class.'},
    {rus:'Ğ”ĞµÑ‚Ğ¸ Ğ»ÑĞ±ÑÑ‚ ĞµÑÑ‚ÑŒ ___ Ğ½Ğ° Ğ´ĞµÑĞµÑ€Ñ‚.',ans:'Ğ¼Ğ¾Ñ€Ğ¾Ğ¶ĞµĞ½Ğ¾Ğµ',ane:'ice cream',tip:'ice cream',eng:'Children love eating ___ for dessert.'},
    {rus:'ĞĞ½ ĞºÑƒĞ¿Ğ¸Ğ» ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ ___ Ğ½Ğ° Ğ´ĞµĞ½ÑŒ Ñ€Ğ¾Ğ¶Ğ´ĞµĞ½Ğ¸Ñ.',ans:'Ğ¿Ğ¾Ğ´Ğ°Ñ€Ğ¾Ğº',ane:'gift',tip:'gift',eng:'He bought a beautiful ___ for the birthday.'},
    {rus:'Ğ•Ñ‘ ___ â€” ÑĞ°Ğ¼Ñ‹Ğ¹ Ğ´Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞº.',ans:'Ğ´ĞµĞ´ÑƒÑˆĞºĞ°',ane:'grandfather',tip:'grandfather',eng:'Her ___ is the kindest person.'},
    {rus:'ĞœÑ‹ ĞºÑƒĞ¿Ğ¸Ğ»Ğ¸ Ğ½Ğ¾Ğ²ÑƒÑ ___ Ğ´Ğ»Ñ ĞºÑƒÑ…Ğ½Ğ¸.',ans:'Ğ¼ĞµĞ±ĞµĞ»ÑŒ',ane:'furniture',tip:'furniture',eng:'We bought new ___ for the kitchen.'},
    {rus:'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ¿Ğ»Ğ¾Ñ…Ğ°Ñ ___.',ans:'Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğ°',ane:'weather',tip:'weather',eng:'The ___ is very bad today.'},
    {rus:'ĞœĞ¾Ğ¹ ___ Ğ¶Ğ¸Ğ²Ñ‘Ñ‚ Ğ² Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¼ Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğµ.',ans:'Ğ´Ñ€ÑƒĞ³',ane:'friend',tip:'friend',eng:'My ___ lives in another city.'},
    {rus:'Ğ’ Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½Ğµ Ğ¼Ñ‹ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ»Ğ¸ Ğ²ĞºÑƒÑĞ½Ñ‹Ğ¹ ___.',ans:'ÑÑƒĞ¿',ane:'soup',tip:'soup',eng:'At the restaurant we ordered delicious ___.'},
  ],
  cases:[
    {rus:'Ğ¯ Ğ´ÑƒĞ¼Ğ°Ñ Ğ¾ ÑĞ²Ğ¾Ñ‘Ğ¼ ___.',ans:'Ğ´Ñ€ÑƒĞ³Ğµ',ane:'friend',tip:'Prep. case',eng:'I think about my ___.'},
    {rus:'ĞĞ½Ğ° Ğ¿Ğ¾ÑˆĞ»Ğ° Ğº ___.',ans:'Ğ²Ñ€Ğ°Ñ‡Ñƒ',ane:'doctor',tip:'Dat. case',eng:'She went to the ___.'},
    {rus:'ĞœÑ‹ Ğ¶Ğ¸Ğ²Ñ‘Ğ¼ Ğ±ĞµĞ· ___.',ans:'Ğ¼Ğ°ÑˆĞ¸Ğ½Ñ‹',ane:'car',tip:'Gen. case',eng:'We live without a ___.'},
    {rus:'ĞĞ½ Ğ¿Ğ¸ÑˆĞµÑ‚ Ğ¿Ğ¸ÑÑŒĞ¼Ğ¾ ÑĞ²Ğ¾ĞµĞ¹ ___.',ans:'ÑĞµÑÑ‚Ñ€Ğµ',ane:'sister',tip:'Dat. case',eng:'He writes a letter to his ___.'},
    {rus:'Ğ¯ Ğ²Ğ¸Ğ¶Ñƒ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹ ___.',ans:'Ğ¿Ğ°Ñ€Ğº',ane:'park',tip:'Acc. case',eng:'I see a beautiful ___.'},
    {rus:'ĞœÑ‹ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ğ¼ Ğ¾ Ğ¿Ğ¾Ğ³Ğ¾Ğ´Ğµ Ğ² ___.',ans:'ĞœĞ¾ÑĞºĞ²Ğµ',ane:'Moscow',tip:'Prep. case',eng:'We talk about the weather in ___.'},
    {rus:'Ğ”ĞµÑ‚Ğ¸ Ğ¸Ğ³Ñ€Ğ°ÑÑ‚ Ñ ___.',ans:'ÑĞ¾Ğ±Ğ°ĞºĞ¾Ğ¹',ane:'dog',tip:'Instr. case',eng:'The children play with the ___.'},
    {rus:'Ğ¯ Ğ¸Ğ´Ñƒ Ğº ___.',ans:'Ğ¼Ğ°Ğ¼Ğµ',ane:'mum',tip:'Dat. case',eng:'I am going to my ___.'},
    {rus:'Ğ‘ĞµĞ· ___ Ğ½ĞµĞ²Ğ¾Ğ·Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ğ¶Ğ¸Ñ‚ÑŒ.',ans:'Ğ²Ğ¾Ğ´Ñ‹',ane:'water',tip:'Gen. case',eng:'It is impossible to live without ___.'},
    {rus:'ĞĞ½ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°ĞµÑ‚ ___.',ans:'ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ĞµĞ¼',ane:'teacher',tip:'Instr. case',eng:'He works as a ___.'},
    {rus:'Ğ¯ Ğ¸Ğ´Ñƒ Ğ² ___.',ans:'Ğ¼Ğ°Ğ³Ğ°Ğ·Ğ¸Ğ½',ane:'shop',tip:'Acc. case',eng:'I am going to the ___.'},
    {rus:'ĞœÑ‹ Ğ¶Ğ¸Ğ²Ñ‘Ğ¼ Ğ² ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ¾Ğ¼ ___.',ans:'Ğ³Ğ¾Ñ€Ğ¾Ğ´Ğµ',ane:'city',tip:'Prep. case',eng:'We live in a beautiful ___.'},
    {rus:'ĞĞ½Ğ° Ñ€Ğ°Ğ´Ğ° ÑĞ²Ğ¾ĞµĞ¼Ñƒ ___.',ans:'ÑƒÑĞ¿ĞµÑ…Ñƒ',ane:'success',tip:'Dat. case',eng:'She is happy about her ___.'},
    {rus:'Ğ¯ Ğ³Ğ¾Ñ€Ğ¶ÑƒÑÑŒ ÑĞ²Ğ¾Ğ¸Ğ¼Ğ¸ ___.',ans:'Ğ´ĞµÑ‚ÑŒĞ¼Ğ¸',ane:'children',tip:'Instr. case',eng:'I am proud of my ___.'},
    {rus:'Ğ£ ___ ĞµÑÑ‚ÑŒ ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğµ Ğ³Ğ»Ğ°Ğ·Ğ°.',ans:'Ğ½ĞµÑ‘',ane:'her',tip:'Gen. after Ñƒ',eng:'___ has beautiful eyes.'},
  ],
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LISTENING â€” DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LISTEN_DATA = {
  A1:{
    short:{
      ru:'Ğ­Ñ‚Ğ¾ ĞĞ½Ğ½Ğ°. ĞĞ½Ğ° Ğ¶Ğ¸Ğ²Ñ‘Ñ‚ Ğ² ĞœĞ¾ÑĞºĞ²Ğµ. Ğ£ Ğ½ĞµÑ‘ ĞµÑÑ‚ÑŒ ĞºĞ¾ÑˆĞºĞ°. Ğ•Ñ‘ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞœÑƒÑ€ĞºĞ°. ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾ ĞĞ½Ğ½Ğ° Ğ¿ÑŒÑ‘Ñ‚ ĞºĞ¾Ñ„Ğµ Ğ¸ Ñ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ ĞºĞ½Ğ¸Ğ³Ñƒ. ĞĞ½Ğ° Ğ»ÑĞ±Ğ¸Ñ‚ Ğ³ÑƒĞ»ÑÑ‚ÑŒ Ğ² Ğ¿Ğ°Ñ€ĞºĞµ.',
      en:'This is Anna. She lives in Moscow. She has a cat. Its name is Murka. Every morning Anna drinks coffee and reads a book. She loves walking in the park.',
      qs:[{q:'Where does Anna live?',opts:['Moscow','London','Paris','Berlin'],c:0},
          {q:'What does Anna have?',opts:['A dog','A cat','A rabbit','A bird'],c:1},
          {q:'What does Anna love doing?',opts:['Swimming','Cooking','Walking in the park','Watching TV'],c:2}]},
    medium:{
      ru:'ĞŸÑ€Ğ¸Ğ²ĞµÑ‚! ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ Ğ”Ğ¼Ğ¸Ñ‚Ñ€Ğ¸Ğ¹. ĞœĞ½Ğµ 25 Ğ»ĞµÑ‚. Ğ¯ Ğ¶Ğ¸Ğ²Ñƒ Ğ² Ğ¡Ğ°Ğ½ĞºÑ‚-ĞŸĞµÑ‚ĞµÑ€Ğ±ÑƒÑ€Ğ³Ğµ. Ğ¯ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ Ğ¿Ñ€Ğ¾Ğ³Ñ€Ğ°Ğ¼Ğ¼Ğ¸ÑÑ‚Ğ¾Ğ¼. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ñ ĞµĞ·Ğ¶Ñƒ Ğ½Ğ° Ñ€Ğ°Ğ±Ğ¾Ñ‚Ñƒ Ğ½Ğ° Ğ¼ĞµÑ‚Ñ€Ğ¾. Ğ’ĞµÑ‡ĞµÑ€Ğ¾Ğ¼ Ñ Ğ·Ğ°Ğ½Ğ¸Ğ¼Ğ°ÑÑÑŒ ÑĞ¿Ğ¾Ñ€Ñ‚Ğ¾Ğ¼. Ğ’ Ğ²Ñ‹Ñ…Ğ¾Ğ´Ğ½Ñ‹Ğµ Ñ Ğ»ÑĞ±Ğ»Ñ Ñ…Ğ¾Ğ´Ğ¸Ñ‚ÑŒ Ğ² ĞºĞ¸Ğ½Ğ¾ Ğ¸Ğ»Ğ¸ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ğ°Ñ‚ÑŒÑÑ Ñ Ğ´Ñ€ÑƒĞ·ÑŒÑĞ¼Ğ¸.',
      en:'Hi! My name is Dmitry. I am 25 years old. I live in Saint Petersburg. I work as a programmer. Every day I go to work by metro. In the evening I do sport. At weekends I like going to the cinema or meeting friends.',
      qs:[{q:'How old is Dmitry?',opts:['20','25','30','35'],c:1},
          {q:'What is Dmitry\'s job?',opts:['Doctor','Teacher','Programmer','Driver'],c:2},
          {q:'How does Dmitry travel to work?',opts:['By car','By bus','By metro','On foot'],c:2},
          {q:'What does Dmitry do at weekends?',opts:['Works extra','Sleeps all day','Cinema or friends','Travels abroad'],c:2}]},
    long:{
      ru:'Ğ”Ğ¾Ğ±Ñ€Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ! ĞœĞµĞ½Ñ Ğ·Ğ¾Ğ²ÑƒÑ‚ ĞœĞ°Ñ€Ğ¸Ñ. ĞœĞ½Ğµ 32 Ğ³Ğ¾Ğ´Ğ°. Ğ¯ Ğ¶Ğ¸Ğ²Ñƒ Ğ½ĞµĞ´Ğ°Ğ»ĞµĞºĞ¾ Ğ¾Ñ‚ ĞœĞ¾ÑĞºĞ²Ñ‹. ĞŸĞ¾ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¸ Ñ ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ ÑĞ·Ñ‹ĞºĞ°. Ğ¯ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ Ğ² ÑˆĞºĞ¾Ğ»Ğµ ÑƒĞ¶Ğµ Ğ²Ğ¾ÑĞµĞ¼ÑŒ Ğ»ĞµÑ‚. ĞœĞ½Ğµ Ğ¾Ñ‡ĞµĞ½ÑŒ Ğ½Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑÑ Ğ¼Ğ¾Ñ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°. ĞšĞ°Ğ¶Ğ´Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾ Ñ Ğ²ÑÑ‚Ğ°Ñ Ğ² ÑĞµĞ¼ÑŒ Ñ‡Ğ°ÑĞ¾Ğ² Ğ¸ Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ»Ñ Ğ·Ğ°Ğ²Ñ‚Ñ€Ğ°Ğº Ğ´Ğ»Ñ ÑĞ²Ğ¾ĞµĞ¹ ÑĞµĞ¼ÑŒĞ¸. Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ Ğ¼ÑƒĞ¶ Ğ¸ Ğ´Ğ²Ğ¾Ğµ Ğ´ĞµÑ‚ĞµĞ¹ â€” ÑÑ‹Ğ½ Ğ¸ Ğ´Ğ¾Ñ‡ÑŒ. Ğ’ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ Ñ Ğ»ÑĞ±Ğ»Ñ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞºĞ½Ğ¸Ğ³Ğ¸ Ğ¸ Ğ·Ğ°Ğ½Ğ¸Ğ¼Ğ°Ñ‚ÑŒÑÑ Ğ¹Ğ¾Ğ³Ğ¾Ğ¹. Ğ›ĞµÑ‚Ğ¾Ğ¼ Ğ¼Ñ‹ Ğ²ÑĞµĞ¹ ÑĞµĞ¼ÑŒÑ‘Ğ¹ ĞµĞ´ĞµĞ¼ Ğ½Ğ° Ğ´Ğ°Ñ‡Ñƒ.',
      en:'Good afternoon! My name is Maria. I am 32 years old. I live near Moscow. My profession is English teacher. I have been working at a school for eight years. I really like my job. Every morning I wake up at seven and cook breakfast for my family. I have a husband and two children â€” a son and a daughter. In my free time I love reading and doing yoga. In summer our whole family goes to the dacha.',
      qs:[{q:'What is Maria\'s job?',opts:['Doctor','English teacher','Programmer','Chef'],c:1},
          {q:'How many years has Maria worked at school?',opts:['Three','Five','Eight','Ten'],c:2},
          {q:'What time does Maria wake up?',opts:['Six','Seven','Eight','Nine'],c:1},
          {q:'How many children does Maria have?',opts:['One','Two','Three','Four'],c:1},
          {q:'What does Maria do in summer?',opts:['Travels abroad','Goes to the dacha','Stays in the city','Visits friends'],c:1}]}
  },
  A2:{
    short:{
      ru:'Ğ’Ñ‡ĞµÑ€Ğ° Ñ Ñ…Ğ¾Ğ´Ğ¸Ğ» Ğ² Ñ€ĞµÑÑ‚Ğ¾Ñ€Ğ°Ğ½ Ñ ĞºĞ¾Ğ»Ğ»ĞµĞ³Ğ°Ğ¼Ğ¸. ĞœÑ‹ Ğ·Ğ°ĞºĞ°Ğ·Ğ°Ğ»Ğ¸ Ğ¼Ğ½Ğ¾Ğ³Ğ¾ Ğ²ĞºÑƒÑĞ½Ñ‹Ñ… Ğ±Ğ»ÑĞ´. Ğ¯ Ğ²Ğ·ÑĞ» ÑÑƒĞ¿ Ğ¸ ÑÑ‚ĞµĞ¹Ğº. ĞĞ° Ğ´ĞµÑĞµÑ€Ñ‚ Ğ¼Ñ‹ ĞµĞ»Ğ¸ ÑˆĞ¾ĞºĞ¾Ğ»Ğ°Ğ´Ğ½Ñ‹Ğ¹ Ñ‚Ğ¾Ñ€Ñ‚. Ğ¡Ñ‡Ñ‘Ñ‚ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ğ»Ğ¸ Ğ¿Ğ¾Ñ€Ğ¾Ğ²Ğ½Ñƒ. Ğ’ĞµÑ‡ĞµÑ€ Ğ¿Ñ€Ğ¾ÑˆÑ‘Ğ» Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ½Ğ¾!',
      en:'Yesterday I went to a restaurant with my colleagues. We ordered lots of delicious dishes. I had soup and steak. For dessert we ate chocolate cake. We split the bill equally. It was a great evening!',
      qs:[{q:'Who did the speaker go to the restaurant with?',opts:['Friends','Family','Colleagues','Neighbours'],c:2},
          {q:'What did the speaker have for dessert?',opts:['Ice cream','Fruit','Chocolate cake','Nothing'],c:2},
          {q:'How did they pay?',opts:['One person paid','Split equally','Boss paid','Did not pay'],c:1}]},
    medium:{
      ru:'ĞĞ° Ğ¿Ñ€Ğ¾ÑˆĞ»Ğ¾Ğ¹ Ğ½ĞµĞ´ĞµĞ»Ğµ Ñ Ğ½Ğ°Ñ‡Ğ°Ğ» Ğ¸Ğ·ÑƒÑ‡Ğ°Ñ‚ÑŒ Ñ€ÑƒÑÑĞºĞ¸Ğ¹ ÑĞ·Ñ‹Ğº. ĞšĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ñ Ğ·Ğ°Ğ½Ğ¸Ğ¼Ğ°ÑÑÑŒ Ğ¿Ğ¾ Ğ´Ğ²Ğ° Ñ‡Ğ°ÑĞ°. Ğ¡Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ° ÑÑ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ¾Ñ‡ĞµĞ½ÑŒ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾, Ğ¿Ğ¾Ñ‚Ğ¾Ğ¼Ñƒ Ñ‡Ñ‚Ğ¾ Ñ€ÑƒÑÑĞºĞ¸Ğ¹ Ğ°Ğ»Ñ„Ğ°Ğ²Ğ¸Ñ‚ ÑĞ¸Ğ»ÑŒĞ½Ğ¾ Ğ¾Ñ‚Ğ»Ğ¸Ñ‡Ğ°ĞµÑ‚ÑÑ Ğ¾Ñ‚ Ğ»Ğ°Ñ‚Ğ¸Ğ½ÑĞºĞ¾Ğ³Ğ¾. ĞĞ¾ Ñ‚ĞµĞ¿ĞµÑ€ÑŒ Ñ ÑƒĞ¶Ğµ Ğ¼Ğ¾Ğ³Ñƒ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ğ¿Ñ€Ğ¾ÑÑ‚Ñ‹Ğµ ÑĞ»Ğ¾Ğ²Ğ°. ĞœĞ¾Ğ¹ ÑƒÑ‡Ğ¸Ñ‚ĞµĞ»ÑŒ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚, Ñ‡Ñ‚Ğ¾ Ñƒ Ğ¼ĞµĞ½Ñ Ñ…Ğ¾Ñ€Ğ¾ÑˆĞµĞµ Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ. ĞœĞ¾Ñ Ñ†ĞµĞ»ÑŒ â€” Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾-Ñ€ÑƒÑÑĞºĞ¸ ÑĞ²Ğ¾Ğ±Ğ¾Ğ´Ğ½Ğ¾ Ñ‡ĞµÑ€ĞµĞ· Ğ³Ğ¾Ğ´.',
      en:'Last week I started learning Russian. Every day I study for two hours. At first it was very difficult because the Russian alphabet is so different from the Latin one. But now I can already read simple words. My teacher says I have good pronunciation. My goal is to speak Russian fluently in a year.',
      qs:[{q:'How long does the speaker study each day?',opts:['One hour','Two hours','Three hours','Four hours'],c:1},
          {q:'What was difficult at first?',opts:['Grammar','The alphabet','Pronunciation','Writing'],c:1},
          {q:'What does the teacher say?',opts:['Study more','Good pronunciation','Too slow','Wrong method'],c:1},
          {q:'What is the speaker\'s goal?',opts:['Visit Russia','Teach Russian','Speak fluently in a year','Read literature'],c:2}]},
    long:{
      ru:'Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ñ Ñ…Ğ¾Ñ‡Ñƒ Ñ€Ğ°ÑÑĞºĞ°Ğ·Ğ°Ñ‚ÑŒ Ğ¾ Ğ¿Ğ¾ĞµĞ·Ğ´ĞºĞµ Ğ² Ğ¡Ğ°Ğ½ĞºÑ‚-ĞŸĞµÑ‚ĞµÑ€Ğ±ÑƒÑ€Ğ³. Ğ¯ Ğ¿Ğ¾ĞµÑ…Ğ°Ğ» Ñ‚ÑƒĞ´Ğ° Ñ Ğ¶ĞµĞ½Ğ¾Ğ¹. ĞœÑ‹ Ğ¿Ñ€Ğ¾Ğ²ĞµĞ»Ğ¸ Ñ‚Ğ°Ğ¼ Ñ‡ĞµÑ‚Ñ‹Ñ€Ğµ Ğ´Ğ½Ñ. Ğ’ Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¼Ñ‹ Ñ…Ğ¾Ğ´Ğ¸Ğ»Ğ¸ Ğ² Ğ­Ñ€Ğ¼Ğ¸Ñ‚Ğ°Ğ¶ â€” Ğ¾Ğ´Ğ¸Ğ½ Ğ¸Ğ· ÑĞ°Ğ¼Ñ‹Ñ… Ğ·Ğ½Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚Ñ‹Ñ… Ğ¼ÑƒĞ·ĞµĞµĞ² Ğ¼Ğ¸Ñ€Ğ°. Ğ’Ğ¾ Ğ²Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¼Ñ‹ Ğ³ÑƒĞ»ÑĞ»Ğ¸ Ğ¿Ğ¾ ĞĞµĞ²ÑĞºĞ¾Ğ¼Ñƒ Ğ¿Ñ€Ğ¾ÑĞ¿ĞµĞºÑ‚Ñƒ. ĞĞ° Ñ‚Ñ€ĞµÑ‚Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¼Ñ‹ Ğ¿Ğ¾ĞµÑ…Ğ°Ğ»Ğ¸ Ğ² ĞŸĞµÑ‚ĞµÑ€Ğ³Ğ¾Ñ„ â€” Ñ‚Ğ°Ğ¼ ÑƒĞ´Ğ¸Ğ²Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Ñ„Ğ¾Ğ½Ñ‚Ğ°Ğ½Ñ‹. Ğ’ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ Ğ¼Ñ‹ ĞºÑƒĞ¿Ğ¸Ğ»Ğ¸ ÑÑƒĞ²ĞµĞ½Ğ¸Ñ€Ñ‹ Ğ¸ Ğ¿Ğ¾ĞµÑ…Ğ°Ğ»Ğ¸ Ğ´Ğ¾Ğ¼Ğ¾Ğ¹. Ğ­Ñ‚Ğ¾ Ğ±Ñ‹Ğ»Ğ¾ Ğ½ĞµĞ·Ğ°Ğ±Ñ‹Ğ²Ğ°ĞµĞ¼Ğ¾Ğµ Ğ¿ÑƒÑ‚ĞµÑˆĞµÑÑ‚Ğ²Ğ¸Ğµ!',
      en:'Today I want to tell you about my trip to Saint Petersburg. I went there with my wife. We spent four days there. On the first day we visited the Hermitage â€” one of the most famous museums in the world. On the second day we walked along Nevsky Prospect. On the third day we went to Peterhof â€” there are amazing fountains there. On the last day we bought souvenirs and went home. It was an unforgettable trip!',
      qs:[{q:'How many days did they spend in Saint Petersburg?',opts:['Three','Four','Five','A week'],c:1},
          {q:'What did they do on the first day?',opts:['Walk Nevsky','Visit the Hermitage','Go to Peterhof','Shop for souvenirs'],c:1},
          {q:'What is special about Peterhof?',opts:['Paintings','Fountains','Palace rooms','Market'],c:1},
          {q:'What did they do last?',opts:['Museum visit','Boat trip','Bought souvenirs and went home','Had a party'],c:2}]}
  },
  B1:{
    short:{
      ru:'Ğ’ Ğ¿Ğ¾ÑĞ»ĞµĞ´Ğ½Ğ¸Ğµ Ğ³Ğ¾Ğ´Ñ‹ Ğ²ÑÑ‘ Ğ±Ğ¾Ğ»ÑŒÑˆĞµ Ğ»ÑĞ´ĞµĞ¹ Ğ¿Ñ€ĞµĞ´Ğ¿Ğ¾Ñ‡Ğ¸Ñ‚Ğ°ÑÑ‚ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ ÑƒĞ´Ğ°Ğ»Ñ‘Ğ½Ğ½Ğ¾. Ğ­Ñ‚Ğ¾ Ğ¸Ğ¼ĞµĞµÑ‚ Ğ¿Ğ»ÑÑÑ‹ Ğ¸ Ğ¼Ğ¸Ğ½ÑƒÑÑ‹. Ğ¡ Ğ¾Ğ´Ğ½Ğ¾Ğ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹, ÑĞºĞ¾Ğ½Ğ¾Ğ¼Ğ¸Ñ‚ÑÑ Ğ²Ñ€ĞµĞ¼Ñ Ğ½Ğ° Ğ´Ğ¾Ñ€Ğ¾Ğ³Ñƒ Ğ¸ Ğ¼Ğ¾Ğ¶Ğ½Ğ¾ Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ñ‚ÑŒ Ğ¸Ğ· Ğ»ÑĞ±Ğ¾Ğ¹ Ñ‚Ğ¾Ñ‡ĞºĞ¸ Ğ¼Ğ¸Ñ€Ğ°. Ğ¡ Ğ´Ñ€ÑƒĞ³Ğ¾Ğ¹ ÑÑ‚Ğ¾Ñ€Ğ¾Ğ½Ñ‹, Ğ´Ğ¾Ğ¼Ğ° Ğ±Ñ‹Ğ²Ğ°ĞµÑ‚ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ ÑĞ¾ÑÑ€ĞµĞ´Ğ¾Ñ‚Ğ¾Ñ‡Ğ¸Ñ‚ÑŒÑÑ.',
      en:'In recent years more and more people prefer to work remotely. This has advantages and disadvantages. On one hand, it saves commute time and you can work from anywhere in the world. On the other hand, it can be hard to concentrate at home.',
      qs:[{q:'What is the topic?',opts:['New technology','Remote work','Office culture','Transport'],c:1},
          {q:'What is an advantage?',opts:['Better pay','Saving commute time','More colleagues','Bigger office'],c:1},
          {q:'What is a disadvantage?',opts:['Longer hours','Lower pay','Difficulty concentrating','Bad internet'],c:2}]},
    medium:{
      ru:'Ğ˜ÑÑĞ»ĞµĞ´Ğ¾Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚, Ñ‡Ñ‚Ğ¾ Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ ĞºĞ½Ğ¸Ğ³ Ğ¿Ğ¾Ğ»ĞµĞ·Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒÑ. Ğ’Ğ¾-Ğ¿ĞµÑ€Ğ²Ñ‹Ñ…, Ğ¾Ğ½Ğ¾ ÑĞ½Ğ¸Ğ¶Ğ°ĞµÑ‚ ÑƒÑ€Ğ¾Ğ²ĞµĞ½ÑŒ ÑÑ‚Ñ€ĞµÑÑĞ° â€” ÑƒĞ¶Ğµ ÑˆĞµÑÑ‚ÑŒ Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ñ‡Ñ‚ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°ÑÑ‚ Ñ€Ğ°ÑÑĞ»Ğ°Ğ±Ğ¸Ñ‚ÑŒÑÑ. Ğ’Ğ¾-Ğ²Ñ‚Ğ¾Ñ€Ñ‹Ñ…, Ñ‡Ñ‚ĞµĞ½Ğ¸Ğµ ÑƒĞ»ÑƒÑ‡ÑˆĞ°ĞµÑ‚ Ğ¿Ğ°Ğ¼ÑÑ‚ÑŒ Ğ¸ ĞºĞ¾Ğ½Ñ†ĞµĞ½Ñ‚Ñ€Ğ°Ñ†Ğ¸Ñ. Ğ’-Ñ‚Ñ€ĞµÑ‚ÑŒĞ¸Ñ…, ĞºĞ½Ğ¸Ğ³Ğ¸ Ñ€Ğ°ÑÑˆĞ¸Ñ€ÑÑÑ‚ ÑĞ»Ğ¾Ğ²Ğ°Ñ€Ğ½Ñ‹Ğ¹ Ğ·Ğ°Ğ¿Ğ°Ñ. Ğ­ĞºÑĞ¿ĞµÑ€Ñ‚Ñ‹ Ñ€ĞµĞºĞ¾Ğ¼ĞµĞ½Ğ´ÑƒÑÑ‚ Ñ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ Ñ…Ğ¾Ñ‚Ñ Ğ±Ñ‹ Ñ‚Ñ€Ğ¸Ğ´Ñ†Ğ°Ñ‚ÑŒ Ğ¼Ğ¸Ğ½ÑƒÑ‚ Ğ² Ğ´ĞµĞ½ÑŒ. ĞŸÑ€Ğ¸Ñ‡Ñ‘Ğ¼ Ğ½ĞµĞ²Ğ°Ğ¶Ğ½Ğ¾ â€” Ğ½Ğ° Ğ±ÑƒĞ¼Ğ°Ğ³Ğµ Ğ¸Ğ»Ğ¸ Ñ ÑĞºÑ€Ğ°Ğ½Ğ°.',
      en:'Research shows that reading books is beneficial for health. Firstly, it reduces stress â€” just six minutes of reading helps you relax. Secondly, reading improves memory and concentration. Thirdly, books expand vocabulary. Experts recommend reading at least thirty minutes a day. It does not matter whether you read on paper or on a screen.',
      qs:[{q:'How many minutes of reading reduces stress?',opts:['Three','Six','Ten','Twenty'],c:1},
          {q:'How long should you read daily?',opts:['Ten minutes','Twenty minutes','Thirty minutes','An hour'],c:2},
          {q:'Does paper vs screen matter?',opts:['Yes, paper is better','Yes, screen is better','No, it doesn\'t matter','Text doesn\'t say'],c:2},
          {q:'What is NOT mentioned as a benefit?',opts:['Reduces stress','Improves memory','Expands vocabulary','Improves fitness'],c:3}]},
    long:{
      ru:'Ğ˜ÑĞºÑƒÑÑÑ‚Ğ²ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚ ÑÑ‚Ñ€ĞµĞ¼Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ğ¾ Ğ¼ĞµĞ½ÑĞµÑ‚ Ğ½Ğ°ÑˆÑƒ Ğ¶Ğ¸Ğ·Ğ½ÑŒ. Ğ¡ĞµĞ³Ğ¾Ğ´Ğ½Ñ Ğ¾Ğ½ Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² Ğ¼ĞµĞ´Ğ¸Ñ†Ğ¸Ğ½Ğµ Ğ´Ğ»Ñ Ğ´Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ¸, Ğ² Ğ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ¿ĞµÑ€ÑĞ¾Ğ½Ğ°Ğ»Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸ Ğ¾Ğ±ÑƒÑ‡ĞµĞ½Ğ¸Ñ, Ğ² Ñ‚Ñ€Ğ°Ğ½ÑĞ¿Ğ¾Ñ€Ñ‚Ğµ Ğ´Ğ»Ñ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ½Ğ¾Ğ¼Ğ½Ñ‹Ñ… Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ¾Ğ±Ğ¸Ğ»ĞµĞ¹. ĞœĞ½Ğ¾Ğ³Ğ¸Ğµ ÑĞºÑĞ¿ĞµÑ€Ñ‚Ñ‹ ÑÑ‡Ğ¸Ñ‚Ğ°ÑÑ‚, Ñ‡Ñ‚Ğ¾ Ğ˜Ğ˜ Ğ·Ğ°Ğ¼ĞµĞ½Ğ¸Ñ‚ Ñ‡Ğ°ÑÑ‚ÑŒ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¹. ĞŸĞ¾Ğ´ ÑƒĞ³Ñ€Ğ¾Ğ·Ğ¾Ğ¹ â€” Ñ€ÑƒÑ‚Ğ¸Ğ½Ğ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¸. ĞĞ´Ğ½Ğ°ĞºĞ¾ Ñ‚Ğ²Ğ¾Ñ€Ñ‡ĞµÑĞºĞ¸Ğµ Ğ¸ ÑĞ¾Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¿Ñ€Ğ¾Ñ„ĞµÑÑĞ¸Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ½ÑƒÑ‚ÑÑ Ğ·Ğ° Ñ‡ĞµĞ»Ğ¾Ğ²ĞµĞºĞ¾Ğ¼. Ğ’Ğ°Ğ¶Ğ½Ğ¾ Ñ€Ğ°Ğ·Ğ²Ğ¸Ğ²Ğ°Ñ‚ÑŒ Ğ½Ğ°Ğ²Ñ‹ĞºĞ¸, ĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ğµ ÑĞ»Ğ¾Ğ¶Ğ½Ğ¾ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ: ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¼Ñ‹ÑˆĞ»ĞµĞ½Ğ¸Ğµ Ğ¸ ÑĞ¼Ğ¾Ñ†Ğ¸Ğ¾Ğ½Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸Ğ½Ñ‚ĞµĞ»Ğ»ĞµĞºÑ‚.',
      en:'Artificial intelligence is rapidly changing our lives. Today it is used in medicine for diagnostics, in education for personalising learning, and in transport for autonomous vehicles. Many experts believe AI will replace some professions. Routine professions are most at risk. However, creative and social professions will remain human. It is important to develop skills that are hard to automate: critical thinking and emotional intelligence.',
      qs:[{q:'Where is AI used for diagnostics?',opts:['Education','Medicine','Transport','Finance'],c:1},
          {q:'Which professions are most at risk?',opts:['Creative','Social','Routine data-processing','Technical'],c:2},
          {q:'What should people develop?',opts:['Coding','Critical thinking and emotional intelligence','Data skills','Foreign languages'],c:1},
          {q:'What is the author\'s tone?',opts:['Very negative','Completely positive','Balanced','Indifferent'],c:2}]}
  },
};

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FLIP CARD â€” STATE & LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let fcState = {level:'A1',count:5,topic:'',deck:[],idx:0,score:0,flipped:false};
function setFcPill(grp, val, btn) {
  btn.closest('.flex').querySelectorAll('.t-pill').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  fcState[grp] = val;
}
function shuffleArr(a) { return a.slice().sort(()=>Math.random()-.5); }
function startFlipQuiz() {
  const topic = document.getElementById('fcTopic').value.trim().toLowerCase();
  let pool = (FC_VOCAB[fcState.level]||FC_VOCAB.A1).filter(w=>!topic||w.t.includes(topic)||w.en.includes(topic)||w.ru.includes(topic));
  if (!pool.length) pool = FC_VOCAB[fcState.level]||FC_VOCAB.A1;
  fcState.deck = shuffleArr(pool).slice(0,Math.min(fcState.count,pool.length));
  fcState.idx = 0; fcState.score = 0;
  document.getElementById('fcSetup').style.display='none';
  document.getElementById('fcEnd').style.display='none';
  document.getElementById('fcQuiz').style.display='block';
  renderFcCard();
}
function renderFcCard() {
  const card = fcState.deck[fcState.idx];
  const isEnRu = direction==='en-ru';
  document.getElementById('fcCurr').textContent = fcState.idx+1;
  document.getElementById('fcTot').textContent  = fcState.deck.length;
  document.getElementById('fcScr').textContent  = fcState.score;
  const pct = (fcState.idx/fcState.deck.length)*100;
  document.getElementById('fcBar').style.width  = pct+'%';
  document.getElementById('fcFrontLbl').textContent = isEnRu ? 'English' : 'Russian';
  document.getElementById('fcFrontTxt').textContent = isEnRu ? card.en : card.ru;
  document.getElementById('fcBackLbl').textContent  = isEnRu ? 'Russian' : 'English';
  document.getElementById('fcBackTxt').textContent  = isEnRu ? card.ru : card.en;
  document.getElementById('fcOptsLbl').textContent  = isEnRu ? 'Select the correct Russian translation:' : 'Select the correct English translation:';
  // Reset card state
  fcState.flipped = false;
  const inner = document.getElementById('fcInner');
  inner.classList.remove('flipped','fc-wrong-shake');
  // Build options
  const correct = isEnRu ? card.ru : card.en;
  const pool = (FC_VOCAB[fcState.level]||FC_VOCAB.A1).filter(w=>w!==card);
  const wrongs = shuffleArr(pool).slice(0,3).map(w=>isEnRu?w.ru:w.en);
  const opts = shuffleArr([correct,...wrongs]);
  const grid = document.getElementById('fcOptGrid');
  grid.innerHTML = '';
  opts.forEach(opt => {
    const b = document.createElement('button');
    b.className='opt-btn'; b.textContent=opt;
    b.onclick=()=>selectFcAnswer(b,opt,correct);
    grid.appendChild(b);
  });
  document.getElementById('fcFb').style.display='none';
  document.getElementById('fcOpts').style.display='block';
}
function selectFcAnswer(btn, chosen, correct) {
  document.querySelectorAll('#fcOptGrid .opt-btn').forEach(b=>b.disabled=true);
  const inner = document.getElementById('fcInner');
  const fb = document.getElementById('fcFb');
  inner.classList.add('flipped'); fcState.flipped=true;
  if (chosen===correct) {
    fcState.score++;
    btn.classList.add('correct');
    fb.style.display='block'; fb.style.background='var(--green-bg)'; fb.style.color='var(--green)';
    fb.textContent='âœ“ Correct! Well done!';
  } else {
    btn.classList.add('wrong');
    document.querySelectorAll('#fcOptGrid .opt-btn').forEach(b=>{if(b.textContent===correct)b.classList.add('correct');});
    inner.classList.add('fc-wrong-shake');
    fb.style.display='block'; fb.style.background='rgba(239,68,68,.08)'; fb.style.color='#ef4444';
    fb.textContent='âœ— The correct answer was: '+correct;
  }
  document.getElementById('fcScr').textContent=fcState.score;
  setTimeout(()=>{ fcState.idx++; if(fcState.idx<fcState.deck.length) renderFcCard(); else endFlipQuiz(); },1600);
}
function endFlipQuiz() {
  document.getElementById('fcQuiz').style.display='none';
  document.getElementById('fcEnd').style.display='block';
  const n=fcState.deck.length, s=fcState.score, pct=Math.round(s/n*100);
  document.getElementById('fcBar').style.width='100%';
  document.getElementById('fcEndEmoji').textContent = pct>=80?'ğŸ†':pct>=60?'ğŸ‰':pct>=40?'ğŸ“š':'ğŸ’ª';
  document.getElementById('fcEndTitle').textContent = `${s} / ${n} correct â€” ${pct}%`;
  document.getElementById('fcEndSub').textContent = pct>=80?'Excellent! You really know your vocabulary!':pct>=60?'Good job! Keep practising.':pct>=40?'Nice effort. Review and try again!':'Keep going â€” practice makes perfect!';
}
function resetFcSetup() {
  document.getElementById('fcEnd').style.display='none';
  document.getElementById('fcQuiz').style.display='none';
  document.getElementById('fcSetup').style.display='block';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GAP FILL â€” STATE & LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let gfState = {level:'A1',theme:'verbs',count:5,mode:'mc',sentences:[]};
function setGfPill(grp,val,btn) {
  btn.closest('.flex').querySelectorAll('.t-pill').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  gfState[grp]=val;
}
function generateGapFill() {
  const pool = GF_DATA[gfState.theme]||GF_DATA.verbs;
  const isEnRu = direction==='en-ru';
  gfState.sentences = shuffleArr(pool).slice(0,Math.min(gfState.count,pool.length));
  document.getElementById('gfSetup').style.display='none';
  document.getElementById('gfExercise').style.display='block';
  document.getElementById('gfScore').style.display='none';
  document.getElementById('gfCheckBtn').style.display='block';
  const list = document.getElementById('gfQList');
  list.innerHTML='';
  gfState.sentences.forEach((s,i)=>{
    const sentence = isEnRu ? s.rus : s.eng;
    const answer   = isEnRu ? s.ans : s.ane;
    const allAnswers = gfState.sentences.map(x=>isEnRu?x.ans:x.ane);
    const wrongs = shuffleArr(allAnswers.filter(a=>a!==answer)).slice(0,3);
    const opts = shuffleArr([answer,...wrongs]);
    const div = document.createElement('div');
    div.style='background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:12px 14px';
    div.innerHTML=`<div style="font-size:.7rem;color:var(--faint);font-weight:700;margin-bottom:6px;text-transform:uppercase;letter-spacing:.8px">${i+1}. ${s.tip}</div>
      <div style="font-size:.95rem;color:var(--text);line-height:1.7;margin-bottom:${gfState.mode==='mc'?'8px':'0'}">${sentence.replace('___',gfState.mode==='fill'?`<input class="gap-input" id="gf_${i}" type="text" placeholder="â€¦" />`:`<strong style="color:var(--primary)">[___]</strong>`)}</div>
      ${gfState.mode==='mc'?`<div class="grid grid-cols-2 gap-1.5 mt-2">${opts.map(o=>`<button class="opt-btn" data-gfi="${i}" data-ans="${answer}" onclick="selectGfAnswer(this)">${o}</button>`).join('')}</div>`:''}`;
    list.appendChild(div);
  });
}
function selectGfAnswer(btn) {
  const i = btn.dataset.gfi, correct = btn.dataset.ans;
  btn.closest('.grid').querySelectorAll('.opt-btn').forEach(b=>{
    b.disabled=true;
    if(b.textContent===correct) b.classList.add('correct');
  });
  if(btn.textContent!==correct) btn.classList.add('wrong');
}
function checkGapFill() {
  const isEnRu = direction==='en-ru';
  let score=0;
  gfState.sentences.forEach((s,i)=>{
    const ans = isEnRu?s.ans:s.ane;
    if(gfState.mode==='fill') {
      const inp = document.getElementById('gf_'+i);
      if(!inp) return;
      const val = inp.value.trim().toLowerCase();
      if(val===ans.toLowerCase()||ans.toLowerCase().split('/').map(x=>x.trim()).includes(val)){
        inp.classList.add('correct'); score++;
      } else { inp.classList.add('wrong'); inp.value+=' â†’ '+ans; }
    } else {
      const corrBtn = document.querySelector(`button[data-gfi="${i}"][data-ans="${ans}"]`);
      if(corrBtn&&corrBtn.classList.contains('correct')) score++;
    }
  });
  const n=gfState.sentences.length;
  const el=document.getElementById('gfScore');
  el.style.display='block';
  const pct=Math.round(score/n*100);
  el.style.background=pct>=80?'var(--green-bg)':pct>=50?'var(--primary-bg)':'rgba(239,68,68,.08)';
  el.style.color=pct>=80?'var(--green)':pct>=50?'var(--primary)':'#ef4444';
  el.textContent=`${score} / ${n} correct â€” ${pct}%  ${pct>=80?'ğŸ†':pct>=50?'ğŸ“š':'ğŸ’ª'}`;
  document.getElementById('gfCheckBtn').style.display='none';
}
function resetGfSetup() {
  document.getElementById('gfExercise').style.display='none';
  document.getElementById('gfSetup').style.display='block';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LISTENING â€” STATE & LOGIC
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let lsState = {level:'A1',length:'short',utt:null,playing:false};
function setLsPill(grp,val,btn) {
  btn.closest('.flex').querySelectorAll('.t-pill').forEach(b=>b.classList.remove('on'));
  btn.classList.add('on');
  lsState[grp]=val;
}
function generateListening() {
  const data=(LISTEN_DATA[lsState.level]||LISTEN_DATA.A1)[lsState.length];
  if(!data){showToast('No passage found for this combination.');return;}
  const isEnRu=direction==='en-ru';
  const text=isEnRu?data.ru:data.en;
  window.speechSynthesis&&window.speechSynthesis.cancel();
  lsState.playing=false;
  document.getElementById('lsSetup').style.display='none';
  document.getElementById('lsPlayer').style.display='block';
  document.getElementById('lsScore').style.display='none';
  document.getElementById('lsText').style.display='none';
  document.getElementById('lsText').textContent=text;
  document.getElementById('lsTitle').textContent=`Level ${lsState.level} â€” ${lsState.length.charAt(0).toUpperCase()+lsState.length.slice(1)} passage`;
  document.getElementById('lsSubtitle').textContent=isEnRu?'Russian listening':'English listening';
  document.getElementById('lsPlayBtn').textContent='â–¶';
  // Build questions
  const qList=document.getElementById('lsQList');
  qList.innerHTML='';
  data.qs.forEach((q,i)=>{
    const div=document.createElement('div');
    div.style='background:var(--bg);border:1px solid var(--border);border-radius:12px;padding:12px 14px';
    div.innerHTML=`<div style="font-size:.88rem;font-weight:700;color:var(--text);margin-bottom:8px">${i+1}. ${q.q}</div>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-1.5">${q.opts.map((o,j)=>`<button class="opt-btn" data-lsq="${i}" data-correct="${q.c}" data-idx="${j}" onclick="selectLsAnswer(this)">${o}</button>`).join('')}</div>`;
    qList.appendChild(div);
  });
  // Auto-play
  setTimeout(()=>startListen(text,isEnRu?'ru-RU':'en-US'),400);
}
function startListen(text,lang) {
  if(!window.speechSynthesis){showToast('ğŸ”‡ TTS not available in this browser');return;}
  window.speechSynthesis.cancel();
  const u=new SpeechSynthesisUtterance(text);
  u.lang=lang; u.rate=0.88;
  u.onstart=()=>{lsState.playing=true;document.getElementById('lsPlayBtn').textContent='â¸';document.getElementById('lsPlayBtn').classList.add('ls-playing');};
  u.onend=u.onerror=()=>{lsState.playing=false;document.getElementById('lsPlayBtn').textContent='â–¶';document.getElementById('lsPlayBtn').classList.remove('ls-playing');};
  lsState.utt=u;
  window.speechSynthesis.speak(u);
}
function toggleListen() {
  if(!window.speechSynthesis){showToast('ğŸ”‡ TTS not available');return;}
  const isEnRu=direction==='en-ru';
  const data=(LISTEN_DATA[lsState.level]||LISTEN_DATA.A1)[lsState.length];
  const text=isEnRu?data.ru:data.en;
  const lang=isEnRu?'ru-RU':'en-US';
  if(lsState.playing){window.speechSynthesis.cancel();lsState.playing=false;document.getElementById('lsPlayBtn').textContent='â–¶';document.getElementById('lsPlayBtn').classList.remove('ls-playing');}
  else{startListen(text,lang);}
}
function toggleLsText() {
  const el=document.getElementById('lsText');
  el.style.display=el.style.display==='none'?'block':'none';
}
function selectLsAnswer(btn) {
  const qIdx=btn.dataset.lsq;
  btn.closest('.grid').querySelectorAll('.opt-btn').forEach(b=>{
    b.disabled=true;
    if(parseInt(b.dataset.idx)===parseInt(b.dataset.correct)) b.classList.add('correct');
  });
  if(parseInt(btn.dataset.idx)!==parseInt(btn.dataset.correct)) btn.classList.add('wrong');
}
function checkListening() {
  const data=(LISTEN_DATA[lsState.level]||LISTEN_DATA.A1)[lsState.length];
  let score=0;
  data.qs.forEach((q,i)=>{
    const corrBtn=document.querySelector(`button[data-lsq="${i}"].correct`);
    if(corrBtn) score++;
  });
  const n=data.qs.length, pct=Math.round(score/n*100);
  const el=document.getElementById('lsScore');
  el.style.display='block';
  el.style.background=pct>=80?'var(--green-bg)':pct>=50?'var(--primary-bg)':'rgba(239,68,68,.08)';
  el.style.color=pct>=80?'var(--green)':pct>=50?'var(--primary)':'#ef4444';
  el.textContent=`${score} / ${n} correct â€” ${pct}%  ${pct>=80?'ğŸ†':pct>=50?'ğŸ“š':'ğŸ’ª'}`;
}
function resetLsSetup() {
  window.speechSynthesis&&window.speechSynthesis.cancel();
  lsState.playing=false;
  document.getElementById('lsPlayer').style.display='none';
  document.getElementById('lsSetup').style.display='block';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FAQ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleFaq(btn) {
  const ans = btn.nextElementSibling, isOpen = btn.classList.contains('open');
  document.querySelectorAll('.faq-q.open').forEach(b => { b.classList.remove('open'); b.nextElementSibling.classList.remove('open'); });
  if (!isOpen) { btn.classList.add('open'); ans.classList.add('open'); }
}
function toggleFaqSection() {
  const items = document.getElementById('faqItems');
  const icon  = document.getElementById('faqToggleIcon');
  const isOpen = items.style.display !== 'none';
  items.style.display = isOpen ? 'none' : 'block';
  icon.textContent = isOpen ? 'ï¼‹' : 'ï¼';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   KEYBOARD SHORTCUTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('inputText').addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); doTranslate(); }
});
document.addEventListener('keydown', e => {
  if (e.ctrlKey && e.key === 'Enter') doTranslate();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   URL SHARE RESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function checkUrlHash() {
  if (!location.hash) return;
  try {
    const { input, direction: d } = JSON.parse(decodeURIComponent(atob(location.hash.slice(1))));
    if (d !== direction) { direction = d; syncPills(); updateUI(); }
    document.getElementById('inputText').value = input;
    onInput();
    doTranslate();
  } catch {}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EASTER EGG â€” Ğ”Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ° ğŸ˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const EE_TRIGGERS = new Set(['di','dii','Ğ´Ğ¸','Ğ´Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ°']);
function checkEasterEgg(input) {
  if (EE_TRIGGERS.has(input.trim().toLowerCase())) { showEasterEgg(); }
}
function showEasterEgg() {
  const el = document.getElementById('easterEgg');
  el.style.display = 'flex';
  el.style.animation = 'none'; el.offsetHeight; el.style.animation = 'eeFadeIn .3s ease';
  const em = document.getElementById('eeEmoji');
  em.textContent = 'ğŸ˜';
  em.style.animation = 'none'; em.offsetHeight;
  em.style.animation = 'eeEntrance .65s cubic-bezier(.34,1.56,.64,1) forwards, eePulse .55s .65s ease-in-out infinite alternate';
  launchFireworks();
  clearTimeout(el._eet);
  el._eet = setTimeout(closeEasterEgg, 5000);
}
function closeEasterEgg() {
  const el = document.getElementById('easterEgg');
  el.style.display = 'none';
  document.getElementById('eeParticles').innerHTML = '';
}
function launchFireworks() {
  const wrap = document.getElementById('eeParticles');
  wrap.innerHTML = '';
  const EMOJIS = ['â¤ï¸','ğŸ’–','ğŸ’•','ğŸ’','â­','âœ¨','ğŸ’«','ğŸŒŸ','ğŸ‰','ğŸŠ','ğŸŒ¸','ğŸ’›','ğŸ¥°','ğŸ”¥','ğŸˆ'];
  function burst(delay) {
    setTimeout(() => {
      const cx = 15 + Math.random() * 70;
      const cy = 10 + Math.random() * 55;
      const count = 14 + Math.floor(Math.random() * 8);
      for (let i = 0; i < count; i++) {
        const p = document.createElement('div');
        const angle = (i / count) * Math.PI * 2 + (Math.random() - .5) * .7;
        const dist  = 90 + Math.random() * 180;
        const dur   = .7 + Math.random() * 1.0;
        const size  = 18 + Math.random() * 24;
        const emoji = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
        p.style.cssText = [
          'position:absolute',
          `left:${cx}%`,`top:${cy}%`,
          `font-size:${size}px`,
          'transform:translate(-50%,-50%)',
          'pointer-events:none',
          `animation:eeParticle ${dur}s ease-out forwards`,
          `--eetx:${(Math.cos(angle)*dist).toFixed(1)}px`,
          `--eety:${(Math.sin(angle)*dist).toFixed(1)}px`,
        ].join(';');
        p.textContent = emoji;
        wrap.appendChild(p);
        setTimeout(() => p.remove(), dur * 1000 + 400);
      }
    }, delay);
  }
  [0, 220, 480, 780, 1120, 1520, 2020, 2700].forEach(d => burst(d));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
window.addEventListener('load', () => {
  loadTheme();
  renderPhrasebook('daily');
  loadHistory();
  checkUrlHash();
});
</script>
</body>
</html>
