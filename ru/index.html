<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-NRZ5N9GV');</script>
  <!-- End Google Tag Manager -->

  <!-- â•â•â• PRIMARY SEO â•â•â• -->
  <title>Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ 2026 â€” Ñ‚Ğ¾Ñ‡Ğ½Ñ‹Ğ¹ Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´</title>
  <meta name="description" content="Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ Ğ¸ Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹. Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ğ¸ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¹ ÑÑ‚Ğ¸Ğ»Ğ¸, ÑƒÑ‡Ñ‘Ñ‚ Ñ€Ğ¾Ğ´Ğ°, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸Ğµ, Ñ‚Ñ€Ğ°Ğ½ÑĞ»Ğ¸Ñ‚ĞµÑ€Ğ°Ñ†Ğ¸Ñ Ğ¸ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€ ÑĞ»Ğ¾Ğ². Ğ‘ĞµĞ· Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸, Ğ±ĞµĞ· Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ¸Ğ¹." />
  <meta name="keywords" content="Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹, Ñ€ÑƒÑÑĞºĞ¾-Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº, Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾, Ğ¾Ğ½Ğ»Ğ°Ğ¹Ğ½ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº, Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº, russian to english, english to russian, russian translator" />
  <meta name="robots" content="index, follow" />
  <meta name="author" content="Mytheon Technologies" />
  <link rel="canonical" href="https://englishtorussian.ai/ru/" />

  <!-- â•â•â• HREFLANG â•â•â• -->
  <link rel="alternate" hreflang="en" href="https://englishtorussian.ai/" />
  <link rel="alternate" hreflang="ru" href="https://englishtorussian.ai/ru/" />
  <link rel="alternate" hreflang="x-default" href="https://englishtorussian.ai/" />

  <!-- â•â•â• OPEN GRAPH â•â•â• -->
  <meta property="og:type" content="website" />
  <meta property="og:title" content="Ğ›ÑƒÑ‡ÑˆĞ¸Ğ¹ Ğ±ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ 2026" />
  <meta property="og:description" content="ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¸ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¼ ÑÑ‚Ğ¸Ğ»ÑĞ¼Ğ¸, ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ€Ğ¾Ğ´Ğ°, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€Ğ¾Ğ¼ ÑĞ»Ğ¾Ğ². Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ğ¾, Ğ±ĞµĞ· Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸." />
  <meta property="og:url" content="https://englishtorussian.ai/ru/" />
  <meta property="og:site_name" content="Mytheon Russian Translator" />
  <meta property="og:locale" content="ru_RU" />
  <meta property="og:locale:alternate" content="en_US" />

  <!-- â•â•â• JSON-LD: WebApplication â•â•â• -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ â€” Mytheon",
    "url": "https://englishtorussian.ai/ru/",
    "description": "Ğ‘ĞµÑĞ¿Ğ»Ğ°Ñ‚Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¼ Ğ¸ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ñ‹Ğ¼ ÑÑ‚Ğ¸Ğ»ÑĞ¼Ğ¸, ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ€Ğ¾Ğ´Ğ°, Ğ¿Ñ€Ğ¾Ğ¸Ğ·Ğ½Ğ¾ÑˆĞµĞ½Ğ¸ĞµĞ¼ Ğ¸ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€Ğ¾Ğ¼ ÑĞ»Ğ¾Ğ².",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "browserRequirements": "Requires JavaScript",
    "offers": { "@type": "Offer", "price": "0", "priceCurrency": "USD" },
    "author": {
      "@type": "Organization",
      "name": "Mytheon Technologies",
      "address": { "@type": "PostalAddress", "streetAddress": "133/1 Gagarin Avenue", "addressLocality": "Almaty", "addressCountry": "KZ" }
    },
    "featureList": ["English to Russian translation","Russian to English translation","Formal and casual modes","Gender-aware grammar","Text-to-speech pronunciation","Transliteration","Word breakdown","Translation history","Virtual Russian keyboard","Phrasebook"]
  }
  </script>

  <!-- â•â•â• JSON-LD: FAQPage â•â•â• -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "FAQPage",
    "mainEntity": [
      {"@type":"Question","name":"How accurate is this English to Russian translator?","acceptedAnswer":{"@type":"Answer","text":"This translator uses Google's translation engine for high-quality, context-aware results handling everyday language, business phrases and conversational text well."}},
      {"@type":"Question","name":"What is the difference between formal and casual Russian?","acceptedAnswer":{"@type":"Answer","text":"Formal Russian uses Ğ’Ñ‹ (polite you) for strangers, elders and business. Casual Russian uses Ñ‚Ñ‹ with friends and family. The wrong form can sound rude or stiff."}},
      {"@type":"Question","name":"Why does gender matter in Russian translation?","acceptedAnswer":{"@type":"Answer","text":"Russian past-tense verbs agree with the speaker's gender. 'I went' is Ñ Ğ¿Ğ¾ÑˆÑ‘Ğ» (male) or Ñ Ğ¿Ğ¾ÑˆĞ»Ğ° (female). Selecting gender makes the translation grammatically correct."}},
      {"@type":"Question","name":"Is this translator free to use?","acceptedAnswer":{"@type":"Answer","text":"Yes â€” completely free, no signup, no usage limits. Developed by Mytheon Technologies, Almaty, Kazakhstan."}},
      {"@type":"Question","name":"Can I hear the Russian pronunciation?","acceptedAnswer":{"@type":"Answer","text":"Yes. Click the ğŸ”Š speaker button on any translation card to hear it spoken aloud using your browser's built-in text-to-speech engine."}}
    ]
  }
  </script>

  <style>
  /* â•â•â• CSS VARIABLES â€” LIGHT / DARK â•â•â• */
  :root {
    --bg:         #f0f4ff;
    --surface:    #ffffff;
    --surface2:   #fafcff;
    --border:     #d0dcf5;
    --border2:    #eaf0ff;
    --text:       #1a1a2e;
    --muted:      #5570a0;
    --faint:      #9aadcc;
    --xfaint:     #b0bcd8;
    --primary:    #2253cb;
    --primary-bg: #eaf0ff;
    --primary-dk: #1a40a8;
    --orange:     #ea7000;
    --orange-bg:  #fff7f0;
    --green:      #1a9e5c;
    --green-bg:   #f0fdf6;
    --shadow:     rgba(34,83,203,0.07);
    --shadow2:    rgba(34,83,203,0.18);
  }
  [data-theme="dark"] {
    --bg:         #080c18;
    --surface:    #0f1520;
    --surface2:   #0a1020;
    --border:     rgba(255,255,255,0.09);
    --border2:    rgba(255,255,255,0.05);
    --text:       #e5e7eb;
    --muted:      #9ca3af;
    --faint:      #6b7280;
    --xfaint:     #4b5563;
    --primary:    #5b85f5;
    --primary-bg: rgba(91,133,245,0.12);
    --primary-dk: #7599ff;
    --orange:     #fb923c;
    --orange-bg:  rgba(251,146,60,0.08);
    --green:      #34d399;
    --green-bg:   rgba(52,211,153,0.08);
    --shadow:     rgba(0,0,0,0.35);
    --shadow2:    rgba(0,0,0,0.55);
  }

  *, *::before, *::after { margin:0; padding:0; box-sizing:border-box; }
  body { font-family:'Segoe UI',system-ui,-apple-system,sans-serif; background:var(--bg); min-height:100vh; color:var(--text); transition:background .3s,color .3s; }
  a { color:var(--primary); }

  /* â•â•â• JS-TOGGLED STATES â•â•â• */
  .lang-pill.active-lang { border-color:var(--primary) !important; color:var(--primary) !important; background:var(--primary-bg) !important; }
  .g-btn.on { background:var(--primary-bg) !important; border-color:var(--primary) !important; color:var(--primary) !important; font-weight:700; }
  .kb-toggle.on { border-color:var(--primary) !important; color:var(--primary) !important; background:var(--primary-bg) !important; }
  .vkeyboard { display:none; }
  .vkeyboard.show { display:block; }
  .loading { display:none; }
  .loading.show { display:block; }
  .results { display:none; }
  .results.show { display:block; }
  .grammar-tip { display:none; }
  .grammar-tip.show { display:block; }
  .detect-pill { display:none; }
  .detect-pill.show { display:flex; }
  .faq-a { display:none; }
  .faq-a.open { display:block; }
  .faq-q.open { color:var(--primary); background:var(--primary-bg); }
  .faq-icon { transition:transform .25s; color:var(--primary); }
  .faq-q.open .faq-icon { transform:rotate(45deg); }
  .tab-btn.active { background:var(--primary-bg) !important; border-color:var(--primary) !important; color:var(--primary) !important; font-weight:700; }
  #toast { opacity:0; transform:translateY(10px); transition:opacity .25s,transform .25s; pointer-events:none; }
  #toast.show { opacity:1; transform:translateY(0); }
  .iBtn { background:none; border:none; cursor:pointer; font-size:1rem; opacity:.38; transition:opacity .2s,transform .2s; padding:2px 4px; line-height:1; }
  .iBtn:hover { opacity:1; transform:scale(1.18); }
  .iBtn.starred { opacity:1; }
  .howto-hidden { display:none; }
  .swap-btn:hover { transform:rotate(180deg); background:var(--primary-dk) !important; }

  /* â•â•â• SECTION HEADER WITH LINES â•â•â• */
  .sec-header { display:flex; align-items:center; gap:10px; margin-bottom:13px; font-size:.74rem; color:var(--faint); text-transform:uppercase; letter-spacing:1.2px; font-weight:700; }
  .sec-header::before,.sec-header::after { content:''; flex:1; height:1px; background:var(--border); }

  /* â•â•â• SPINNER â•â•â• */
  @keyframes spin { to{transform:rotate(360deg);} }
  .spinner { display:inline-block; width:34px; height:34px; border:3px solid var(--primary-bg); border-top-color:var(--primary); border-radius:50%; animation:spin .75s linear infinite; }

  /* â•â•â• VIRTUAL KEYBOARD â•â•â• */
  .vk-row { display:flex; gap:5px; justify-content:center; margin-bottom:5px; flex-wrap:wrap; }
  .vk-key { min-width:33px; height:33px; background:var(--surface); border:1px solid var(--border); border-radius:7px; font-size:.88rem; cursor:pointer; color:var(--text); transition:all .15s; display:flex; align-items:center; justify-content:center; font-family:inherit; }
  .vk-key:hover { background:var(--primary-bg); border-color:var(--primary); color:var(--primary); }
  .vk-key:active { transform:scale(.9); }
  .vk-wide { min-width:60px; font-size:.72rem; }
  .vk-space { min-width:130px; }
  @media(max-width:768px) {
    .vk-key { min-width:26px; height:30px; font-size:.75rem; }
    .vk-wide { min-width:44px; font-size:.67rem; }
    .vk-space { min-width:65px; }
  }
  @media(max-width:390px) {
    .vk-key { min-width:22px; height:27px; font-size:.67rem; }
    .vk-wide { min-width:36px; font-size:.62rem; }
    .vk-space { min-width:48px; }
  }

  /* â•â•â• RESULT CARDS â•â•â• */
  .result-card.formal { border-color:rgba(34,83,203,.28); background:var(--surface2); }
  .result-card.casual { border-color:rgba(234,112,0,.28); background:var(--orange-bg); }
  .rc-label { font-size:.71rem; text-transform:uppercase; letter-spacing:1.2px; font-weight:700; }
  .formal .rc-label { color:var(--primary); }
  .casual .rc-label { color:var(--orange); }

  /* â•â•â• BREAKDOWN TABLE â•â•â• */
  .breakdown-card { border-radius:18px; border:1px solid var(--border); background:var(--surface); box-shadow:0 2px 10px var(--shadow); margin-bottom:16px; overflow-x:auto; -webkit-overflow-scrolling:touch; }
  .breakdown-title { padding:13px 18px 11px; font-size:.73rem; text-transform:uppercase; letter-spacing:1.2px; color:var(--faint); font-weight:700; border-bottom:1px solid var(--border); background:var(--surface2); }
  table { width:100%; border-collapse:collapse; min-width:430px; }
  thead th { padding:9px 16px; text-align:left; font-size:.7rem; text-transform:uppercase; letter-spacing:1px; color:var(--xfaint); background:var(--surface2); border-bottom:1px solid var(--border); font-weight:700; }
  tbody tr { transition:background .15s; }
  tbody tr:hover { background:var(--primary-bg); }
  tbody td { padding:10px 16px; border-bottom:1px solid var(--border); font-size:.91rem; vertical-align:middle; }
  tbody tr:last-child td { border-bottom:none; }

  /* â•â•â• TAGS (JS-generated) â•â•â• */
  .tag { display:inline-flex; align-items:center; gap:4px; padding:3px 9px; border-radius:20px; font-size:.69rem; font-weight:700; letter-spacing:.5px; text-transform:uppercase; }
  .tag-verb   { background:rgba(34,83,203,.1);  color:var(--primary); }
  .tag-noun   { background:rgba(234,112,0,.1);  color:var(--orange); }
  .tag-phrase { background:rgba(26,158,92,.1);  color:var(--green); }
  .tag-adj    { background:rgba(160,50,220,.1); color:#a032dc; }
  .tag-adv    { background:rgba(200,130,0,.1);  color:#c68800; }
  .orig-word  { color:var(--muted); font-weight:500; }
  .trans-word { color:var(--primary); font-weight:700; }
  .note-cell  { color:var(--faint); font-size:.79rem; }

  /* â•â•â• HISTORY (JS-generated) â•â•â• */
  .history-item { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:11px 15px; cursor:pointer; transition:all .2s; display:flex; align-items:center; gap:10px; }
  .history-item:hover { border-color:var(--primary); background:var(--primary-bg); }
  .history-text { font-size:.87rem; color:var(--text); font-weight:600; flex:1; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .history-sub { font-size:.74rem; color:var(--faint); margin-top:2px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
  .history-dir { font-size:.7rem; color:var(--primary); font-weight:700; flex-shrink:0; background:var(--primary-bg); padding:2px 8px; border-radius:10px; }
  .history-del { background:none; border:none; color:var(--xfaint); cursor:pointer; font-size:.9rem; flex-shrink:0; padding:2px; }
  .history-del:hover { color:#ef4444; }

  /* â•â•â• PHRASEBOOK (JS-generated) â•â•â• */
  .phrase-grid { display:grid; grid-template-columns:1fr 1fr; gap:8px; }
  @media(max-width:600px) { .phrase-grid { grid-template-columns:1fr; } }
  .phrase-card { background:var(--surface); border:1px solid var(--border); border-radius:12px; padding:11px 14px; cursor:pointer; transition:all .2s; }
  .phrase-card:hover { border-color:var(--primary); background:var(--primary-bg); }
  .phrase-en { font-size:.87rem; color:var(--text); font-weight:600; }
  .phrase-ru { font-size:.87rem; color:var(--primary); margin-top:3px; }
  .phrase-tr { font-size:.73rem; color:var(--faint); font-style:italic; margin-top:2px; }
  .phrase-card-footer { display:flex; justify-content:flex-end; margin-top:7px; }
  .phrase-copy-btn { background:none; border:1px solid var(--border); border-radius:7px; padding:3px 9px; font-size:.75rem; color:var(--faint); cursor:pointer; transition:all .2s; }
  .phrase-copy-btn:hover { border-color:var(--primary); color:var(--primary); background:var(--primary-bg); }

  /* â•â•â• HOW TO SAY (JS-generated) â•â•â• */
  .howto-row { background:var(--surface); border:1px solid var(--border); border-radius:10px; padding:9px 13px; display:flex; align-items:center; gap:10px; cursor:pointer; transition:all .15s; font-size:.84rem; }
  .howto-row:hover { border-color:var(--primary); background:var(--primary-bg); }
  .howto-en { color:var(--text); font-weight:600; flex:1; }
  .howto-ru { color:var(--primary); font-weight:700; flex:1; text-align:right; }
  .howto-copy-btn { background:none; border:1px solid var(--border); border-radius:6px; padding:2px 8px; font-size:.73rem; color:var(--faint); cursor:pointer; transition:all .2s; flex-shrink:0; }
  .howto-copy-btn:hover { border-color:var(--primary); color:var(--primary); background:var(--primary-bg); }
  @media(max-width:600px) { .howto-ru { text-align:left; word-break:break-word; } }

  /* â•â•â• EASTER EGG â•â•â• */
  @keyframes eeParticle {
    0%   { transform:translate(-50%,-50%) scale(0.2); opacity:1; }
    65%  { opacity:1; }
    100% { transform:translate(calc(-50% + var(--eetx)),calc(-50% + var(--eety))) scale(0.9); opacity:0; }
  }
  @keyframes eePulse {
    from { transform:scale(1) rotate(-10deg); }
    to   { transform:scale(1.22) rotate(10deg); }
  }
  @keyframes eeEntrance {
    0%  { transform:scale(0) rotate(-25deg); opacity:0; }
    60% { transform:scale(1.35) rotate(8deg); opacity:1; }
    80% { transform:scale(0.9) rotate(-4deg); }
    100%{ transform:scale(1) rotate(0deg); opacity:1; }
  }
  @keyframes eeShine {
    from { text-shadow:0 0 24px rgba(255,120,160,.7),0 0 48px rgba(255,50,110,.4); }
    to   { text-shadow:0 0 38px rgba(255,160,200,1), 0 0 70px rgba(255,100,150,.7); }
  }
  @keyframes eeFadeIn { from{opacity:0} to{opacity:1} }
  </style>

  <!-- Tailwind CSS -->
  <script>tailwind.config = { darkMode: ['selector', '[data-theme="dark"]'] }</script>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body data-theme="light">
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-NRZ5N9GV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->

<!-- PAGE WRAPPER -->
<div class="max-w-2xl mx-auto px-4">

  <!-- MAIN APP -->
  <div class="py-6 pb-12">

    <!-- HEADER -->
    <header class="text-center pt-6 pb-6">
      <div class="flex gap-2 justify-center mb-4 flex-wrap">
        <a href="/" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium no-underline transition" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸ‡¬ğŸ‡§ EN Version</a>
        <a href="/pdf/" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium no-underline transition" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸ“„ PDF ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº</a>
        <button id="themeBtn" onclick="toggleTheme()" class="flex items-center gap-1.5 px-4 py-2 rounded-full text-sm font-medium transition cursor-pointer" style="background:var(--surface);border:1px solid var(--border);color:var(--muted)">ğŸŒ™ Dark</button>
      </div>
      <h1 class="text-2xl sm:text-3xl font-extrabold leading-tight tracking-tight" style="color:var(--primary)">ğŸ‡·ğŸ‡º â†” ğŸ‡¬ğŸ‡§ ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‡Ğ¸Ğº Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹</h1>
      <p id="subheading" class="mt-3 text-sm max-w-xl mx-auto leading-relaxed" style="color:var(--muted)">âœ¨ Ğ£Ğ¼Ğ½Ñ‹Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´ Ñ Ñ€ÑƒÑÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¸Ğ¹ Ğ¸ Ñ Ğ°Ğ½Ğ³Ğ»Ğ¸Ğ¹ÑĞºĞ¾Ğ³Ğ¾ Ğ½Ğ° Ñ€ÑƒÑÑĞºĞ¸Ğ¹ â€” Ñ ÑƒÑ‡Ñ‘Ñ‚Ğ¾Ğ¼ Ñ€Ğ¾Ğ´Ğ°, ÑÑ‚Ğ¸Ğ»Ñ Ñ€ĞµÑ‡Ğ¸ Ğ¸ Ñ€Ğ°Ğ·Ğ±Ğ¾Ñ€Ğ¾Ğ¼ ÑĞ»Ğ¾Ğ² âœ¨</p>
    </header>

    <!-- INPUT CARD -->
    <div class="rounded-2xl p-5 sm:p-7 mb-5 shadow" style="background:var(--surface);border:1px solid var(--border)">

      <!-- Direction Row -->
      <div class="flex items-center justify-center gap-3 mb-6 flex-wrap">
        <div class="lang-pill flex items-center gap-2 rounded-full px-6 py-3 text-base font-semibold min-w-[140px] justify-center border-2 transition active-lang" id="srcPill" style="background:var(--bg);border-color:var(--border);color:var(--muted)">ğŸ‡¬ğŸ‡§ English</div>
        <button class="swap-btn rounded-full w-12 h-12 text-xl cursor-pointer text-white flex-shrink-0 border-none transition-transform duration-300" onclick="swapDirection()" title="Swap" style="background:var(--primary);box-shadow:0 4px 14px var(--shadow2)">â‡„</button>
        <div class="lang-pill flex items-center gap-2 rounded-full px-6 py-3 text-base font-semibold min-w-[140px] justify-center border-2 transition" id="tgtPill" style="background:var(--bg);border-color:var(--border);color:var(--muted)">ğŸ‡·ğŸ‡º Russian</div>
        <div class="detect-pill items-center gap-1 rounded-full px-3 py-1 text-xs font-bold" id="detectPill" style="background:var(--green-bg);border:1px solid var(--green);color:var(--green)">ğŸ” <span id="detectText">Auto-detected</span></div>
      </div>

      <!-- Gender Row -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6">
        <div>
          <label id="speakerLabel" class="block text-xs uppercase tracking-widest mb-2 font-semibold" style="color:var(--faint)">ğŸ‘¤ I am speaking as...</label>
          <div class="flex gap-2">
            <button class="g-btn on flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="sp-m" onclick="setGender('speaker','male')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="mL1">ğŸ‘¨ Male</span></button>
            <button class="g-btn flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="sp-f" onclick="setGender('speaker','female')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="fL1">ğŸ‘© Female</span></button>
          </div>
        </div>
        <div>
          <label id="listenerLabel" class="block text-xs uppercase tracking-widest mb-2 font-semibold" style="color:var(--faint)">ğŸ—£ï¸ I am talking to...</label>
          <div class="flex gap-2">
            <button class="g-btn on flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="ls-m" onclick="setGender('listener','male')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="mL2">ğŸ‘¨ Male</span></button>
            <button class="g-btn flex-1 py-3 px-2 border-2 rounded-xl text-sm transition text-center font-medium cursor-pointer" id="ls-f" onclick="setGender('listener','female')" style="background:var(--bg);border-color:var(--border);color:var(--faint)"><span id="fL2">ğŸ‘© Female</span></button>
          </div>
        </div>
      </div>

      <!-- Textarea -->
      <div class="relative">
        <textarea id="inputText" class="w-full min-h-[130px] rounded-xl p-4 text-base resize-y outline-none transition focus:outline-none" placeholder="âœï¸  Type or paste your text here..." oninput="onInput()" style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit;line-height:1.6"></textarea>
        <div class="flex justify-between items-center mt-2 flex-wrap gap-2">
          <div class="text-xs" style="color:var(--xfaint)"><span id="charNum">0</span> <span id="charsLabel">characters</span></div>
          <div class="flex gap-2">
            <button class="kb-toggle border rounded-lg px-3 py-1.5 text-xs cursor-pointer transition" id="kbToggle" onclick="toggleKB()" style="background:none;border-color:var(--border);color:var(--faint)">âŒ¨ï¸ RU keyboard</button>
            <button class="kb-toggle border rounded-lg px-3 py-1.5 text-xs cursor-pointer transition" id="enKbToggle" onclick="toggleENKB()" style="background:none;border-color:var(--border);color:var(--faint)">âŒ¨ï¸ EN keyboard</button>
          </div>
        </div>
      </div>

      <!-- Russian Keyboard -->
      <div class="vkeyboard rounded-xl p-3 mt-2.5" id="vkeyboard" style="background:var(--surface2);border:1px solid var(--border)">
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ğ¹')">Ğ¹</button><button class="vk-key" onclick="vk('Ñ†')">Ñ†</button><button class="vk-key" onclick="vk('Ñƒ')">Ñƒ</button><button class="vk-key" onclick="vk('Ğº')">Ğº</button><button class="vk-key" onclick="vk('Ğµ')">Ğµ</button><button class="vk-key" onclick="vk('Ğ½')">Ğ½</button><button class="vk-key" onclick="vk('Ğ³')">Ğ³</button><button class="vk-key" onclick="vk('Ñˆ')">Ñˆ</button><button class="vk-key" onclick="vk('Ñ‰')">Ñ‰</button><button class="vk-key" onclick="vk('Ğ·')">Ğ·</button><button class="vk-key" onclick="vk('Ñ…')">Ñ…</button><button class="vk-key" onclick="vk('ÑŠ')">ÑŠ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ñ„')">Ñ„</button><button class="vk-key" onclick="vk('Ñ‹')">Ñ‹</button><button class="vk-key" onclick="vk('Ğ²')">Ğ²</button><button class="vk-key" onclick="vk('Ğ°')">Ğ°</button><button class="vk-key" onclick="vk('Ğ¿')">Ğ¿</button><button class="vk-key" onclick="vk('Ñ€')">Ñ€</button><button class="vk-key" onclick="vk('Ğ¾')">Ğ¾</button><button class="vk-key" onclick="vk('Ğ»')">Ğ»</button><button class="vk-key" onclick="vk('Ğ´')">Ğ´</button><button class="vk-key" onclick="vk('Ğ¶')">Ğ¶</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ñ‡')">Ñ‡</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ğ¼')">Ğ¼</button><button class="vk-key" onclick="vk('Ğ¸')">Ğ¸</button><button class="vk-key" onclick="vk('Ñ‚')">Ñ‚</button><button class="vk-key" onclick="vk('ÑŒ')">ÑŒ</button><button class="vk-key" onclick="vk('Ğ±')">Ğ±</button><button class="vk-key" onclick="vk('Ñ')">Ñ</button><button class="vk-key" onclick="vk('Ñ‘')">Ñ‘</button>
        </div>
        <div class="vk-row">
          <button class="vk-key vk-wide" onclick="vk(' ')">Space</button>
          <button class="vk-key vk-space" onclick="vkBs()">âŒ« Del</button>
          <button class="vk-key vk-wide" onclick="doTranslate()" style="background:var(--primary);color:#fff;border-color:var(--primary);">â†µ Go</button>
        </div>
      </div>

      <!-- English Keyboard -->
      <div class="vkeyboard rounded-xl p-3 mt-2.5" id="enkeyboard" style="background:var(--surface2);border:1px solid var(--border)">
        <div class="vk-row">
          <button class="vk-key" onclick="vk('q')">q</button><button class="vk-key" onclick="vk('w')">w</button><button class="vk-key" onclick="vk('e')">e</button><button class="vk-key" onclick="vk('r')">r</button><button class="vk-key" onclick="vk('t')">t</button><button class="vk-key" onclick="vk('y')">y</button><button class="vk-key" onclick="vk('u')">u</button><button class="vk-key" onclick="vk('i')">i</button><button class="vk-key" onclick="vk('o')">o</button><button class="vk-key" onclick="vk('p')">p</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('a')">a</button><button class="vk-key" onclick="vk('s')">s</button><button class="vk-key" onclick="vk('d')">d</button><button class="vk-key" onclick="vk('f')">f</button><button class="vk-key" onclick="vk('g')">g</button><button class="vk-key" onclick="vk('h')">h</button><button class="vk-key" onclick="vk('j')">j</button><button class="vk-key" onclick="vk('k')">k</button><button class="vk-key" onclick="vk('l')">l</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('z')">z</button><button class="vk-key" onclick="vk('x')">x</button><button class="vk-key" onclick="vk('c')">c</button><button class="vk-key" onclick="vk('v')">v</button><button class="vk-key" onclick="vk('b')">b</button><button class="vk-key" onclick="vk('n')">n</button><button class="vk-key" onclick="vk('m')">m</button><button class="vk-key" onclick="vk('\'')">\'</button><button class="vk-key" onclick="vk('.')">.</button><button class="vk-key" onclick="vk(',')">ï¼Œ</button>
        </div>
        <div class="vk-row">
          <button class="vk-key" onclick="vk('1')">1</button><button class="vk-key" onclick="vk('2')">2</button><button class="vk-key" onclick="vk('3')">3</button><button class="vk-key" onclick="vk('4')">4</button><button class="vk-key" onclick="vk('5')">5</button><button class="vk-key" onclick="vk('6')">6</button><button class="vk-key" onclick="vk('7')">7</button><button class="vk-key" onclick="vk('8')">8</button><button class="vk-key" onclick="vk('9')">9</button><button class="vk-key" onclick="vk('0')">0</button>
        </div>
        <div class="vk-row">
          <button class="vk-key vk-wide" onclick="vk(' ')">Space</button>
          <button class="vk-key vk-space" onclick="vkBs()">âŒ« Del</button>
          <button class="vk-key vk-wide" onclick="doTranslate()" style="background:var(--primary);color:#fff;border-color:var(--primary);">â†µ Go</button>
        </div>
      </div>

      <button class="w-full py-4 border-none rounded-xl text-white text-lg font-bold tracking-wide cursor-pointer mt-4 transition shadow-lg disabled:opacity-50 disabled:cursor-not-allowed" id="translateBtn" onclick="doTranslate()" style="background:var(--primary)">
        ğŸ”„ &nbsp;<span id="translateBtnText">Translate</span>
      </button>
      <p class="text-center text-xs mt-2" style="color:var(--xfaint)">Press <kbd class="rounded px-1 py-0.5 text-xs" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)">Enter</kbd> to translate &nbsp;|&nbsp; <kbd class="rounded px-1 py-0.5 text-xs" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)">Shift+Enter</kbd> for new line</p>

    </div><!-- /input card -->

    <!-- LOADING -->
    <div class="loading text-center py-7" id="loading" style="color:var(--faint)">
      <div class="spinner"></div>
      <p class="mt-3" id="loadingText">Translatingâ€¦ ğŸŒ</p>
    </div>

    <!-- RESULTS -->
    <div class="results" id="results">

      <div class="sec-header" id="resultsHeader">âœ¨ Translations</div>

      <!-- Results grid: 1-col mobile, 2-col sm+ -->
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4 mb-5">
        <!-- FORMAL -->
        <div class="result-card formal rounded-2xl p-5 border-2 shadow">
          <div class="flex items-center justify-between mb-2.5">
            <span class="rc-label" id="formalLabel">ğŸ© Formal</span>
            <div class="flex gap-0.5">
              <button class="iBtn" onclick="speakCard('formalText','formal')" title="Listen">ğŸ”Š</button>
              <button class="iBtn" id="favFormal" onclick="toggleFav('formal')" title="Favourite">â­</button>
              <button class="iBtn" onclick="copyCard('formalText')" title="Copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="text-base leading-7 min-h-[48px]" id="formalText" style="color:var(--text)"></div>
          <div class="text-sm mt-1.5 italic" id="formalTranslit" style="color:var(--faint)"></div>
          <div class="text-xs mt-1" id="formalNote" style="color:var(--xfaint)"></div>
        </div>
        <!-- CASUAL -->
        <div class="result-card casual rounded-2xl p-5 border-2 shadow">
          <div class="flex items-center justify-between mb-2.5">
            <span class="rc-label" id="casualLabel">ğŸ˜Š Casual</span>
            <div class="flex gap-0.5">
              <button class="iBtn" onclick="speakCard('casualText','casual')" title="Listen">ğŸ”Š</button>
              <button class="iBtn" id="favCasual" onclick="toggleFav('casual')" title="Favourite">â­</button>
              <button class="iBtn" onclick="copyCard('casualText')" title="Copy">ğŸ“‹</button>
            </div>
          </div>
          <div class="text-base leading-7 min-h-[48px]" id="casualText" style="color:var(--text)"></div>
          <div class="text-sm mt-1.5 italic" id="casualTranslit" style="color:var(--faint)"></div>
          <div class="text-xs mt-1" id="casualNote" style="color:var(--xfaint)"></div>
        </div>
      </div>

      <!-- Grammar Tip -->
      <div class="grammar-tip rounded-xl px-4 py-2.5 mb-3.5 text-sm leading-relaxed" id="grammarTip" style="background:var(--primary-bg);border:1px solid var(--border);color:var(--primary)"></div>

      <!-- Share Row -->
      <div class="flex gap-2 flex-wrap mb-5 items-center">
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareLink()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ”— Copy link</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareFB()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ“˜ Facebook</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareWA()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¬ WhatsApp</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="shareLinkedIn()" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¼ LinkedIn</button>
        <button class="flex items-center gap-1.5 px-4 py-2.5 border rounded-full text-sm cursor-pointer transition w-full sm:w-auto justify-center mt-1 sm:mt-0" onclick="reportBad()" style="background:var(--surface);border-color:var(--border);color:var(--faint)">ğŸš© Report bad translation</button>
      </div>

      <!-- Word Breakdown -->
      <div class="breakdown-card">
        <div class="breakdown-title" id="breakdownTitle">ğŸ“š Word &amp; Phrase Breakdown â€” for learning</div>
        <table>
          <thead>
            <tr>
              <th id="thType">Type</th>
              <th id="thOrig">Original</th>
              <th id="thTrans">Translation</th>
              <th id="thNotes">Notes</th>
            </tr>
          </thead>
          <tbody id="breakdownBody">
            <tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">Readyâ€¦</td></tr>
          </tbody>
        </table>
      </div>

    </div><!-- /results -->

    <!-- HISTORY -->
    <div id="historySection" style="display:none" class="mb-4">
      <div class="sec-header" id="historyHeader">ğŸ• Recent Translations &nbsp;<button onclick="clearHistory()" class="cursor-pointer text-xs font-semibold" style="background:none;border:none;color:var(--faint)">Clear all</button></div>
      <div class="flex flex-col gap-2" id="historyList"></div>
    </div>

    <!-- PHRASEBOOK -->
    <div class="mb-4">
      <div class="sec-header" id="phraseHeader">ğŸ“– Phrasebook</div>
      <div class="flex gap-2 mb-4 flex-wrap" id="phraseTabs">
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium active" onclick="switchTab('business',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ’¼ Business</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('travel',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">âœˆï¸ Travel</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('romance',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">â¤ï¸ Romance</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('medical',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸ¥ Medical</button>
        <button class="tab-btn px-4 py-2.5 border rounded-full text-sm cursor-pointer transition font-medium" onclick="switchTab('emergency',this)" style="background:var(--surface);border-color:var(--border);color:var(--muted)">ğŸš¨ Emergency</button>
      </div>
      <div id="phraseContent"></div>
    </div>

    <!-- VERB CONJUGATOR -->
    <div class="mb-5">
      <div class="sec-header">âš¡ Verb Conjugator</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <p class="text-xs mb-3" style="color:var(--muted)">Enter a verb in English or Russian â€” get past, present &amp; future conjugations.</p>
        <div class="flex gap-2 mb-4">
          <input type="text" id="verbInput" placeholder="e.g. speak, Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚ÑŒ, go, Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒâ€¦"
                 class="flex-1 px-4 py-3 rounded-xl outline-none transition text-sm"
                 style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit"
                 onkeydown="if(event.key==='Enter') doConjugate()" />
          <button onclick="doConjugate()" class="px-5 py-3 rounded-xl text-white font-bold border-none cursor-pointer transition text-sm flex-shrink-0" style="background:var(--primary)">Conjugate</button>
        </div>
        <div id="conjugateLoading" style="display:none" class="text-center py-4"><div class="spinner"></div></div>
        <div id="conjugateResult" style="display:none"></div>
      </div>
    </div>

    <!-- CASE EXPLAINER -->
    <div class="mb-5">
      <div class="sec-header">ğŸ“š Case Explainer</div>
      <div class="rounded-2xl p-5 sm:p-6 shadow" style="background:var(--surface);border:1px solid var(--border)">
        <p class="text-xs mb-3" style="color:var(--muted)">Enter a noun or adjective â€” see all 6 Russian cases with usage explained.</p>
        <div class="flex gap-2 mb-4">
          <input type="text" id="caseInput" placeholder="e.g. book, ÑÑ‚ÑƒĞ´ĞµĞ½Ñ‚, ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹â€¦"
                 class="flex-1 px-4 py-3 rounded-xl outline-none transition text-sm"
                 style="background:var(--bg);border:2px solid var(--border);color:var(--text);font-family:inherit"
                 onkeydown="if(event.key==='Enter') doDecline()" />
          <button onclick="doDecline()" class="px-5 py-3 rounded-xl text-white font-bold border-none cursor-pointer transition text-sm flex-shrink-0" style="background:var(--primary)">Explain</button>
        </div>
        <div id="caseLoading" style="display:none" class="text-center py-4"><div class="spinner"></div></div>
        <div id="caseResult" style="display:none"></div>
      </div>
    </div>

    <!-- FAQ -->
    <div class="my-6">
      <button onclick="toggleFaqSection()" class="w-full flex items-center justify-between px-4 py-3.5 rounded-xl cursor-pointer transition mb-2 text-left" style="background:var(--surface);border:1px solid var(--border)">
        <span class="text-sm font-bold" id="faqTitle" style="color:var(--primary)">â“ Frequently Asked Questions</span>
        <span id="faqToggleIcon" class="font-bold text-lg" style="color:var(--faint)">ï¼‹</span>
      </button>
      <div id="faqItems" style="display:none">

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸŒ How accurate is this English to Russian translator?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">This translator uses Google's translation engine to deliver high-quality, context-aware results. It handles everyday language, business phrases and conversational text very well. For specialised legal or medical content, professional review is recommended.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ© What is the difference between formal and casual Russian?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Formal Russian uses <strong>Ğ’Ñ‹</strong> (capitalised "you") when addressing someone with respect â€” in business, with strangers or elders. Casual Russian uses <strong>Ñ‚Ñ‹</strong> with friends and family. Choosing the wrong form can sound rude or overly stiff.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ‘© Why does gender matter in Russian translation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Russian past-tense verbs must agree with the speaker's gender. "I went" is <strong>Ñ Ğ¿Ğ¾ÑˆÑ‘Ğ»</strong> (male) or <strong>Ñ Ğ¿Ğ¾ÑˆĞ»Ğ°</strong> (female). Selecting your gender ensures the translation is grammatically correct for you personally.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”Š Can I hear the Russian pronunciation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click the ğŸ”Š speaker button on any translation card to hear it spoken aloud using your browser's built-in text-to-speech engine. Works in Chrome, Edge, Firefox and Safari.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”¤ What is transliteration and why is it useful?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Transliteration converts Russian Cyrillic letters into Latin characters so you can sound out words without knowing the Russian alphabet. For example, "ĞŸÑ€Ğ¸Ğ²ĞµÑ‚" becomes "Privet". It is shown in italics below each translation.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ’¼ Can I use this for business communications?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes. The <strong>Formal</strong> mode uses the polite Ğ’Ñ‹ form, appropriate vocabulary and respectful phrasing for emails, letters and meetings. Always select Formal when writing to clients, managers or official contacts.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“š What does the Word Breakdown section do?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">The Word &amp; Phrase Breakdown translates individual key words and common phrases separately, labelling each as a verb, noun, adjective or phrase. It is a powerful learning tool for anyone studying Russian or English.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”„ Can I translate Russian back to English?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Absolutely. Click the â‡„ swap button to switch from Englishâ†’Russian to Russianâ†’English. The entire interface â€” labels, buttons, breakdown tags â€” switches to Russian so you always work in your source language.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>âŒ¨ï¸ What is the virtual Russian keyboard for?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">If you don't have a Cyrillic keyboard layout installed, the built-in virtual keyboard lets you type Russian characters directly by clicking. This is especially useful when translating Russian text back to English.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>âš¡ How do I translate without clicking the button?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Press <strong>Enter</strong> after typing to translate instantly. Use <strong>Shift+Enter</strong> to add a new line. You can also use <strong>Ctrl+Enter</strong> from anywhere on the page.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ• Does this save my translation history?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” your last 15 translations are saved automatically in your browser's local storage. Click any history item to restore it. Your data never leaves your device. Click "Clear all" to remove history anytime.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>â­ How do favourites work?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Click the â­ star button on any translation card to save it as a favourite. Favourites are stored in your browser and persist between sessions. Perfect for saving phrases you use regularly.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ”— Can I share a translation with someone?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click "Copy link" to generate a shareable URL with your translation pre-loaded. Send it via WhatsApp, email or any messenger. You can also use the Facebook, WhatsApp or LinkedIn share buttons.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“ Is Russian grammar very different from English?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes, significantly. Russian has 6 grammatical cases, 3 genders, verb aspect (perfective/imperfective) and gender agreement in past tense. This is why context-aware, gender-specific translation matters so much.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ—£ï¸ Why select who I am talking to?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Some Russian adjectives and terms of address change depending on the listener's gender. "Dear" is <strong>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹</strong> for a male and <strong>Ğ”Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ</strong> for a female. Selecting the listener's gender ensures these forms are correct.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸŒ™ Is there a dark mode?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” click the ğŸŒ™ Dark button in the top right corner to switch to dark mode. Your preference is saved and remembered between visits.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ“– What phrases are in the phrasebook?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">The phrasebook contains 50 expert-curated phrases across 5 categories: Business, Travel, Romance, Medical and Emergency. Click any phrase to instantly load it into the translator.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ†“ Is this translator free to use?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” completely free, no signup, no usage limits. Developed by <strong>Mytheon Technologies</strong>, based in Almaty, Kazakhstan.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸš© What happens when I report a bad translation?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Clicking "Report bad translation" logs the issue for our team to review. We continuously improve translation quality based on user feedback. Thank you for helping us build a better product.</div></div>

      <div class="rounded-xl mb-2 overflow-hidden shadow-sm" style="background:var(--surface);border:1px solid var(--border)"><button class="faq-q w-full text-left px-4 py-3.5 text-sm font-semibold flex justify-between items-center gap-3 cursor-pointer transition" onclick="toggleFaq(this)" style="background:none;border:none;color:var(--text)"><span>ğŸ” Does it auto-detect the language?</span><span class="faq-icon">+</span></button><div class="faq-a px-4 pb-3.5 pt-3 text-sm leading-relaxed" style="color:var(--muted);border-top:1px solid var(--border2)">Yes â€” when you paste or type text, the translator automatically detects whether it is Russian or English and adjusts the direction accordingly. A green "Auto-detected" badge appears to confirm the switch.</div></div>

      </div><!-- /faqItems -->
    </div><!-- /faq-wrapper -->

    <footer class="text-center py-5 mt-2" style="border-top:1px solid var(--border)">
      <div class="text-sm font-bold tracking-widest uppercase" style="color:var(--primary)">âš¡ Powered by MYTHEON TECHNOLOGIES</div>
      <div class="text-xs mt-1" style="color:var(--faint)">133/1 Gagarin Avenue, Almaty, Kazakhstan</div>
      <div class="text-sm mt-3" style="color:var(--muted)">Ğ­Ñ‚Ğ¾Ñ‚ Ğ¿Ñ€Ğ¾ĞµĞºÑ‚ Ğ¿Ğ¾ÑĞ²ÑÑ‰Ñ‘Ğ½ ĞºĞ°Ğ·Ğ°Ñ…ÑĞºĞ¾Ğ¹ Ğ¿Ñ€Ğ¸Ğ½Ñ†ĞµÑÑĞµ, ĞºĞ¾Ñ‚Ğ¾Ñ€Ğ°Ñ ÑƒĞºÑ€Ğ°Ğ»Ğ° Ğ¼Ğ¾Ñ‘ ÑĞµÑ€Ğ´Ñ†Ğµ â¤ï¸</div>
      <div class="text-sm font-semibold mt-1" style="color:#e53e3e">Ğ—Ğ°Ğ¹ĞºĞ°, Ñ‚Ñ‹ Ğ»ÑƒÑ‡ÑˆĞ°Ñ! â­âœ¨</div>
    </footer>

  </div><!-- /app -->

</div><!-- /page-wrap -->

<!-- EASTER EGG OVERLAY -->
<div id="easterEgg" onclick="closeEasterEgg()" style="display:none;position:fixed;inset:0;z-index:999999;background:rgba(8,4,24,0.92);align-items:center;justify-content:center;flex-direction:column;cursor:pointer;animation:eeFadeIn .3s ease">
  <div id="eeParticles" style="position:absolute;inset:0;overflow:hidden;pointer-events:none"></div>
  <div style="position:relative;z-index:1;text-align:center;padding:20px;pointer-events:none">
    <div id="eeEmoji" style="font-size:130px;line-height:1;display:block;will-change:transform"></div>
    <div style="font-size:2rem;font-weight:900;color:#fff;margin-top:14px;animation:eeShine .8s ease-in-out infinite alternate">Ğ”Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ°! ğŸ˜‰</div>
    <div style="font-size:1.05rem;color:rgba(255,255,255,.5);margin-top:10px;letter-spacing:.5px">Ğ½Ğ°Ğ¶Ğ¼Ğ¸Ñ‚Ğµ, Ñ‡Ñ‚Ğ¾Ğ±Ñ‹ Ğ¿Ñ€Ğ¾Ğ´Ğ¾Ğ»Ğ¶Ğ¸Ñ‚ÑŒ</div>
  </div>
</div>

<div id="toast" class="fixed bottom-5 left-4 right-4 sm:left-auto sm:right-5 sm:w-auto text-sm text-white rounded-xl px-4 py-2.5 z-[9999] shadow-lg text-center sm:text-left" style="background:var(--primary)"></div>

<script>
/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   STATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
let direction    = 'ru-en';
let speakerGend  = 'male';
let listenerGend = 'male';
let favFormal    = false;
let favCasual    = false;

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UI STRINGS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const LANG = {
  'en-ru': {
    speakerLabel:'ğŸ‘¤ I am speaking as...',listenerLabel:'ğŸ—£ï¸ I am talking to...',
    male:'ğŸ‘¨ Male',female:'ğŸ‘© Female',
    placeholder:'âœï¸  Type or paste your text here...',charsLabel:'characters',
    translateBtn:'Translate',loading:'Translatingâ€¦ ğŸŒ',kbToggle:'âŒ¨ï¸ Russian keyboard',
    resultsHeader:'âœ¨ Translations',formalLabel:'ğŸ© Formal',casualLabel:'ğŸ˜Š Casual',
    breakdownTitle:'ğŸ“š Word & Phrase Breakdown â€” for learning',
    thType:'Type',thOrig:'Original',thTrans:'Translation',thNotes:'Notes',
    analysing:'ğŸ” Analysingâ€¦',noBreakdown:'No breakdown available.',
    noText:'âœï¸ Please type some text first!',copied:'ğŸ“‹ Copied!',
    tagVerb:'Verb',tagNoun:'Noun',tagAdj:'Adj',tagAdv:'Adverb',tagPhrase:'Phrase',
    noteVerbF:'ğŸ‘© fem. form',noteNoun:'ğŸ“Œ learn gender',notePhrase:'ğŸ’¬ Phrase',
    formalNote:'ğŸ© Polite "Ğ’Ñ‹" â€” business & strangers',
    casualNote:'ğŸ˜Š Friendly "Ñ‚Ñ‹" â€” friends & family',
    formalNoteRu:'ğŸ© Direct translation',casualNoteRu:'ğŸ˜Š Casual Russian form',
    historyHeader:'ğŸ• Recent Translations',phraseHeader:'ğŸ“– Phrasebook',
    faqTitle:'â“ Frequently Asked Questions',
    errText:'âŒ Translation failed â€” check your connection.',
    detectText:'Auto-detected',autoDetectMsg:'Language auto-detected ğŸ”',
    themeLight:'â˜€ï¸ Light',themeDark:'ğŸŒ™ Dark',
  },
  'ru-en': {
    speakerLabel:'ğŸ‘¤ Ğ¯ Ğ³Ğ¾Ğ²Ğ¾Ñ€Ñ ĞºĞ°Ğº...',listenerLabel:'ğŸ—£ï¸ Ğ¯ Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ°Ñ€Ğ¸Ğ²Ğ°Ñ Ñ...',
    male:'ğŸ‘¨ ĞœÑƒĞ¶Ñ‡Ğ¸Ğ½Ğ°',female:'ğŸ‘© Ğ–ĞµĞ½Ñ‰Ğ¸Ğ½Ğ°',
    placeholder:'âœï¸  Ğ’Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ¸Ğ»Ğ¸ Ğ²ÑÑ‚Ğ°Ğ²ÑŒÑ‚Ğµ Ñ‚ĞµĞºÑÑ‚ Ğ·Ğ´ĞµÑÑŒ...',charsLabel:'ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ğ¾Ğ²',
    translateBtn:'ĞŸĞµÑ€ĞµĞ²ĞµÑÑ‚Ğ¸',loading:'ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ¸Ğ¼â€¦ ğŸŒ',kbToggle:'âŒ¨ï¸ Ğ ÑƒÑ. ĞºĞ»Ğ°Ğ²Ğ¸Ğ°Ñ‚ÑƒÑ€Ğ°',
    resultsHeader:'âœ¨ ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹',formalLabel:'ğŸ© ĞÑ„Ğ¸Ñ†Ğ¸Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',casualLabel:'ğŸ˜Š ĞĞµÑ„Ğ¾Ñ€Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹',
    breakdownTitle:'ğŸ“š Ğ Ğ°Ğ·Ğ±Ğ¾Ñ€ ÑĞ»Ğ¾Ğ² Ğ¸ Ñ„Ñ€Ğ°Ğ· â€” Ğ´Ğ»Ñ Ğ¸Ğ·ÑƒÑ‡ĞµĞ½Ğ¸Ñ',
    thType:'Ğ¢Ğ¸Ğ¿',thOrig:'ĞÑ€Ğ¸Ğ³Ğ¸Ğ½Ğ°Ğ»',thTrans:'ĞŸĞµÑ€ĞµĞ²Ğ¾Ğ´',thNotes:'Ğ—Ğ°Ğ¼ĞµÑ‚ĞºĞ¸',
    analysing:'ğŸ” ĞĞ½Ğ°Ğ»Ğ¸Ğ·Ğ¸Ñ€ÑƒĞµĞ¼â€¦',noBreakdown:'Ğ Ğ°Ğ·Ğ±Ğ¾Ñ€ Ğ½ĞµĞ´Ğ¾ÑÑ‚ÑƒĞ¿ĞµĞ½.',
    noText:'âœï¸ ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ²Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ñ‚ĞµĞºÑÑ‚!',copied:'ğŸ“‹ Ğ¡ĞºĞ¾Ğ¿Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¾!',
    tagVerb:'Ğ“Ğ»Ğ°Ğ³Ğ¾Ğ»',tagNoun:'Ğ¡ÑƒÑ‰ĞµÑÑ‚.',tagAdj:'ĞŸÑ€Ğ¸Ğ»Ğ°Ğ³.',tagAdv:'ĞĞ°Ñ€ĞµÑ‡Ğ¸Ğµ',tagPhrase:'Ğ¤Ñ€Ğ°Ğ·Ğ°',
    noteVerbF:'ğŸ‘© Ğ¶ĞµĞ½ÑĞºĞ°Ñ Ñ„Ğ¾Ñ€Ğ¼Ğ°',noteNoun:'ğŸ“Œ Ğ·Ğ°Ğ¿Ğ¾Ğ¼Ğ½Ğ¸Ñ‚Ğµ Ñ€Ğ¾Ğ´',notePhrase:'ğŸ’¬ Ğ¤Ñ€Ğ°Ğ·Ğ°',
    formalNote:'ğŸ© ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´',casualNote:'ğŸ˜Š Ğ˜Ğ· Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ñ‹',
    formalNoteRu:'ğŸ© ĞŸÑ€ÑĞ¼Ğ¾Ğ¹ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´',casualNoteRu:'ğŸ˜Š Ğ˜Ğ· Ñ€Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¾Ğ¹ Ñ„Ğ¾Ñ€Ğ¼Ñ‹',
    historyHeader:'ğŸ• ĞĞµĞ´Ğ°Ğ²Ğ½Ğ¸Ğµ Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ñ‹',phraseHeader:'ğŸ“– Ğ Ğ°Ğ·Ğ³Ğ¾Ğ²Ğ¾Ñ€Ğ½Ğ¸Ğº',
    faqTitle:'â“ Ğ§Ğ°ÑÑ‚Ğ¾ Ğ·Ğ°Ğ´Ğ°Ğ²Ğ°ĞµĞ¼Ñ‹Ğµ Ğ²Ğ¾Ğ¿Ñ€Ğ¾ÑÑ‹',
    errText:'âŒ ĞÑˆĞ¸Ğ±ĞºĞ° Ğ¿ĞµÑ€ĞµĞ²Ğ¾Ğ´Ğ° â€” Ğ¿Ñ€Ğ¾Ğ²ĞµÑ€ÑŒÑ‚Ğµ ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ.',
    detectText:'ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸',autoDetectMsg:'Ğ¯Ğ·Ñ‹Ğº Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»Ñ‘Ğ½ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ğŸ”',
    themeLight:'â˜€ï¸ Ğ¡Ğ²ĞµÑ‚Ğ»Ğ°Ñ',themeDark:'ğŸŒ™ Ğ¢Ñ‘Ğ¼Ğ½Ğ°Ñ',
  }
};
const t = k => (LANG[direction][k] || LANG['en-ru'][k] || '');

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   UPDATE UI TEXT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function updateUI() {
  document.getElementById('speakerLabel').textContent  = t('speakerLabel');
  document.getElementById('listenerLabel').textContent = t('listenerLabel');
  document.getElementById('mL1').textContent = t('male');
  document.getElementById('fL1').textContent = t('female');
  document.getElementById('mL2').textContent = t('male');
  document.getElementById('fL2').textContent = t('female');
  document.getElementById('inputText').placeholder     = t('placeholder');
  document.getElementById('charsLabel').textContent    = t('charsLabel');
  document.getElementById('translateBtnText').textContent = t('translateBtn');
  document.getElementById('loadingText').textContent   = t('loading');
  document.getElementById('resultsHeader').textContent = t('resultsHeader');
  document.getElementById('formalLabel').textContent   = t('formalLabel');
  document.getElementById('casualLabel').textContent   = t('casualLabel');
  document.getElementById('breakdownTitle').textContent= t('breakdownTitle');
  document.getElementById('thType').textContent  = t('thType');
  document.getElementById('thOrig').textContent  = t('thOrig');
  document.getElementById('thTrans').textContent = t('thTrans');
  document.getElementById('thNotes').textContent = t('thNotes');
  document.getElementById('phraseHeader').textContent  = t('phraseHeader');
  document.getElementById('faqTitle').textContent      = t('faqTitle');
  document.getElementById('detectText').textContent    = t('detectText');
  document.getElementById('kbToggle').textContent      = t('kbToggle');
  const isDark = document.body.dataset.theme === 'dark';
  document.getElementById('themeBtn').textContent = isDark ? t('themeLight') : t('themeDark');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   THEME
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleTheme() {
  const isDark = document.body.dataset.theme === 'dark';
  document.body.dataset.theme = isDark ? 'light' : 'dark';
  localStorage.setItem('theme', document.body.dataset.theme);
  updateUI();
}
function loadTheme() {
  const saved = localStorage.getItem('theme');
  if (saved) document.body.dataset.theme = saved;
  updateUI();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   LANGUAGE SWAP + AUTO-DETECT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function swapDirection() {
  direction = direction === 'en-ru' ? 'ru-en' : 'en-ru';
  syncPills();
  document.getElementById('results').classList.remove('show');
  document.getElementById('inputText').value = '';
  document.getElementById('charNum').textContent = '0';
  document.getElementById('detectPill').classList.remove('show');
  updateUI();
  renderPhrasebook('business');
}
function syncPills() {
  document.getElementById('srcPill').textContent = direction === 'en-ru' ? 'ğŸ‡¬ğŸ‡§ English' : 'ğŸ‡·ğŸ‡º Russian';
  document.getElementById('tgtPill').textContent = direction === 'en-ru' ? 'ğŸ‡·ğŸ‡º Russian' : 'ğŸ‡¬ğŸ‡§ English';
  document.getElementById('srcPill').classList.add('active-lang');
  document.getElementById('tgtPill').classList.remove('active-lang');
}
function setGender(role, val) {
  if (role === 'speaker') {
    speakerGend = val;
    document.getElementById('sp-m').classList.toggle('on', val === 'male');
    document.getElementById('sp-f').classList.toggle('on', val === 'female');
  } else {
    listenerGend = val;
    document.getElementById('ls-m').classList.toggle('on', val === 'male');
    document.getElementById('ls-f').classList.toggle('on', val === 'female');
  }
}
function autoDetect(text) {
  const hasCyrillic = /[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(text);
  const wanted = hasCyrillic ? 'ru-en' : 'en-ru';
  if (wanted !== direction) {
    direction = wanted;
    syncPills();
    updateUI();
    document.getElementById('detectPill').classList.add('show');
    renderPhrasebook('business');
  }
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INPUT HANDLERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function onInput() {
  const v = document.getElementById('inputText').value;
  document.getElementById('charNum').textContent = v.length;
  if (v.length > 4) autoDetect(v);
  if (!v) document.getElementById('detectPill').classList.remove('show');
}
function countChars() { onInput(); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VIRTUAL KEYBOARD
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleKB() {
  const kb = document.getElementById('vkeyboard');
  const btn = document.getElementById('kbToggle');
  const enKb = document.getElementById('enkeyboard');
  const enBtn = document.getElementById('enKbToggle');
  enKb.classList.remove('show'); enBtn.classList.remove('on');
  kb.classList.toggle('show');
  btn.classList.toggle('on');
}
function toggleENKB() {
  const enKb = document.getElementById('enkeyboard');
  const enBtn = document.getElementById('enKbToggle');
  const ruKb = document.getElementById('vkeyboard');
  const ruBtn = document.getElementById('kbToggle');
  ruKb.classList.remove('show'); ruBtn.classList.remove('on');
  enKb.classList.toggle('show');
  enBtn.classList.toggle('on');
}
function vk(char) {
  const ta = document.getElementById('inputText');
  const s = ta.selectionStart, e = ta.selectionEnd;
  ta.value = ta.value.slice(0,s) + char + ta.value.slice(e);
  ta.selectionStart = ta.selectionEnd = s + char.length;
  ta.focus();
  onInput();
}
function vkBs() {
  const ta = document.getElementById('inputText');
  const s = ta.selectionStart;
  if (s > 0) {
    ta.value = ta.value.slice(0,s-1) + ta.value.slice(s);
    ta.selectionStart = ta.selectionEnd = s - 1;
  }
  ta.focus();
  onInput();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TOAST
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function showToast(msg) {
  const el = document.getElementById('toast');
  el.textContent = msg;
  el.classList.add('show');
  clearTimeout(el._t);
  el._t = setTimeout(() => el.classList.remove('show'), 2000);
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   COPY / SPEAK / FAV / SHARE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function copyCard(id) {
  const txt = document.getElementById(id).textContent;
  try { await navigator.clipboard.writeText(txt); }
  catch { const ta = Object.assign(document.createElement('textarea'),{value:txt}); document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove(); }
  showToast(t('copied'));
}
function speakCard(id, type) {
  const txt = document.getElementById(id).textContent;
  if (!txt || !window.speechSynthesis) { showToast('ğŸ”‡ TTS not supported in this browser'); return; }
  window.speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(txt);
  u.lang = direction === 'en-ru' ? 'ru-RU' : 'en-US';
  u.rate = 0.9;
  window.speechSynthesis.speak(u);
  showToast('ğŸ”Š Speakingâ€¦');
}
function toggleFav(type) {
  const btn = document.getElementById('fav' + (type === 'formal' ? 'Formal' : 'Casual'));
  const txt = document.getElementById(type + 'Text').textContent;
  const stored = JSON.parse(localStorage.getItem('favourites') || '[]');
  const idx = stored.findIndex(f => f.text === txt);
  if (idx > -1) {
    stored.splice(idx, 1);
    btn.classList.remove('starred');
    showToast('ğŸ’” Removed from favourites');
  } else {
    stored.unshift({ text: txt, type, direction, ts: Date.now() });
    btn.classList.add('starred');
    showToast('â­ Saved to favourites!');
  }
  localStorage.setItem('favourites', JSON.stringify(stored.slice(0,30)));
}
function shareLink() {
  const input = document.getElementById('inputText').value.trim();
  if (!input) { showToast(t('noText')); return; }
  try {
    const data = btoa(encodeURIComponent(JSON.stringify({ input, direction })));
    const url = location.href.split('#')[0] + '#' + data;
    navigator.clipboard.writeText(url);
    showToast('ğŸ”— Link copied to clipboard!');
  } catch { showToast('âŒ Could not copy link'); }
}
function shareFB() {
  const url = encodeURIComponent(location.href.split('#')[0]);
  window.open('https://www.facebook.com/sharer/sharer.php?u=' + url, '_blank');
}
function shareWA() {
  const formal = document.getElementById('formalText').textContent;
  const input  = document.getElementById('inputText').value.trim();
  const msg = encodeURIComponent(`"${input}" â†’ "${formal}" via Mytheon Russian Translator`);
  window.open('https://wa.me/?text=' + msg, '_blank');
}
function shareLinkedIn() {
  const url = encodeURIComponent(location.href.split('#')[0]);
  window.open('https://www.linkedin.com/sharing/share-offsite/?url=' + url, '_blank');
}
function reportBad() {
  showToast('ğŸ™ Thank you! Reported for review.');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TRANSLATION API
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function fetchGoogle(text, sl, tl) {
  const url = `https://translate.googleapis.com/translate_a/single?client=gtx&sl=${sl}&tl=${tl}&dt=t&q=${encodeURIComponent(text)}`;
  const r = await fetch(url);
  if (!r.ok) throw new Error('HTTP ' + r.status);
  const d = await r.json();
  return d[0].map(s => s[0]).join('');
}
const delay = ms => new Promise(res => setTimeout(res, ms));

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   TRANSLITERATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TRANSLIT = {'Ğ°':'a','Ğ±':'b','Ğ²':'v','Ğ³':'g','Ğ´':'d','Ğµ':'ye','Ñ‘':'yo','Ğ¶':'zh','Ğ·':'z','Ğ¸':'i','Ğ¹':'y','Ğº':'k','Ğ»':'l','Ğ¼':'m','Ğ½':'n','Ğ¾':'o','Ğ¿':'p','Ñ€':'r','Ñ':'s','Ñ‚':'t','Ñƒ':'u','Ñ„':'f','Ñ…':'kh','Ñ†':'ts','Ñ‡':'ch','Ñˆ':'sh','Ñ‰':'shch','ÑŠ':'','Ñ‹':'y','ÑŒ':'','Ñ':'e','Ñ':'yu','Ñ':'ya','Ğ':'A','Ğ‘':'B','Ğ’':'V','Ğ“':'G','Ğ”':'D','Ğ•':'Ye','Ğ':'Yo','Ğ–':'Zh','Ğ—':'Z','Ğ˜':'I','Ğ™':'Y','Ğš':'K','Ğ›':'L','Ğœ':'M','Ğ':'N','Ğ':'O','ĞŸ':'P','Ğ ':'R','Ğ¡':'S','Ğ¢':'T','Ğ£':'U','Ğ¤':'F','Ğ¥':'Kh','Ğ¦':'Ts','Ğ§':'Ch','Ğ¨':'Sh','Ğ©':'Shch','Ğª':'','Ğ«':'Y','Ğ¬':'','Ğ­':'E','Ğ®':'Yu','Ğ¯':'Ya'};
function transliterate(text) { return text.split('').map(c => TRANSLIT[c] !== undefined ? TRANSLIT[c] : c).join(''); }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   RUSSIAN GRAMMAR HELPERS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TY2VY = [[/\bÑ‚Ñ‹\b/g,'Ğ’Ñ‹'],[/\bÑ‚ĞµĞ±Ñ\b/g,'Ğ’Ğ°Ñ'],[/\bÑ‚ĞµĞ±Ğµ\b/g,'Ğ’Ğ°Ğ¼'],[/\bÑ‚Ğ¾Ğ±Ğ¾Ğ¹\b/g,'Ğ’Ğ°Ğ¼Ğ¸'],[/\bÑ‚Ğ²Ğ¾Ğ¹\b/g,'Ğ’Ğ°Ñˆ'],[/\bÑ‚Ğ²Ğ¾Ñ\b/g,'Ğ’Ğ°ÑˆĞ°'],[/\bÑ‚Ğ²Ğ¾Ñ‘\b/g,'Ğ’Ğ°ÑˆĞµ'],[/\bÑ‚Ğ²Ğ¾Ğ¸\b/g,'Ğ’Ğ°ÑˆĞ¸'],[/\bÑ‚Ğ²Ğ¾ĞµĞ³Ğ¾\b/g,'Ğ’Ğ°ÑˆĞµĞ³Ğ¾'],[/\bÑ‚Ğ²Ğ¾ĞµĞ¹\b/g,'Ğ’Ğ°ÑˆĞµĞ¹'],[/\bÑ‚Ğ²Ğ¾ĞµĞ¼Ñƒ\b/g,'Ğ’Ğ°ÑˆĞµĞ¼Ñƒ']];
const VY2TY = [[/\bĞ’Ñ‹\b/g,'Ñ‚Ñ‹'],[/\bĞ’Ğ°Ñ\b/g,'Ñ‚ĞµĞ±Ñ'],[/\bĞ’Ğ°Ğ¼\b/g,'Ñ‚ĞµĞ±Ğµ'],[/\bĞ’Ğ°Ğ¼Ğ¸\b/g,'Ñ‚Ğ¾Ğ±Ğ¾Ğ¹'],[/\bĞ’Ğ°Ñˆ\b/g,'Ñ‚Ğ²Ğ¾Ğ¹'],[/\bĞ’Ğ°ÑˆĞ°\b/g,'Ñ‚Ğ²Ğ¾Ñ'],[/\bĞ’Ğ°ÑˆĞµ\b/g,'Ñ‚Ğ²Ğ¾Ñ‘'],[/\bĞ’Ğ°ÑˆĞ¸\b/g,'Ñ‚Ğ²Ğ¾Ğ¸'],[/\bĞ’Ğ°ÑˆĞµĞ³Ğ¾\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ³Ğ¾'],[/\bĞ’Ğ°ÑˆĞµĞ¹\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ¹'],[/\bĞ’Ğ°ÑˆĞµĞ¼Ñƒ\b/g,'Ñ‚Ğ²Ğ¾ĞµĞ¼Ñƒ']];
const GEND_F = [[/\bĞ¿Ñ€Ğ¸ÑˆÑ‘Ğ»\b/g,'Ğ¿Ñ€Ğ¸ÑˆĞ»Ğ°'],[/\bÑƒÑˆÑ‘Ğ»\b/g,'ÑƒÑˆĞ»Ğ°'],[/\bĞ½Ğ°ÑˆÑ‘Ğ»\b/g,'Ğ½Ğ°ÑˆĞ»Ğ°'],[/\bĞ±Ñ‹Ğ»\b/g,'Ğ±Ñ‹Ğ»Ğ°'],[/\bÑĞºĞ°Ğ·Ğ°Ğ»\b/g,'ÑĞºĞ°Ğ·Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾ĞµÑ…Ğ°Ğ»\b/g,'Ğ¿Ğ¾ĞµÑ…Ğ°Ğ»Ğ°'],[/\bĞ¿Ñ€Ğ¸ĞµÑ…Ğ°Ğ»\b/g,'Ğ¿Ñ€Ğ¸ĞµÑ…Ğ°Ğ»Ğ°'],[/\bÑĞ´ĞµĞ»Ğ°Ğ»\b/g,'ÑĞ´ĞµĞ»Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾ÑˆÑ‘Ğ»\b/g,'Ğ¿Ğ¾ÑˆĞ»Ğ°'],[/\bÑ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»\b/g,'Ñ€Ğ°Ğ±Ğ¾Ñ‚Ğ°Ğ»Ğ°'],[/\bĞ·Ğ½Ğ°Ğ»\b/g,'Ğ·Ğ½Ğ°Ğ»Ğ°'],[/\bĞ´ÑƒĞ¼Ğ°Ğ»\b/g,'Ğ´ÑƒĞ¼Ğ°Ğ»Ğ°'],[/\bÑ…Ğ¾Ñ‚ĞµĞ»\b/g,'Ñ…Ğ¾Ñ‚ĞµĞ»Ğ°'],[/\bĞ¼Ğ¾Ğ³\b/g,'Ğ¼Ğ¾Ğ³Ğ»Ğ°'],[/\bÑƒÑÑ‚Ğ°Ğ»\b/g,'ÑƒÑÑ‚Ğ°Ğ»Ğ°'],[/\bÑ€Ğ°Ğ´\b/g,'Ñ€Ğ°Ğ´Ğ°'],[/\bĞ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ğ»\b/g,'Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ğ»Ğ°'],[/\bÑĞ¿Ñ€Ğ¾ÑĞ¸Ğ»\b/g,'ÑĞ¿Ñ€Ğ¾ÑĞ¸Ğ»Ğ°'],[/\bĞ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ»\b/g,'Ğ¾Ñ‚Ğ²ĞµÑ‚Ğ¸Ğ»Ğ°'],[/\bÑ€ĞµÑˆĞ¸Ğ»\b/g,'Ñ€ĞµÑˆĞ¸Ğ»Ğ°'],[/\bĞ½Ğ°Ñ‡Ğ°Ğ»\b/g,'Ğ½Ğ°Ñ‡Ğ°Ğ»Ğ°'],[/\bĞ¿Ğ¾Ğ½ÑĞ»\b/g,'Ğ¿Ğ¾Ğ½ÑĞ»Ğ°'],[/\bĞ²Ğ·ÑĞ»\b/g,'Ğ²Ğ·ÑĞ»Ğ°'],[/\bĞ´Ğ°Ğ»\b/g,'Ğ´Ğ°Ğ»Ğ°']];
const LSTN_F = [[/\bĞ´Ğ¾Ñ€Ğ¾Ğ³Ğ¾Ğ¹\b/g,'Ğ´Ğ¾Ñ€Ğ¾Ğ³Ğ°Ñ'],[/\bÑƒĞ²Ğ°Ğ¶Ğ°ĞµĞ¼Ñ‹Ğ¹\b/g,'ÑƒĞ²Ğ°Ğ¶Ğ°ĞµĞ¼Ğ°Ñ'],[/\bĞ¼Ğ¸Ğ»Ñ‹Ğ¹\b/g,'Ğ¼Ğ¸Ğ»Ğ°Ñ']];
function applyMap(txt, map) { let o=txt; map.forEach(([re,rep])=>{o=o.replace(re,rep);}); return o; }
function makeFormal(t)  { return applyMap(t, TY2VY); }
function makeCasual(t)  { return applyMap(t, VY2TY); }
function applyGender(t,g) { return g==='female' ? applyMap(t,GEND_F) : t; }
function applyLstn(t,g)   { return g==='female' ? applyMap(t,LSTN_F) : t; }

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   GRAMMAR TIP
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const TIPS = {
  'en-ru': [
    [/\bĞ±Ñ‹Ğ»Ğ°?\b/,  'ğŸ’¡ <strong>Gender tip:</strong> "Ğ±Ñ‹Ğ»" = he was (male), "Ğ±Ñ‹Ğ»Ğ°" = she was (female). Russian past tense changes with speaker gender.'],
    [/\bĞ’Ñ‹\b/,     'ğŸ’¡ <strong>Formal tip:</strong> "Ğ’Ñ‹" (capital V) is the polite/formal "you". Always use it with strangers, managers and official contacts.'],
    [/\bÑ‚Ñ‹\b/,     'ğŸ’¡ <strong>Casual tip:</strong> "Ñ‚Ñ‹" is the informal "you". Use with friends, family and peers.'],
    [/\bĞ½Ğµ\b/,     'ğŸ’¡ <strong>Negation tip:</strong> "Ğ½Ğµ" means "not" in Russian and always comes directly before the verb it negates.'],
  ],
  'ru-en': [
    [/.+/, 'ğŸ’¡ <strong>Learning tip:</strong> Russian verbs have two aspects â€” perfective (completed action) and imperfective (ongoing). This affects the meaning significantly.'],
  ]
};
function showGrammarTip(text) {
  const tips = TIPS[direction] || [];
  const tip = document.getElementById('grammarTip');
  for (const [re, msg] of tips) {
    if (re.test(text)) {
      tip.innerHTML = msg;
      tip.classList.add('show');
      return;
    }
  }
  tip.classList.remove('show');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   MAIN TRANSLATE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doTranslate() {
  const input = document.getElementById('inputText').value.trim();
  if (!input) { showToast(t('noText')); return; }

  checkEasterEgg(input);

  const sl = direction === 'en-ru' ? 'en' : 'ru';
  const tl = direction === 'en-ru' ? 'ru' : 'en';

  const btn = document.getElementById('translateBtn');
  btn.disabled = true;
  document.getElementById('translateBtnText').textContent = 'â³ ' + t('translateBtn') + 'â€¦';
  document.getElementById('loading').classList.add('show');
  document.getElementById('results').classList.remove('show');

  try {
    let base = await fetchGoogle(input, sl, tl);
    let formal, casual;

    if (direction === 'en-ru') {
      base   = applyGender(base, speakerGend);
      base   = applyLstn(base, listenerGend);
      formal = makeFormal(base);
      casual = makeCasual(base);
      document.getElementById('formalNote').textContent = t('formalNote');
      document.getElementById('casualNote').textContent = t('casualNote');
      document.getElementById('formalTranslit').textContent = transliterate(formal);
      document.getElementById('casualTranslit').textContent = transliterate(casual);
    } else {
      formal = base;
      await delay(300);
      try {
        casual = await fetchGoogle(makeCasual(input), sl, tl);
        if (casual.toLowerCase() === formal.toLowerCase()) casual = base;
      } catch { casual = base; }
      document.getElementById('formalNote').textContent = t('formalNoteRu');
      document.getElementById('casualNote').textContent = t('casualNoteRu');
      document.getElementById('formalTranslit').textContent = '';
      document.getElementById('casualTranslit').textContent = '';
    }

    document.getElementById('formalText').textContent = formal;
    document.getElementById('casualText').textContent = casual;

    document.getElementById('favFormal').classList.remove('starred');
    document.getElementById('favCasual').classList.remove('starred');

    showGrammarTip(formal);

    document.getElementById('loading').classList.remove('show');
    document.getElementById('results').classList.add('show');

    saveHistory(input, formal, casual);
    await buildBreakdown(input, sl, tl);

  } catch (err) {
    document.getElementById('loading').classList.remove('show');
    document.getElementById('results').classList.add('show');
    document.getElementById('formalText').textContent = t('errText');
    document.getElementById('casualText').textContent = '';
    document.getElementById('formalTranslit').textContent = '';
    document.getElementById('casualTranslit').textContent = '';
    document.getElementById('breakdownBody').innerHTML =
      `<tr><td colspan="4" style="padding:13px 16px;color:#ef4444">Error: ${err.message}</td></tr>`;
  }

  btn.disabled = false;
  document.getElementById('translateBtnText').textContent = t('translateBtn');
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   WORD BREAKDOWN
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const EN_STOP = new Set(['the','a','an','in','on','at','to','for','of','and','or','but','is','it','i','my','me','you','your','he','she','we','they','this','that','with','from','not','are','was','were','be','have','has','had','do','does','did','will','would','could','should','may','might','as','by','up','if','so','no','yes','just','also','very','more']);
const RU_STOP = new Set(['Ğ¸','Ğ²','Ğ½Ğ°','Ñ','Ğ¿Ğ¾','Ğ´Ğ»Ñ','Ğ¾Ñ‚','Ğ¸Ğ·','Ğº','Ğ°','Ğ½Ğ¾','Ñ‡Ñ‚Ğ¾','ÑÑ‚Ğ¾','Ñ','Ñ‚Ñ‹','Ğ¾Ğ½','Ğ¾Ğ½Ğ°','Ğ¼Ñ‹','Ğ²Ñ‹','Ğ¾Ğ½Ğ¸','Ğ½Ğµ','Ğ´Ğ°','Ğ½ĞµÑ‚','Ğ¶Ğµ','ÑƒĞ¶Ğµ','ĞºĞ°Ğº','Ñ‚Ğ°Ğº','Ğ±Ñ‹','Ğ»Ğ¸','Ğ¸Ğ»Ğ¸','Ñ‚Ğ¾','Ğ²ÑÑ‘','Ñ‚Ğ°Ğ¼','Ñ‚ÑƒÑ‚','ĞµÑ‰Ñ‘','Ğ²Ğ¾Ñ‚']);
function detectType(w) {
  const lo = w.toLowerCase(), ru = /[Ğ°-ÑÑ‘]/i.test(lo);
  if (!ru) {
    if (['is','are','was','were','be','have','has','had','do','does','did','go','went','come','came','want','like','love','need','know','think','see','look','say','tell','ask','work','live','feel','call','get','put','give','take','make','help','try','use','keep','play','hear','speak','write','read','meet','run','turn'].includes(lo) || lo.endsWith('ing')||lo.endsWith('ate')||lo.endsWith('ify')) return 'verb';
    if (lo.endsWith('ly')) return 'adverb';
    if (lo.endsWith('ful')||lo.endsWith('less')||lo.endsWith('ous')||lo.endsWith('ive')||lo.endsWith('al')) return 'adj';
  } else {
    if (lo.endsWith('Ñ‚ÑŒ')||lo.endsWith('Ñ‚ÑÑ')||lo.endsWith('Ğ°Ñ‚ÑŒ')||lo.endsWith('ĞµÑ‚')||lo.endsWith('ÑÑ‚')) return 'verb';
    if (lo.endsWith('Ğ½Ğ¾')||lo.endsWith('ÑĞºĞ¸')) return 'adverb';
    if (lo.endsWith('Ñ‹Ğ¹')||lo.endsWith('Ğ¸Ğ¹')||lo.endsWith('Ğ¾Ğ¹')||lo.endsWith('Ğ°Ñ')) return 'adj';
  }
  return 'noun';
}
function getTagCfg() {
  return { verb:{emoji:'âš¡',css:'tag-verb',label:t('tagVerb')}, noun:{emoji:'ğŸ“¦',css:'tag-noun',label:t('tagNoun')}, adj:{emoji:'ğŸ¨',css:'tag-adj',label:t('tagAdj')}, adverb:{emoji:'ğŸ’¨',css:'tag-adv',label:t('tagAdv')}, phrase:{emoji:'ğŸ’¬',css:'tag-phrase',label:t('tagPhrase')} };
}
function extractWords(text) {
  const stop = direction==='ru-en' ? RU_STOP : EN_STOP;
  return [...new Set(text.split(/\s+/).map(w=>w.replace(/[^a-zA-ZĞ°-ÑÑ‘Ğ-Ğ¯Ğ]/g,'').toLowerCase()).filter(w=>w.length>3&&!stop.has(w)))].slice(0,6);
}
function extractPhrases(text) {
  const ws = text.trim().split(/\s+/); const out=[];
  for (let i=0;i<Math.min(ws.length-1,3);i++){const p=ws[i]+' '+ws[i+1]; if(p.replace(/[^a-zA-ZĞ°-ÑÑ‘Ğ-Ğ¯Ğ]/g,'').length>5) out.push(p);}
  return out.slice(0,2);
}
async function buildBreakdown(input, sl, tl) {
  const tbody = document.getElementById('breakdownBody');
  tbody.innerHTML = `<tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">${t('analysing')}</td></tr>`;
  const words=extractWords(input), phrases=extractPhrases(input), rows=[];
  for (const w of words) {
    try { await delay(140); const tr=await fetchGoogle(w,sl,tl); const type=detectType(w); let note='';
      if(direction==='en-ru'&&type==='verb'&&speakerGend==='female') note=t('noteVerbF');
      else if(direction==='en-ru'&&type==='noun') note=t('noteNoun');
      rows.push({type,orig:w,trans:tr,note}); } catch {}
  }
  for (const ph of phrases) {
    try { await delay(140); const tr=await fetchGoogle(ph,sl,tl); rows.push({type:'phrase',orig:ph,trans:tr,note:t('notePhrase')}); } catch {}
  }
  tbody.innerHTML = '';
  if (!rows.length) { tbody.innerHTML=`<tr><td colspan="4" style="padding:13px 16px;color:var(--xfaint)">${t('noBreakdown')}</td></tr>`; return; }
  const TAG = getTagCfg();
  rows.forEach(({type,orig,trans,note})=>{
    const cfg=TAG[type]||TAG.noun, tr=document.createElement('tr');
    tr.innerHTML=`<td><span class="tag ${cfg.css}">${cfg.emoji} ${cfg.label}</span></td><td class="orig-word">${orig}</td><td class="trans-word">${trans}</td><td class="note-cell">${note}</td>`;
    tbody.appendChild(tr);
  });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   HISTORY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function saveHistory(input, formal, casual) {
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  stored.unshift({ input, formal, casual, direction, ts: Date.now() });
  localStorage.setItem('history', JSON.stringify(stored.slice(0,15)));
  renderHistory();
}
function loadHistory() { renderHistory(); }
function renderHistory() {
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  const sec = document.getElementById('historySection');
  const list = document.getElementById('historyList');
  if (!stored.length) { sec.style.display = 'none'; return; }
  sec.style.display = 'block';
  list.innerHTML = '';
  stored.forEach((item, i) => {
    const el = document.createElement('div');
    el.className = 'history-item';
    el.innerHTML = `
      <div style="flex:1;min-width:0">
        <div class="history-text">${item.input}</div>
        <div class="history-sub">${item.formal}</div>
      </div>
      <div class="history-dir">${item.direction === 'en-ru' ? 'ğŸ‡¬ğŸ‡§â†’ğŸ‡·ğŸ‡º' : 'ğŸ‡·ğŸ‡ºâ†’ğŸ‡¬ğŸ‡§'}</div>
      <button class="history-del" onclick="deleteHistory(${i},event)">âœ•</button>`;
    el.addEventListener('click', () => restoreHistory(item));
    list.appendChild(el);
  });
}
function restoreHistory(item) {
  if (item.direction !== direction) swapDirection();
  document.getElementById('inputText').value = item.input;
  onInput();
  document.getElementById('formalText').textContent = item.formal;
  document.getElementById('casualText').textContent = item.casual;
  if (direction === 'en-ru') {
    document.getElementById('formalTranslit').textContent = transliterate(item.formal);
    document.getElementById('casualTranslit').textContent = transliterate(item.casual);
  }
  document.getElementById('results').classList.add('show');
  window.scrollTo({ top: 0, behavior: 'smooth' });
}
function deleteHistory(i, e) {
  e.stopPropagation();
  const stored = JSON.parse(localStorage.getItem('history') || '[]');
  stored.splice(i, 1);
  localStorage.setItem('history', JSON.stringify(stored));
  renderHistory();
}
function clearHistory() {
  localStorage.removeItem('history');
  renderHistory();
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   PHRASEBOOK DATA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const PHRASES = {
  business:[
    {en:'Good morning',ru:'Ğ”Ğ¾Ğ±Ñ€Ğ¾Ğµ ÑƒÑ‚Ñ€Ğ¾'},{en:'Please send me the contract',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ÑŒÑ‚Ğµ Ğ¼Ğ½Ğµ Ğ´Ğ¾Ğ³Ğ¾Ğ²Ğ¾Ñ€'},
    {en:'I would like to schedule a meeting',ru:'Ğ¯ Ñ…Ğ¾Ñ‚ĞµĞ»(Ğ°) Ğ±Ñ‹ Ğ½Ğ°Ğ·Ğ½Ğ°Ñ‡Ğ¸Ñ‚ÑŒ Ğ²ÑÑ‚Ñ€ĞµÑ‡Ñƒ'},{en:'Thank you for your time',ru:'Ğ¡Ğ¿Ğ°ÑĞ¸Ğ±Ğ¾ Ğ·Ğ° ÑƒĞ´ĞµĞ»Ñ‘Ğ½Ğ½Ğ¾Ğµ Ğ²Ñ€ĞµĞ¼Ñ'},
    {en:'Can we discuss the terms?',ru:'ĞœĞ¾Ğ¶ĞµĞ¼ Ğ»Ğ¸ Ğ¼Ñ‹ Ğ¾Ğ±ÑÑƒĞ´Ğ¸Ñ‚ÑŒ ÑƒÑĞ»Ğ¾Ğ²Ğ¸Ñ?'},{en:'I look forward to working with you',ru:'Ğ¯ Ñ Ğ½ĞµÑ‚ĞµÑ€Ğ¿ĞµĞ½Ğ¸ĞµĞ¼ Ğ¶Ğ´Ñƒ ÑĞ¾Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ° Ñ Ğ²Ğ°Ğ¼Ğ¸'},
    {en:'Please confirm receipt',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ´Ñ‚Ğ²ĞµÑ€Ğ´Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»ÑƒÑ‡ĞµĞ½Ğ¸Ğµ'},{en:'The invoice is attached',ru:'Ğ¡Ñ‡Ñ‘Ñ‚-Ñ„Ğ°ĞºÑ‚ÑƒÑ€Ğ° Ğ¿Ñ€Ğ¸Ğ»Ğ°Ğ³Ğ°ĞµÑ‚ÑÑ'},
    {en:'I will get back to you shortly',ru:'Ğ¯ ÑĞ²ÑĞ¶ÑƒÑÑŒ Ñ Ğ²Ğ°Ğ¼Ğ¸ Ğ² Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ Ğ²Ñ€ĞµĞ¼Ñ'},{en:'Best regards',ru:'Ğ¡ ÑƒĞ²Ğ°Ğ¶ĞµĞ½Ğ¸ĞµĞ¼'},
  ],
  travel:[
    {en:'Where is the nearest metro?',ru:'Ğ“Ğ´Ğµ Ğ±Ğ»Ğ¸Ğ¶Ğ°Ğ¹ÑˆĞµĞµ Ğ¼ĞµÑ‚Ñ€Ğ¾?'},{en:'How much does this cost?',ru:'Ğ¡ĞºĞ¾Ğ»ÑŒĞºĞ¾ ÑÑ‚Ğ¾ ÑÑ‚Ğ¾Ğ¸Ñ‚?'},
    {en:'I need a taxi please',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ñ‚Ğ°ĞºÑĞ¸, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'Is breakfast included?',ru:'Ğ—Ğ°Ğ²Ñ‚Ñ€Ğ°Ğº Ğ²ĞºĞ»ÑÑ‡Ñ‘Ğ½?'},
    {en:'Where is the bathroom?',ru:'Ğ“Ğ´Ğµ Ñ‚ÑƒĞ°Ğ»ĞµÑ‚?'},{en:'I have a reservation',ru:'Ğ£ Ğ¼ĞµĞ½Ñ ĞµÑÑ‚ÑŒ Ğ±Ñ€Ğ¾Ğ½Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ'},
    {en:'Can you speak slowly please?',ru:'Ğ“Ğ¾Ğ²Ğ¾Ñ€Ğ¸Ñ‚Ğµ Ğ¼ĞµĞ´Ğ»ĞµĞ½Ğ½ĞµĞµ, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'I am lost',ru:'Ğ¯ Ğ·Ğ°Ğ±Ğ»ÑƒĞ´Ğ¸Ğ»ÑÑ / Ğ·Ğ°Ğ±Ğ»ÑƒĞ´Ğ¸Ğ»Ğ°ÑÑŒ'},
    {en:'Two tickets please',ru:'Ğ”Ğ²Ğ° Ğ±Ğ¸Ğ»ĞµÑ‚Ğ°, Ğ¿Ğ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°'},{en:'What time does it open?',ru:'Ğ’Ğ¾ ÑĞºĞ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ñ‚ĞºÑ€Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ?'},
  ],
  romance:[
    {en:'I love you',ru:'Ğ¯ Ñ‚ĞµĞ±Ñ Ğ»ÑĞ±Ğ»Ñ'},{en:'You are beautiful',ru:'Ğ¢Ñ‹ ĞºÑ€Ğ°ÑĞ¸Ğ²Ğ°Ñ / ĞºÑ€Ğ°ÑĞ¸Ğ²Ñ‹Ğ¹'},
    {en:'I miss you',ru:'Ğ¯ ÑĞºÑƒÑ‡Ğ°Ñ Ğ¿Ğ¾ Ñ‚ĞµĞ±Ğµ'},{en:'Will you marry me?',ru:'Ğ¢Ñ‹ Ğ²Ñ‹Ğ¹Ğ´ĞµÑˆÑŒ Ğ·Ğ° Ğ¼ĞµĞ½Ñ Ğ·Ğ°Ğ¼ÑƒĞ¶?'},
    {en:'You mean everything to me',ru:'Ğ¢Ñ‹ Ğ·Ğ½Ğ°Ñ‡Ğ¸ÑˆÑŒ Ğ´Ğ»Ñ Ğ¼ĞµĞ½Ñ Ğ²ÑÑ‘'},{en:'I am thinking about you',ru:'Ğ¯ Ğ´ÑƒĞ¼Ğ°Ñ Ğ¾ Ñ‚ĞµĞ±Ğµ'},
    {en:'Let\'s go on a date',ru:'Ğ”Ğ°Ğ²Ğ°Ğ¹ ÑÑ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ° ÑĞ²Ğ¸Ğ´Ğ°Ğ½Ğ¸Ğµ'},{en:'You make me happy',ru:'Ğ¢Ñ‹ Ğ´ĞµĞ»Ğ°ĞµÑˆÑŒ Ğ¼ĞµĞ½Ñ ÑÑ‡Ğ°ÑÑ‚Ğ»Ğ¸Ğ²Ñ‹Ğ¼'},
    {en:'I have feelings for you',ru:'Ğ¢Ñ‹ Ğ¼Ğ½Ğµ Ğ½Ñ€Ğ°Ğ²Ğ¸ÑˆÑŒÑÑ'},{en:'Kiss me',ru:'ĞŸĞ¾Ñ†ĞµĞ»ÑƒĞ¹ Ğ¼ĞµĞ½Ñ'},
  ],
  medical:[
    {en:'I need a doctor',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶ĞµĞ½ Ğ²Ñ€Ğ°Ñ‡'},{en:'Call an ambulance',ru:'Ğ’Ñ‹Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ ÑĞºĞ¾Ñ€ÑƒÑ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ'},
    {en:'I am allergic to penicillin',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ°Ğ»Ğ»ĞµÑ€Ğ³Ğ¸Ñ Ğ½Ğ° Ğ¿ĞµĞ½Ğ¸Ñ†Ğ¸Ğ»Ğ»Ğ¸Ğ½'},{en:'Where is the pharmacy?',ru:'Ğ“Ğ´Ğµ Ğ°Ğ¿Ñ‚ĞµĞºĞ°?'},
    {en:'I have a headache',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ğ»Ğ¸Ñ‚ Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ°'},{en:'I feel sick',ru:'ĞœĞ½Ğµ Ğ¿Ğ»Ğ¾Ñ…Ğ¾'},
    {en:'I need my medication',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¼Ğ¾Ñ‘ Ğ»ĞµĞºĞ°Ñ€ÑÑ‚Ğ²Ğ¾'},{en:'I am diabetic',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ´Ğ¸Ğ°Ğ±ĞµÑ‚'},
    {en:'I have chest pain',ru:'Ğ£ Ğ¼ĞµĞ½Ñ Ğ±Ğ¾Ğ»ÑŒ Ğ² Ğ³Ñ€ÑƒĞ´Ğ¸'},{en:'I cannot breathe well',ru:'ĞœĞ½Ğµ Ñ‚Ñ€ÑƒĞ´Ğ½Ğ¾ Ğ´Ñ‹ÑˆĞ°Ñ‚ÑŒ'},
  ],
  emergency:[
    {en:'Help!',ru:'ĞŸĞ¾Ğ¼Ğ¾Ğ³Ğ¸Ñ‚Ğµ!'},{en:'Call the police!',ru:'Ğ’Ñ‹Ğ·Ğ¾Ğ²Ğ¸Ñ‚Ğµ Ğ¿Ğ¾Ğ»Ğ¸Ñ†Ğ¸Ñ!'},
    {en:'Fire!',ru:'ĞŸĞ¾Ğ¶Ğ°Ñ€!'},{en:'I have been robbed',ru:'ĞœĞµĞ½Ñ Ğ¾Ğ³Ñ€Ğ°Ğ±Ğ¸Ğ»Ğ¸'},
    {en:'I am in danger',ru:'Ğ¯ Ğ² Ğ¾Ğ¿Ğ°ÑĞ½Ğ¾ÑÑ‚Ğ¸'},{en:'Please call the embassy',ru:'ĞŸĞ¾Ğ¶Ğ°Ğ»ÑƒĞ¹ÑÑ‚Ğ°, Ğ¿Ğ¾Ğ·Ğ²Ğ¾Ğ½Ğ¸Ñ‚Ğµ Ğ² Ğ¿Ğ¾ÑĞ¾Ğ»ÑŒÑÑ‚Ğ²Ğ¾'},
    {en:'I need urgent help',ru:'ĞœĞ½Ğµ Ğ½ÑƒĞ¶Ğ½Ğ° ÑÑ€Ğ¾Ñ‡Ğ½Ğ°Ñ Ğ¿Ğ¾Ğ¼Ğ¾Ñ‰ÑŒ'},{en:'There has been an accident',ru:'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ¾ÑˆĞ»Ğ° Ğ°Ğ²Ğ°Ñ€Ğ¸Ñ'},
    {en:'Someone is unconscious',ru:'ĞšÑ‚Ğ¾-Ñ‚Ğ¾ Ğ±ĞµĞ· ÑĞ¾Ğ·Ğ½Ğ°Ğ½Ğ¸Ñ'},{en:'I am lost and scared',ru:'Ğ¯ Ğ¿Ğ¾Ñ‚ĞµÑ€ÑĞ»ÑÑ Ğ¸ Ğ¼Ğ½Ğµ ÑÑ‚Ñ€Ğ°ÑˆĞ½Ğ¾'},
  ],
};
function copyPhrase(text, e) {
  e.stopPropagation();
  navigator.clipboard.writeText(text).catch(() => {
    const ta = Object.assign(document.createElement('textarea'),{value:text});
    document.body.appendChild(ta); ta.select(); document.execCommand('copy'); ta.remove();
  });
  showToast('ğŸ“‹ Copied: ' + text);
}
function renderPhrasebook(tab) {
  const data = PHRASES[tab] || [];
  const html = `<div class="phrase-grid">${data.map(p=>`
    <div class="phrase-card" onclick="loadPhrase('${p.en.replace(/'/g,"\\'")}')">
      <div class="phrase-en">${p.en}</div>
      <div class="phrase-ru">${p.ru}</div>
      <div class="phrase-tr">${transliterate(p.ru)}</div>
      <div class="phrase-card-footer">
        <button class="phrase-copy-btn" onclick="copyPhrase('${p.ru.replace(/'/g,"\\'")}',event)" title="Copy Russian">ğŸ“‹ Copy RU</button>
        <button class="phrase-copy-btn" onclick="copyPhrase('${p.en.replace(/'/g,"\\'")}',event)" title="Copy English" style="margin-left:4px">ğŸ“‹ Copy EN</button>
      </div>
    </div>`).join('')}</div>`;
  document.getElementById('phraseContent').innerHTML = html;
}
function switchTab(tab, btn) {
  document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  renderPhrasebook(tab);
}
function loadPhrase(en) {
  if (direction !== 'en-ru') { direction = 'en-ru'; syncPills(); updateUI(); }
  document.getElementById('inputText').value = en;
  onInput();
  doTranslate();
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   VERB CONJUGATOR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doConjugate() {
  const raw = document.getElementById('verbInput').value.trim();
  if (!raw) { showToast('âœï¸ Enter a verb first'); return; }
  document.getElementById('conjugateLoading').style.display = 'block';
  document.getElementById('conjugateResult').style.display  = 'none';
  try {
    let enVerb = raw;
    if (/[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(raw)) {
      enVerb = await fetchGoogle(raw, 'ru', 'en');
    }
    enVerb = enVerb.toLowerCase().replace(/^to\s+/, '').trim();

    const pronouns = {
      present: [
        {ru:'Ğ¯',   en:`I ${enVerb} every day`},
        {ru:'Ğ¢Ñ‹',  en:`you ${enVerb} every day`},
        {ru:'ĞĞ½',  en:`he ${enVerb}s every day`},
        {ru:'ĞĞ½Ğ°', en:`she ${enVerb}s every day`},
        {ru:'ĞœÑ‹',  en:`we ${enVerb} every day`},
        {ru:'Ğ’Ñ‹',  en:`you all ${enVerb} every day`},
        {ru:'ĞĞ½Ğ¸', en:`they ${enVerb} every day`},
      ],
      past: [
        {ru:'ĞĞ½',  en:`he used to ${enVerb}`},
        {ru:'ĞĞ½Ğ°', en:`she used to ${enVerb}`},
        {ru:'ĞĞ½Ğ¸', en:`they used to ${enVerb}`},
      ],
      future: [
        {ru:'Ğ¯',   en:`I will ${enVerb}`},
        {ru:'Ğ¢Ñ‹',  en:`you will ${enVerb}`},
        {ru:'ĞĞ½',  en:`he will ${enVerb}`},
        {ru:'ĞĞ½Ğ°', en:`she will ${enVerb}`},
        {ru:'ĞœÑ‹',  en:`we will ${enVerb}`},
        {ru:'Ğ’Ñ‹',  en:`you all will ${enVerb}`},
        {ru:'ĞĞ½Ğ¸', en:`they will ${enVerb}`},
      ],
    };

    async function conjugateSentence(sentence, pronoun) {
      const full = await fetchGoogle(sentence, 'en', 'ru');
      let form = full.replace(/[.!?]$/, '').trim();
      const preLower = pronoun.toLowerCase() + ' ';
      if (form.toLowerCase().startsWith(preLower)) form = form.slice(preLower.length);
      form = form.replace(/\s+ĞºĞ°Ğ¶Ğ´Ñ‹Ğ¹ Ğ´ĞµĞ½ÑŒ\.?$/i, '').trim();
      return form.charAt(0).toUpperCase() + form.slice(1);
    }

    const results = {};
    for (const [tense, rows] of Object.entries(pronouns)) {
      results[tense] = [];
      for (const row of rows) {
        const form = await conjugateSentence(row.en, row.ru);
        results[tense].push({ pronoun: row.ru, form });
        await delay(80);
      }
    }
    document.getElementById('conjugateLoading').style.display = 'none';
    document.getElementById('conjugateResult').style.display  = 'block';
    document.getElementById('conjugateResult').innerHTML = renderConjugation(enVerb, results);
  } catch(err) {
    document.getElementById('conjugateLoading').style.display = 'none';
    document.getElementById('conjugateResult').style.display  = 'block';
    document.getElementById('conjugateResult').innerHTML = `<p style="color:#ef4444;font-size:.88rem">âŒ Error: ${err.message}</p>`;
  }
}
function renderConjugation(verb, results) {
  const tenseLabels = { present:'ğŸ• Present', past:'ğŸ“… Past', future:'ğŸ”® Future' };
  let html = `<div style="font-size:.78rem;color:var(--muted);margin-bottom:10px">Conjugations for: <strong style="color:var(--primary)">${verb}</strong></div>`;
  for (const [tense, rows] of Object.entries(results)) {
    html += `<div style="margin-bottom:12px">
      <div style="font-size:.72rem;text-transform:uppercase;letter-spacing:1px;color:var(--faint);font-weight:700;margin-bottom:6px">${tenseLabels[tense]}</div>
      <div style="display:grid;grid-template-columns:repeat(auto-fill,minmax(130px,1fr));gap:6px">`;
    for (const {pronoun, form} of rows) {
      html += `<div style="background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:7px 10px">
        <span style="font-size:.72rem;color:var(--faint)">${pronoun}</span>
        <div style="font-size:.92rem;color:var(--primary);font-weight:700;margin-top:1px">${form}</div>
      </div>`;
    }
    html += `</div></div>`;
  }
  return html;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   CASE EXPLAINER
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
async function doDecline() {
  const raw = document.getElementById('caseInput').value.trim();
  if (!raw) { showToast('âœï¸ Enter a word first'); return; }
  document.getElementById('caseLoading').style.display = 'block';
  document.getElementById('caseResult').style.display  = 'none';
  try {
    let enWord = raw, ruWord = raw;
    if (/[Ğ°-ÑÑ‘Ğ-Ğ¯Ğ]/.test(raw)) {
      enWord = await fetchGoogle(raw, 'ru', 'en');
      ruWord = raw;
    } else {
      ruWord = await fetchGoogle(raw, 'en', 'ru');
    }
    enWord = enWord.toLowerCase().trim();

    const CASES = [
      { name:'Nominative',   ru:'Ğ˜Ğ¼ĞµĞ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',  q:'ĞšÑ‚Ğ¾? Ğ§Ñ‚Ğ¾?',    en:`This is ${enWord}`,          usage:'Subject of the sentence' },
      { name:'Genitive',     ru:'Ğ Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',   q:'ĞšĞ¾Ğ³Ğ¾? Ğ§ĞµĞ³Ğ¾?',  en:`without ${enWord}`,           usage:'Possession, absence, negation' },
      { name:'Dative',       ru:'Ğ”Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',     q:'ĞšĞ¾Ğ¼Ñƒ? Ğ§ĞµĞ¼Ñƒ?',  en:`give to ${enWord}`,           usage:'Indirect object â€” to/for whom' },
      { name:'Accusative',   ru:'Ğ’Ğ¸Ğ½Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',   q:'ĞšĞ¾Ğ³Ğ¾? Ğ§Ñ‚Ğ¾?',   en:`I see ${enWord}`,             usage:'Direct object of action' },
      { name:'Instrumental', ru:'Ğ¢Ğ²Ğ¾Ñ€Ğ¸Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğ¹',  q:'ĞšĞµĞ¼? Ğ§ĞµĞ¼?',   en:`with ${enWord}`,              usage:'By means of, together with' },
      { name:'Prepositional',ru:'ĞŸÑ€ĞµĞ´Ğ»Ğ¾Ğ¶Ğ½Ñ‹Ğ¹',    q:'Ğ ĞºĞ¾Ğ¼? Ğ Ñ‡Ñ‘Ğ¼?',en:`thinking about ${enWord}`,   usage:'Location, topic of speech' },
    ];

    const caseResults = [];
    for (const c of CASES) {
      const translated = await fetchGoogle(c.en, 'en', 'ru');
      const words = translated.replace(/[.!?]/g,'').trim().split(/\s+/);
      const form = words[words.length - 1];
      caseResults.push({ ...c, form });
      await delay(80);
    }
    document.getElementById('caseLoading').style.display = 'none';
    document.getElementById('caseResult').style.display  = 'block';
    document.getElementById('caseResult').innerHTML = renderCases(enWord, ruWord, caseResults);
  } catch(err) {
    document.getElementById('caseLoading').style.display = 'none';
    document.getElementById('caseResult').style.display  = 'block';
    document.getElementById('caseResult').innerHTML = `<p style="color:#ef4444;font-size:.88rem">âŒ Error: ${err.message}</p>`;
  }
}
function renderCases(enWord, ruWord, cases) {
  let html = `<div style="font-size:.78rem;color:var(--muted);margin-bottom:10px">Cases for: <strong style="color:var(--primary)">${enWord}</strong> / <strong style="color:var(--primary)">${ruWord}</strong></div>
  <div style="display:grid;grid-template-columns:1fr 1fr;gap:6px">`;
  for (const c of cases) {
    html += `<div style="background:var(--bg);border:1px solid var(--border);border-radius:10px;padding:9px 11px">
      <div style="font-size:.7rem;color:var(--faint);font-weight:700;text-transform:uppercase;letter-spacing:.8px">${c.name}</div>
      <div style="font-size:.71rem;color:var(--muted);margin-top:1px">${c.ru} Â· ${c.q}</div>
      <div style="font-size:1.05rem;color:var(--primary);font-weight:700;margin:4px 0">${c.form}</div>
      <div style="font-size:.71rem;color:var(--faint)">${c.usage}</div>
    </div>`;
  }
  html += `</div>`;
  return html;
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   FAQ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function toggleFaq(btn) {
  const ans = btn.nextElementSibling, isOpen = btn.classList.contains('open');
  document.querySelectorAll('.faq-q.open').forEach(b => { b.classList.remove('open'); b.nextElementSibling.classList.remove('open'); });
  if (!isOpen) { btn.classList.add('open'); ans.classList.add('open'); }
}
function toggleFaqSection() {
  const items = document.getElementById('faqItems');
  const icon  = document.getElementById('faqToggleIcon');
  const isOpen = items.style.display !== 'none';
  items.style.display = isOpen ? 'none' : 'block';
  icon.textContent = isOpen ? 'ï¼‹' : 'ï¼';
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   KEYBOARD SHORTCUTS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
document.getElementById('inputText').addEventListener('keydown', e => {
  if (e.key === 'Enter' && !e.shiftKey) { e.preventDefault(); doTranslate(); }
});
document.addEventListener('keydown', e => {
  if (e.ctrlKey && e.key === 'Enter') doTranslate();
});

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   URL SHARE RESTORE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
function checkUrlHash() {
  if (!location.hash) return;
  try {
    const { input, direction: d } = JSON.parse(decodeURIComponent(atob(location.hash.slice(1))));
    if (d !== direction) { direction = d; syncPills(); updateUI(); }
    document.getElementById('inputText').value = input;
    onInput();
    doTranslate();
  } catch {}
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   EASTER EGG â€” Ğ”Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ° ğŸ˜
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
const EE_TRIGGERS = new Set(['di','dii','Ğ´Ğ¸','Ğ´Ğ¸Ğ»ÑŒĞ½Ğ°Ñ€Ğ°']);
function checkEasterEgg(input) {
  if (EE_TRIGGERS.has(input.trim().toLowerCase())) { showEasterEgg(); }
}
function showEasterEgg() {
  const el = document.getElementById('easterEgg');
  el.style.display = 'flex';
  el.style.animation = 'none'; el.offsetHeight; el.style.animation = 'eeFadeIn .3s ease';
  const em = document.getElementById('eeEmoji');
  em.textContent = 'ğŸ˜';
  em.style.animation = 'none'; em.offsetHeight;
  em.style.animation = 'eeEntrance .65s cubic-bezier(.34,1.56,.64,1) forwards, eePulse .55s .65s ease-in-out infinite alternate';
  launchFireworks();
  clearTimeout(el._eet);
  el._eet = setTimeout(closeEasterEgg, 5000);
}
function closeEasterEgg() {
  const el = document.getElementById('easterEgg');
  el.style.display = 'none';
  document.getElementById('eeParticles').innerHTML = '';
}
function launchFireworks() {
  const wrap = document.getElementById('eeParticles');
  wrap.innerHTML = '';
  const EMOJIS = ['â¤ï¸','ğŸ’–','ğŸ’•','ğŸ’','â­','âœ¨','ğŸ’«','ğŸŒŸ','ğŸ‰','ğŸŠ','ğŸŒ¸','ğŸ’›','ğŸ¥°','ğŸ”¥','ğŸˆ'];
  function burst(delay) {
    setTimeout(() => {
      const cx = 15 + Math.random() * 70;
      const cy = 10 + Math.random() * 55;
      const count = 14 + Math.floor(Math.random() * 8);
      for (let i = 0; i < count; i++) {
        const p = document.createElement('div');
        const angle = (i / count) * Math.PI * 2 + (Math.random() - .5) * .7;
        const dist  = 90 + Math.random() * 180;
        const dur   = .7 + Math.random() * 1.0;
        const size  = 18 + Math.random() * 24;
        const emoji = EMOJIS[Math.floor(Math.random() * EMOJIS.length)];
        p.style.cssText = [
          'position:absolute',
          `left:${cx}%`,`top:${cy}%`,
          `font-size:${size}px`,
          'transform:translate(-50%,-50%)',
          'pointer-events:none',
          `animation:eeParticle ${dur}s ease-out forwards`,
          `--eetx:${(Math.cos(angle)*dist).toFixed(1)}px`,
          `--eety:${(Math.sin(angle)*dist).toFixed(1)}px`,
        ].join(';');
        p.textContent = emoji;
        wrap.appendChild(p);
        setTimeout(() => p.remove(), dur * 1000 + 400);
      }
    }, delay);
  }
  [0, 220, 480, 780, 1120, 1520, 2020, 2700].forEach(d => burst(d));
}

/* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INIT
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
window.addEventListener('load', () => {
  loadTheme();
  renderPhrasebook('business');
  loadHistory();
  checkUrlHash();
});
</script>
</body>
</html>
